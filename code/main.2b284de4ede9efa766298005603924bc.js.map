{"version":3,"sources":["webpack:///./src/scenes/lobby.jsx","webpack:///./src/components/camera.js","webpack:///./src/components/hands.js","webpack:///./src/components/renderer.jsx","webpack:///./src/locales/index.js","webpack:///./src/locales/en.js","webpack:///./src/locales/es.js","webpack:///./src/reducers/lobby.js","webpack:///./src/reducers/realm.js","webpack:///./src/reducers/user.js","webpack:///./src/reducers/index.js","webpack:///./src/components/discord.jsx","webpack:///./src/components/github.jsx","webpack:///./src/components/music.jsx","webpack:///./src/components/session.jsx","webpack:///./src/scenes/index.jsx","webpack:///./src/layout/default.jsx","webpack:///./src/layout/exokit.jsx","webpack:///./src/index.jsx","webpack:///./src/layout/index.jsx","webpack:///./src/actions/user.js","webpack:///./src/components/realm/voxels.js","webpack:///./src/scenes/realm.jsx","webpack:///./src/components/realm/metadata.jsx","webpack:///./src/components/lobby/ground.js","webpack:///./src/actions/lobby.js","webpack:///./src/components/realm/picker.js","webpack:///./src/components/lobby/menu.js","webpack:///./src/components/lobby/starfield.js","webpack:///./src/services/api.js","webpack:///./src/components/popup.jsx","webpack:///./src/services/mesher.worker.js","webpack:///./src/components/panel.js","webpack:///./src/textures/noise.js","webpack:///./src/services/mesher.js","webpack:///./src/actions/realm.js","webpack:///./src/actions/types.js","webpack:///./src/services/fonts.js","webpack:///./src/components/lobby/title.js"],"names":["Lobby","this","props","filter","hasLoaded","history","isSigningIn","pagination","realms","user","renderer","current","createRealm","fetchRealms","setFilter","setPage","signin","signout","anisotropy","getMaxAnisotropy","scene","resetScene","add","Ground","Starfield","Title","menu","Menu","onBeforeRender","bind","vr","enabled","touches","Touches","window","filtered","target","canvas","on","onPointerDown","previousFilter","wasSigningIn","previousPagination","previousRealms","previousUser","isScreenshot","filterHasUpdated","page","updateFilter","updateSession","updatePagination","updateRealms","setImmediate","__SCREENSHOT_READY__","disable","hands","raycaster","children","forEach","hand","i","buttons","pointer","setupRaycaster","hit","intersectObjects","intersects","visible","setHover","distance","object","point","scale","z","onPointer","isDown","triggerDown","e","x","y","camera","width","height","setFromCamera","Math","min","max","PureComponent","defaultProps","undefined","propTypes","PropTypes","string","isRequired","bool","shape","number","pages","arrayOf","name","slug","instanceOf","Renderer","_id","func","connect","lobby","isAuth","profile","Camera","rotation","order","aux","direction","Vector3","forward","right","up","worldUp","input","keyboard","Vector2","fullscreen","onBlur","onKeyboardDown","onKeyboardUp","reset","set","keyCode","repeat","movements","isLocked","addEventListener","onPointerMovement","onPointerLockClose","request","removeEventListener","release","dx","dy","delta","position","PI_2","PI","getWorldDirection","crossVectors","normalize","addScaledVector","updateMatrixWorld","lookAt","canLock","_canLock","value","pointerlock","available","onPointerLockAttain","destroy","PerspectiveCamera","Hands","mesh","pointerMesh","setup","clone","menuDown","menuUp","grip","gripDown","gripUp","pad","padDown","padUp","trigger","triggerUp","matrixAutoUpdate","auxMatrix","Matrix4","matrixWorld","identity","extractRotation","ray","origin","setFromMatrixPosition","applyMatrix4","geometry","BoxGeometry","translate","faces","face","color","offsetHSL","BufferGeometry","fromGeometry","material","MeshBasicMaterial","map","Noise","Mesh","pointerGeometry","setFromPoints","pointerMaterial","LineBasicMaterial","Line","gamepads","navigator","getGamepads","gamepad","id","startsWith","sort","a","b","localeCompare","pose","updateHand","standingMatrix","fromArray","orientation","quaternion","matrix","compose","premultiply","matrixWorldNeedsUpdate","pressed","Object3D","React","createRef","onAnimationTick","onResize","__SCREENSHOT__","clock","Clock","fog","FogExp2","Raycaster","WebGLRenderer","antialias","powerPreference","stencil","setPixelRatio","devicePixelRatio","setAnimationLoop","room","setupVR","stats","begin","animation","getDelta","time","oldTime","update","render","end","parentNode","getBoundingClientRect","isPresenting","setSize","aspect","updateProjectionMatrix","capabilities","setHex","setClearColor","enterVR","display","getDevice","requestPresent","source","domElement","getVRDisplays","then","displays","length","setDevice","getStandingMatrix","child","dispose","setFog","Scene","ref","Component","ShaderChunk","fog_vertex","replace","locales","en","Realm","editMetadata","save","User","confirmPassword","email","signIn","signInWithGoogle","signOut","password","register","es","availableLocales","Object","keys","translations","locale","merge","lobbyReducer","combineReducers","state","action","type","types","payload","realmReducer","isCreator","isEditingMetadata","size","voxels","Uint32Array","sessionKey","storedSession","JSON","parse","localStorage","getItem","API","setAuthorization","token","userReducer","firstName","split","setItem","stringify","removeItem","rootReducer","i18n","loadingBar","realm","Link","styled","Discord","href","rel","xmlns","viewBox","fill","d","GitHub","className","Wrapper","div","Progress","Controls","MAX_UINT32","getRandomValue","ceiling","floor","crypto","getRandomValues","random","Music","next","toggle","tracks","index","temp","player","document","createElement","crossOrigin","ontimeupdate","onTimeUpdate","onended","volume","isPlaying","playhead","track","waitForFirstInteraction","currentTime","sec","setState","duration","first","play","paused","pause","src","clientId","fetch","res","status","Error","json","userOnTitle","username","title","indexOf","substr","stream_url","renderUI","artwork","artwork_url","link","permalink_url","userlink","waveform","waveform_url","alt","style","onClick","Tabs","Content","Form","form","Session","onLoginSubmit","onRegisterSubmit","tab","preventDefault","login","hide","loginWithGoogle","tabs","heading","isShowing","onSubmit","required","Scenes","path","exact","key","to","loadingBarStyle","backgroundColor","zIndex","Layout","store","storedLocale","browserLocale","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","productionCompose","createStore","applyMiddleware","thunkMiddleware","promiseMiddleware","loadingBarMiddleware","languages","language","browserLanguage","userLanguage","toLowerCase","syncTranslationWithStore","dispatch","loadTranslations","load","setLocale","getState","refreshSession","createBrowserHistory","basename","__BASENAME__","location","hash","GoogleAnalyticsObject","ga","q","push","arguments","l","Date","__ANALYTICS__","script","async","body","appendChild","listen","pathname","mount","getElementById","userAgent","ExokitLayout","DefaultLayout","hideSessionPopup","endpoint","method","showSessionPopup","left","screen","w","top","h","win","open","baseURL","watcher","setInterval","postMessage","clearInterval","onMessage","session","data","Voxels","instanced","shader","InstancedBufferGeometry","ShaderMaterial","defines","vertexShader","vertex","fragmentShader","fragment","uniforms","UniformsUtils","vertexColors","VertexColors","frustum","Frustum","remove","instances","distanceTo","round","instance","chunk","updateMatrix","frustumCulled","offset","Float32Array","setAttribute","InstancedBufferAttribute","attributes","setUsage","DynamicDrawUsage","maxInstancedCount","multiplyMatrices","projectionMatrix","matrixWorldInverse","setFromMatrix","offsets","worldSphere","intersectsSphere","reduce","array","needsUpdate","normal","uv","BufferAttribute","setIndex","computeBoundingSphere","boundingSphere","ShaderLib","basic","join","USE_MAP","USE_UV","match","params","updateFog","picker","Picker","extensions","get","head","rocket","previousGeometry","previousFog","previousSize","resize","copy","updateVoxels","updateFrustum","isLevitating","locomotionMode","multiplyScalar","axis","colors","fg","sin","rotateY","rotateX","rotateZ","translateZ","isExokit","Toggle","Metadata","show","defaultValue","PlaneGeometry","vertices","p","v","c","avg","factor","setRGB","block","strip","colorModeButton","label","setColorMode","colorMode","draw","locomotionModeButton","setLocomotionMode","bg","Color","setHSL","Fonts","waitUntilLoaded","ctx","context","fillStyle","getHexString","fillRect","grdWhite","createLinearGradient","addColorStop","grdBlack","restore","grd","strokeStyle","beginPath","rect","stroke","font","textAlign","textBaseline","fillText","mode","toUpperCase","imageData","getImageData","getHex","Panel","Pillar","CylinderGeometry","creator","vignette","createRadialGradient","hasLoadedFont","image","Image","onload","screenshot","isHover","drawImage","ButtonsPanel","isActive","isDisabled","CreateRealm","Pagination","userPhoto","Filter","findIndex","button","hover","addPanel","panel","pillar","showCreateRealm","count","PointsMaterial","Points","__API__","headers","authorization","Authorization","FormData","arrayBuffer","Overlay","Heading","Popup","node","module","exports","Worker","backplate","texture","CanvasTexture","getContext","splice","side","DoubleSide","PlaneBufferGeometry","worldToLocal","pixels","light","putImageData","magFilter","NearestFilter","minFilter","wrapS","RepeatWrapping","wrapT","promiseId","promises","worker","onmessage","Promise","resolve","create","generateGeometry","Mesher","generate","hideMetadataPopup","showMetadataPopup","updateMetadata","randomized","r","g","append","Blob","buffer","LOBBY_FETCH_REALMS","LOBBY_FETCH_REALMS_FULFILLED","LOBBY_SET_FILTER","LOBBY_SET_PAGE","REALM_CREATE","REALM_CREATE_FULFILLED","REALM_FETCH","REALM_FETCH_FULFILLED","REALM_HIDE_METADATA_POPUP","REALM_RESET","REALM_SHOW_METADATA_POPUP","REALM_UPDATE_FOG","REALM_UPDATE_GEOMETRY","REALM_UPDATE_GEOMETRY_FULFILLED","REALM_UPDATE_METADATA","REALM_UPDATE_METADATA_FULFILLED","REALM_UPDATE_VOXELS","USER_HIDE_SESSION_POPUP","USER_REFRESH_SESSION","USER_REFRESH_SESSION_FULFILLED","USER_REFRESH_SESSION_REJECTED","USER_SHOW_SESSION_POPUP","USER_LOGIN","USER_LOGIN_FULFILLED","USER_REGISTER","USER_REGISTER_FULFILLED","USER_SIGNOUT","loaded","fonts","Array","isArray","all","check","setTimeout","transparent","arc","subdivision","radius","__VERSION__"],"mappings":"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","file":"code/main.4ad81e23467c248ff9d0.js","sourcesContent":["import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport Touches from 'touches';\nimport {\n  fetchRealms,\n  setFilter,\n  setPage,\n} from '@/actions/lobby';\nimport {\n  create as createRealm,\n} from '@/actions/realm';\nimport { showSessionPopup as signin, signout } from '@/actions/user';\nimport Ground from '@/components/lobby/ground';\nimport Menu from '@/components/lobby/menu';\nimport Starfield from '@/components/lobby/starfield';\nimport Title from '@/components/lobby/title';\nimport Renderer from '@/components/renderer';\n\nclass Lobby extends PureComponent {\n  componentDidMount() {\n    const {\n      filter,\n      hasLoaded,\n      history,\n      isSigningIn,\n      pagination,\n      realms,\n      user,\n      renderer: { current: renderer },\n      createRealm,\n      fetchRealms,\n      setFilter,\n      setPage,\n      signin,\n      signout,\n    } = this.props;\n    // Setup scene\n    const anisotropy = renderer.getMaxAnisotropy();\n    const scene = renderer.resetScene();\n    scene.add(new Ground());\n    scene.add(new Starfield());\n    scene.add(new Title({ anisotropy }));\n    this.menu = new Menu({\n      anisotropy,\n      filter,\n      history,\n      isSigningIn,\n      pagination,\n      realms,\n      user,\n      createRealm,\n      setFilter,\n      setPage,\n      signin,\n      signout,\n    });\n    scene.add(this.menu);\n    this.renderer = renderer;\n    this.scene = scene;\n    scene.onBeforeRender = this.onBeforeRender.bind(this);\n    // Input for non-vr browsers\n    if (!renderer.renderer.vr.enabled) {\n      this.touches = Touches(window, {\n        filtered: true,\n        target: renderer.canvas.current,\n      })\n        .on('start', this.onPointerDown.bind(this));\n    }\n    if (!hasLoaded) {\n      // Fetch realms\n      fetchRealms();\n    }\n  }\n\n  componentDidUpdate({\n    filter: previousFilter,\n    isSigningIn: wasSigningIn,\n    pagination: previousPagination,\n    realms: previousRealms,\n    user: previousUser,\n  }) {\n    const {\n      filter,\n      isSigningIn,\n      pagination,\n      realms,\n      user,\n      fetchRealms,\n      setFilter,\n    } = this.props;\n    const {\n      menu,\n      renderer: { isScreenshot },\n    } = this;\n    const filterHasUpdated = filter !== previousFilter;\n    if (\n      filterHasUpdated\n      || pagination.page !== previousPagination.page\n    ) {\n      // Fetch realms\n      fetchRealms();\n    }\n    if (filterHasUpdated) {\n      // Update filter\n      menu.updateFilter(filter);\n    }\n    if (isSigningIn !== wasSigningIn) {\n      // Update Session\n      menu.updateSession({ isSigningIn });\n    }\n    if (pagination !== previousPagination) {\n      // Update pagination\n      menu.updatePagination(pagination);\n    }\n    if (realms !== previousRealms) {\n      // Update realms\n      menu.updateRealms(realms);\n      if (isScreenshot) {\n        setImmediate(() => {\n          window.__SCREENSHOT_READY__ = true;\n        });\n      }\n    }\n    if (user !== previousUser) {\n      // Update Session\n      menu.updateSession({ user });\n      if (!user && filter === 'user') {\n        setFilter('popular');\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    const { scene, touches } = this;\n    delete scene.onBeforeRender;\n    if (touches) {\n      touches.disable();\n    }\n  }\n\n  onBeforeRender() {\n    const {\n      menu,\n      renderer: {\n        hands,\n        raycaster,\n      },\n    } = this;\n\n    // Handle controls\n    hands.children.forEach((hand, i) => {\n      const { buttons, pointer } = hand;\n      hand.setupRaycaster(raycaster);\n      const hit = raycaster.intersectObjects(menu.intersects)[0] || false;\n      if (!hit) {\n        pointer.visible = false;\n        menu.setHover({ hand: i });\n        return;\n      }\n      const {\n        distance,\n        object,\n        point,\n      } = hit;\n      // Pointer feedback\n      pointer.scale.z = distance - 0.175;\n      pointer.visible = true;\n      // Menu\n      object.onPointer({\n        hand: i,\n        isDown: buttons.triggerDown,\n        point,\n      });\n    });\n  }\n\n  onPointerDown(e, [x, y]) {\n    // Handle non-vr browsers input\n    const {\n      menu,\n      props: {\n        isSigningIn,\n      },\n      renderer: {\n        camera,\n        raycaster,\n        width,\n        height,\n      },\n    } = this;\n    if (isSigningIn) {\n      return;\n    }\n    raycaster.setFromCamera({\n      x: Math.min(Math.max(0.5 - (x / width), -0.5), 0.5) * -2,\n      y: Math.min(Math.max(0.5 - (y / height), -0.5), 0.5) * 2,\n    }, camera);\n    const hit = raycaster.intersectObjects(menu.intersects)[0] || false;\n    if (!hit) {\n      return;\n    }\n    hit.object.onPointer({\n      hand: 0,\n      isDown: true,\n      point: hit.point,\n    });\n  }\n\n  render() {\n    return null;\n  }\n}\n\nLobby.defaultProps = {\n  user: undefined,\n};\n\nLobby.propTypes = {\n  filter: PropTypes.string.isRequired,\n  hasLoaded: PropTypes.bool.isRequired,\n  // eslint-disable-next-line react/forbid-prop-types\n  history: PropTypes.object.isRequired,\n  isSigningIn: PropTypes.bool.isRequired,\n  pagination: PropTypes.shape({\n    page: PropTypes.number.isRequired,\n    pages: PropTypes.number.isRequired,\n  }).isRequired,\n  realms: PropTypes.arrayOf(PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    slug: PropTypes.string.isRequired,\n  })).isRequired,\n  renderer: PropTypes.shape({\n    current: PropTypes.instanceOf(Renderer),\n  }).isRequired,\n  user: PropTypes.shape({\n    _id: PropTypes.string,\n    name: PropTypes.string,\n  }),\n  createRealm: PropTypes.func.isRequired,\n  fetchRealms: PropTypes.func.isRequired,\n  setFilter: PropTypes.func.isRequired,\n  setPage: PropTypes.func.isRequired,\n  signin: PropTypes.func.isRequired,\n  signout: PropTypes.func.isRequired,\n};\n\nexport default connect(\n  ({\n    lobby: {\n      filter,\n      hasLoaded,\n      pagination,\n      realms,\n    },\n    user: {\n      isAuth,\n      isSigningIn,\n      profile: user,\n    },\n  }) => ({\n    filter,\n    hasLoaded,\n    isSigningIn,\n    pagination,\n    realms,\n    user: isAuth ? user : undefined,\n  }),\n  {\n    createRealm,\n    fetchRealms,\n    setFilter,\n    setPage,\n    signin,\n    signout,\n  }\n)(Lobby);\n","import fullscreen from 'fullscreen';\nimport pointerlock from 'pointer-lock';\nimport {\n  PerspectiveCamera,\n  Vector2,\n  Vector3,\n} from 'three';\n\nclass Camera extends PerspectiveCamera {\n  constructor({ canvas }) {\n    super(70, 1, 0.1, 1024);\n    this.canvas = canvas;\n    this.rotation.order = 'YXZ';\n    this.aux = {\n      direction: new Vector3(),\n      forward: new Vector3(),\n      right: new Vector3(),\n      up: new Vector3(),\n      worldUp: new Vector3(0, 1, 0),\n    };\n    this.input = {\n      keyboard: new Vector3(0, 0, 0),\n      pointer: new Vector2(0, 0),\n    };\n    this.fullscreen = fullscreen(canvas);\n    this.onBlur = this.onBlur.bind(this);\n    this.onKeyboardDown = this.onKeyboardDown.bind(this);\n    this.onKeyboardUp = this.onKeyboardUp.bind(this);\n    this.reset();\n  }\n\n  get canLock() {\n    return this._canLock;\n  }\n\n  set canLock(value) {\n    if (value && !this.pointerlock && pointerlock.available()) {\n      this.pointerlock = pointerlock(this.canvas);\n      this.pointerlock.on('attain', this.onPointerLockAttain.bind(this));\n    }\n    if (!value && this.pointerlock) {\n      this.pointerlock.destroy();\n      delete this.pointerlock;\n    }\n    this._canLock = value;\n  }\n\n  onBlur() {\n    const { input: { keyboard } } = this;\n    keyboard.set(0, 0, 0);\n  }\n\n  onKeyboardDown({ keyCode, repeat }) {\n    const { input: { keyboard } } = this;\n    if (repeat) return;\n    switch (keyCode) {\n      case 65:\n        keyboard.x = -1;\n        break;\n      case 68:\n        keyboard.x = 1;\n        break;\n      case 16:\n        keyboard.y = -1;\n        break;\n      case 32:\n        keyboard.y = 1;\n        break;\n      case 83:\n        keyboard.z = -1;\n        break;\n      case 87:\n        keyboard.z = 1;\n        break;\n      default:\n        break;\n    }\n  }\n\n  onKeyboardUp({ keyCode, repeat }) {\n    const { input: { keyboard } } = this;\n    if (repeat) return;\n    switch (keyCode) {\n      case 65:\n        if (keyboard.x < 0) keyboard.x = 0;\n        break;\n      case 68:\n        if (keyboard.x > 0) keyboard.x = 0;\n        break;\n      case 16:\n        if (keyboard.y < 0) keyboard.y = 0;\n        break;\n      case 32:\n        if (keyboard.y > 0) keyboard.y = 0;\n        break;\n      case 83:\n        if (keyboard.z < 0) keyboard.z = 0;\n        break;\n      case 87:\n        if (keyboard.z > 0) keyboard.z = 0;\n        break;\n      default:\n        break;\n    }\n  }\n\n  onPointerLockAttain(movements) {\n    const { fullscreen } = this;\n    this.isLocked = true;\n    this.rotation.z = 0;\n    window.addEventListener('blur', this.onBlur, false);\n    window.addEventListener('keydown', this.onKeyboardDown, false);\n    window.addEventListener('keyup', this.onKeyboardUp, false);\n    movements.on('data', this.onPointerMovement.bind(this));\n    movements.on('close', this.onPointerLockClose.bind(this));\n    fullscreen.request();\n  }\n\n  onPointerLockClose() {\n    const {\n      fullscreen,\n      input: { keyboard, pointer },\n    } = this;\n    window.removeEventListener('blur', this.onBlur);\n    window.removeEventListener('keydown', this.onKeyboardDown);\n    window.removeEventListener('keyup', this.onKeyboardUp);\n    this.isLocked = false;\n    fullscreen.release();\n    keyboard.set(0, 0, 0);\n    pointer.set(0, 0);\n  }\n\n  onPointerMovement({ dx, dy }) {\n    const { input: { pointer } } = this;\n    pointer.set(dx, dy);\n  }\n\n  onAnimationTick({ delta }) {\n    const {\n      isLocked,\n      input: { keyboard, pointer },\n      rotation,\n      position,\n    } = this;\n    if (!isLocked) {\n      return;\n    }\n    if (pointer.x !== 0 || pointer.y !== 0) {\n      const sensitivity = 0.003;\n      rotation.y -= pointer.x * sensitivity;\n      rotation.x -= pointer.y * sensitivity;\n      const PI_2 = Math.PI / 2;\n      rotation.x = Math.max(-PI_2, Math.min(PI_2, rotation.x));\n      pointer.set(0, 0);\n    }\n    if (keyboard.x !== 0 || keyboard.y !== 0 || keyboard.z !== 0) {\n      const {\n        direction,\n        forward,\n        right,\n        up,\n        worldUp,\n      } = this.aux;\n      this.getWorldDirection(forward);\n      right.crossVectors(forward, worldUp).normalize();\n      up.crossVectors(right, forward).normalize();\n      direction\n        .set(0, 0, 0)\n        .addScaledVector(right, keyboard.x)\n        .addScaledVector(up, keyboard.y)\n        .addScaledVector(forward, keyboard.z)\n        .normalize();\n      position.addScaledVector(direction, 6 * delta);\n      this.updateMatrixWorld();\n    }\n  }\n\n  reset() {\n    const { position, rotation } = this;\n    position.set(0, 1.5, 0.5);\n    rotation.set(0, 0, 0);\n    this.lookAt(0, 1.5, 0.5);\n    this.canLock = false;\n  }\n}\n\nexport default Camera;\n","import {\n  BoxGeometry,\n  BufferGeometry,\n  Line,\n  LineBasicMaterial,\n  Matrix4,\n  Mesh,\n  MeshBasicMaterial,\n  Object3D,\n  Vector3,\n} from 'three';\nimport Noise from '@/textures/noise';\n\nclass Hands extends Object3D {\n  constructor() {\n    if (\n      !Hands.mesh\n      || !Hands.pointerMesh\n    ) Hands.setup();\n\n    super();\n    const { mesh, pointerMesh } = Hands;\n    for (let i = 0; i < 2; i += 1) {\n      const hand = mesh.clone();\n      hand.buttons = {\n        menu: false,\n        menuDown: false,\n        menuUp: false,\n        grip: false,\n        gripDown: false,\n        gripUp: false,\n        pad: false,\n        padDown: false,\n        padUp: false,\n        trigger: false,\n        triggerDown: false,\n        triggerUp: false,\n      };\n      hand.pointer = pointerMesh.clone();\n      hand.pointer.visible = false;\n      hand.add(hand.pointer);\n      hand.matrixAutoUpdate = false;\n      hand.setupRaycaster = (raycaster) => Hands.setupRaycaster({ hand, raycaster });\n      hand.visible = false;\n      this.add(hand);\n    }\n  }\n\n  update() {\n    const { children } = this;\n    const gamepads = ('getGamepads' in navigator ? [...navigator.getGamepads()] : [])\n      .filter((gamepad) => (\n        gamepad\n        && (\n          gamepad.id === 'Daydream Controller'\n          || gamepad.id === 'Gear VR Controller'\n          || gamepad.id === 'Oculus Go Controller'\n          || gamepad.id === 'OpenVR Gamepad'\n          || gamepad.id.startsWith('Oculus Touch')\n          || gamepad.id.startsWith('HTC Vive Focus')\n          || gamepad.id.startsWith('Spatial Controller')\n        )\n      ));\n    gamepads.sort((a, b) => (b.id.localeCompare(a.id)));\n    children.forEach((hand, i) => {\n      const gamepad = gamepads[i];\n      hand.visible = !!gamepad && !!gamepad.pose;\n      if (hand.visible) {\n        this.updateHand({\n          hand,\n          buttons: gamepad.buttons,\n          pose: gamepad.pose,\n        });\n      }\n    });\n  }\n\n  updateHand({\n    hand,\n    buttons,\n    pose,\n  }) {\n    const { standingMatrix } = this;\n    if (pose.position !== null) {\n      hand.position.fromArray(pose.position);\n    }\n    if (pose.orientation !== null) {\n      hand.quaternion.fromArray(pose.orientation);\n    }\n    hand.matrix.compose(hand.position, hand.quaternion, hand.scale);\n    hand.matrix.premultiply(standingMatrix);\n    hand.matrixWorldNeedsUpdate = true;\n\n    const menu = buttons[3] && buttons[3].pressed;\n    hand.buttons.menuDown = menu && hand.buttons.menu !== menu;\n    hand.buttons.menuUp = !menu && hand.buttons.menu !== menu;\n    hand.buttons.menu = menu;\n    const grip = buttons[2] && buttons[2].pressed;\n    hand.buttons.gripDown = grip && hand.buttons.grip !== grip;\n    hand.buttons.gripUp = !grip && hand.buttons.grip !== grip;\n    hand.buttons.grip = grip;\n    const pad = buttons[0] && buttons[0].pressed;\n    hand.buttons.padDown = pad && hand.buttons.pad !== pad;\n    hand.buttons.padUp = !pad && hand.buttons.pad !== pad;\n    hand.buttons.pad = pad;\n    const trigger = buttons[1] && buttons[1].pressed;\n    hand.buttons.triggerDown = trigger && hand.buttons.trigger !== trigger;\n    hand.buttons.triggerUp = !trigger && hand.buttons.trigger !== trigger;\n    hand.buttons.trigger = trigger;\n  }\n\n  static setupRaycaster({ hand, raycaster }) {\n    if (!hand.auxMatrix) {\n      hand.auxMatrix = new Matrix4();\n    }\n    const { auxMatrix, matrixWorld } = hand;\n    auxMatrix.identity().extractRotation(matrixWorld);\n    raycaster.ray.origin.setFromMatrixPosition(matrixWorld);\n    raycaster.ray.direction.set(0, 0, -1).applyMatrix4(auxMatrix);\n    raycaster.ray.origin.addScaledVector(raycaster.ray.direction, -0.175);\n  }\n\n  static setup() {\n    if (!Hands.geometry) {\n      const geometry = new BoxGeometry(1, 1, 1);\n      geometry.scale(0.05, 0.03, 0.2);\n      geometry.translate(0, 0, 0.075);\n      geometry.faces.forEach((face, i) => {\n        face.color.set(0x777777);\n        if (i >= 10 && i <= 11) {\n          face.color.offsetHSL(0, 0, -0.1);\n        }\n      });\n      Hands.geometry = (new BufferGeometry()).fromGeometry(geometry);\n    }\n    if (!Hands.material) {\n      Hands.material = new MeshBasicMaterial({\n        color: 0xffe0bd,\n        map: Noise,\n      });\n    }\n    if (!Hands.mesh) {\n      Hands.mesh = new Mesh(\n        Hands.geometry,\n        Hands.material\n      );\n    }\n    if (!Hands.pointerGeometry) {\n      Hands.pointerGeometry = (new BufferGeometry())\n        .setFromPoints([new Vector3(0, 0, 0), new Vector3(0, 0, -1)]);\n    }\n    if (!Hands.pointerMaterial) {\n      Hands.pointerMaterial = new LineBasicMaterial({\n        color: 0xffe0bd,\n      });\n    }\n    if (!Hands.pointerMesh) {\n      Hands.pointerMesh = new Line(\n        Hands.pointerGeometry,\n        Hands.pointerMaterial\n      );\n    }\n  }\n}\n\nexport default Hands;\n","import React, { Component } from 'react';\nimport Stats from 'stats.js';\nimport {\n  Clock,\n  FogExp2,\n  Object3D,\n  Raycaster,\n  Scene,\n  ShaderChunk,\n  WebGLRenderer,\n} from 'three';\nimport Camera from './camera';\nimport Hands from './hands';\n\nclass Renderer extends Component {\n  constructor(props) {\n    super(props);\n    this.canvas = React.createRef();\n    this.onAnimationTick = this.onAnimationTick.bind(this);\n    this.onResize = this.onResize.bind(this);\n  }\n\n  componentDidMount() {\n    const { canvas: { current: canvas } } = this;\n    this.isScreenshot = window.__SCREENSHOT__;\n    this.camera = new Camera({ canvas });\n    this.clock = new Clock();\n    this.fog = new FogExp2(0, 0.0125);\n    this.raycaster = new Raycaster();\n    const renderer = new WebGLRenderer({\n      antialias: true,\n      canvas,\n      powerPreference: 'high-performance',\n      stencil: false,\n    });\n    renderer.setPixelRatio(window.devicePixelRatio || 1);\n    renderer.setAnimationLoop(this.onAnimationTick);\n    window.addEventListener('resize', this.onResize, false);\n    this.renderer = renderer;\n    this.room = new Object3D();\n    this.room.add(this.camera);\n    this.hands = new Hands();\n    this.room.add(this.hands);\n    this.resetScene();\n    this.onResize();\n    this.setupVR();\n    if (!__PRODUCTION__ && !this.isScreenshot) {\n      this.stats = new Stats();\n      document.body.appendChild(this.stats.dom);\n    }\n  }\n\n  shouldComponentUpdate() {\n    return false;\n  }\n\n  onAnimationTick() {\n    const {\n      camera,\n      clock,\n      hands,\n      renderer,\n      scene,\n      stats,\n    } = this;\n    if (stats) stats.begin();\n    renderer.animation = {\n      delta: clock.getDelta(),\n      time: clock.oldTime / 1000,\n    };\n    camera.onAnimationTick(renderer.animation);\n    hands.update();\n    renderer.render(scene, camera);\n    if (stats) stats.end();\n  }\n\n  onResize() {\n    const {\n      canvas: { current: canvas },\n      camera,\n      renderer,\n    } = this;\n    const { width, height } = canvas.parentNode.getBoundingClientRect();\n    this.width = width;\n    this.height = height;\n    if (!renderer.vr.isPresenting()) {\n      renderer.setSize(width, height);\n    }\n    camera.aspect = width / height;\n    camera.updateProjectionMatrix();\n  }\n\n  getMaxAnisotropy() {\n    const { renderer } = this;\n    return renderer.capabilities.getMaxAnisotropy();\n  }\n\n  setFog(color) {\n    const { fog, renderer } = this;\n    fog.color.setHex(color);\n    renderer.setClearColor(fog.color);\n  }\n\n  setupVR() {\n    const { hands, renderer } = this;\n    // const hasWebXR = 'xr' in navigator;\n    const hasWebVR = 'getVRDisplays' in navigator;\n    // if (hasWebXR) {\n    //   // TODO:\n    //   // Verify that this actually works\n    //   const enterVR = () => {\n    //     if (renderer.vr.isPresenting()) return;\n    //     const display = renderer.vr.getDevice();\n    //     if (!display) {\n    //       navigator.xr.requestDevice().then((display) => {\n    //         renderer.vr.enabled = true;\n    //         renderer.vr.setDevice(display);\n    //       });\n    //       return;\n    //     }\n    //     display\n    //       .requestSession({ immersive: true, exclusive: true /* DEPRECATED */ })\n    //       .then((session) => {\n    //         renderer.vr.setSession(session, { frameOfReferenceType: 'stage' });\n    //       });\n    //   };\n    //   window.addEventListener('mousedown', enterVR, false);\n    //   enterVR();\n    // } else if (hasWebVR) {\n    if (hasWebVR) {\n      const enterVR = () => {\n        if (renderer.vr.isPresenting()) return;\n        const display = renderer.vr.getDevice();\n        if (!display) {\n          navigator.getVRDisplays().then((displays) => {\n            if (!displays.length) return;\n            const [display] = displays;\n            renderer.vr.enabled = true;\n            renderer.vr.setDevice(display);\n          });\n          return;\n        }\n        display.requestPresent([{ source: renderer.domElement }]);\n      };\n      window.addEventListener('mousedown', enterVR, false);\n      window.addEventListener('vrdisplayactivate', enterVR, false);\n      enterVR();\n    }\n    hands.standingMatrix = renderer.vr.getStandingMatrix();\n  }\n\n  resetScene() {\n    if (this.scene) {\n      this.scene.children.forEach((child) => {\n        if (child.dispose) child.dispose();\n      });\n    }\n    this.room.position.set(0, 0, 0);\n    this.camera.reset();\n    this.setFog(0x020214);\n    this.scene = new Scene();\n    this.scene.add(this.room);\n    this.scene.fog = this.fog;\n    return this.scene;\n  }\n\n  render() {\n    const { canvas } = this;\n    return (\n      <canvas ref={canvas} />\n    );\n  }\n}\n\n// Tweak ThreeJS Fog\nShaderChunk.fog_vertex = ShaderChunk.fog_vertex.replace(\n  'fogDepth = -mvPosition.z;',\n  'fogDepth = length(mvPosition);'\n);\n\nexport default Renderer;\n","import diff from 'deep-diff';\nimport { recursive as merge } from 'merge';\nimport { loadTranslations, setLocale, syncTranslationWithStore } from 'react-redux-i18n';\nimport en from './en';\nimport es from './es';\n\nconst locales = {\n  en,\n  es,\n};\nconst availableLocales = Object.keys(locales);\nconst defaultLocale = 'en';\n\n// Populate locales with default literals\nconst translations = {};\navailableLocales.forEach((locale) => {\n  translations[locale] = merge(true, locales[defaultLocale], locales[locale]);\n});\n\n// Translations loader handler (for hot-reloading)\nexport const load = (store) => {\n  store.dispatch(loadTranslations(translations));\n};\n\nexport default (store) => {\n  // Locale Autodetection\n  const storedLocale = localStorage.getItem('REALMSVR::LOCALE');\n  const browserLocale = (\n    (window.navigator.languages ? window.navigator.languages[0] : null)\n    || window.navigator.language\n    || window.navigator.browserLanguage\n    || window.navigator.userLanguage\n    || defaultLocale\n  ).substr(0, 2).toLowerCase();\n\n  let locale = defaultLocale;\n  if (~availableLocales.indexOf(storedLocale)) locale = storedLocale;\n  else if (~availableLocales.indexOf(browserLocale)) locale = browserLocale;\n\n  // Setup react-i18nify\n  syncTranslationWithStore(store);\n  load(store);\n  store.dispatch(setLocale(locale));\n\n  if (!__PRODUCTION__) {\n    // Warn about missing translations\n    const missing = availableLocales\n      .reduce((missing, locale) => {\n        if (locale === defaultLocale) {\n          return missing;\n        }\n        const keys = diff(locales[defaultLocale], locales[locale])\n          .reduce((missing, { kind, path }) => {\n            if (kind === 'E') {\n              return missing;\n            }\n            return [\n              ...missing,\n              path.join('.'),\n            ];\n          }, []);\n        if (!keys.length) {\n          return missing;\n        }\n        return [\n          ...missing,\n          `\\nMissing translations for \"${locale.toUpperCase()}\" locale:`,\n          ...keys,\n        ];\n      }, []);\n    if (missing.length) {\n      console.warn(missing.join('\\n'));\n    }\n  }\n};\n","export default {\n  Realm: {\n    editMetadata: 'Edit metadata',\n    name: 'Name',\n    save: 'Save',\n  },\n  User: {\n    confirmPassword: 'Confirm password',\n    email: 'Email',\n    name: 'Name',\n    signIn: 'Sign-In',\n    signInWithGoogle: 'Sign-In with Google',\n    signOut: 'Sign-Out',\n    password: 'Password',\n    register: 'Create an account',\n  },\n};\n","export default {\n  Realm: {\n    editMetadata: 'Editar metadatos',\n    name: 'Nombre',\n    save: 'Guardar',\n  },\n  User: {\n    confirmPassword: 'Confirmar contrasea',\n    email: 'Email',\n    name: 'Nombre',\n    signIn: 'Iniciar sesin',\n    signInWithGoogle: 'Iniciar sesin con Google',\n    signOut: 'Cerrar sesin',\n    password: 'Contrasea',\n    register: 'Crear una cuenta',\n  },\n};\n","import { combineReducers } from 'redux';\nimport * as types from '@/actions/types';\n\nconst filter = (\n  state = 'popular',\n  action\n) => {\n  switch (action.type) {\n    case types.LOBBY_SET_FILTER:\n      return action.payload.value;\n    default:\n      return state;\n  }\n};\n\nconst hasLoaded = (\n  state = false,\n  action\n) => {\n  switch (action.type) {\n    case types.LOBBY_FETCH_REALMS_FULFILLED:\n      return true;\n    case types.REALM_CREATE_FULFILLED:\n      return false;\n    default:\n      return state;\n  }\n};\n\nconst pagination = (\n  state = {\n    page: 0,\n    pages: 0,\n  },\n  action\n) => {\n  switch (action.type) {\n    case types.LOBBY_FETCH_REALMS_FULFILLED:\n      return {\n        ...state,\n        pages: action.payload.pages,\n      };\n    case types.LOBBY_SET_FILTER:\n      return {\n        ...state,\n        page: 0,\n      };\n    case types.LOBBY_SET_PAGE:\n      return {\n        ...state,\n        page: action.payload.value,\n      };\n    default:\n      return state;\n  }\n};\n\nconst realms = (\n  state = [],\n  action\n) => {\n  switch (action.type) {\n    case types.LOBBY_FETCH_REALMS_FULFILLED:\n      return action.payload.realms;\n    default:\n      return state;\n  }\n};\n\nconst lobbyReducer = combineReducers({\n  filter,\n  hasLoaded,\n  pagination,\n  realms,\n});\n\nexport default lobbyReducer;\n","import { combineReducers } from 'redux';\nimport * as types from '@/actions/types';\n\nconst geometry = (\n  state = {},\n  action\n) => {\n  switch (action.type) {\n    case types.REALM_UPDATE_GEOMETRY_FULFILLED:\n      return action.payload;\n    case types.REALM_RESET:\n      return {};\n    default:\n      return state;\n  }\n};\n\nconst fog = (\n  state = 0x020214,\n  action\n) => {\n  switch (action.type) {\n    case types.REALM_FETCH_FULFILLED:\n    case types.REALM_UPDATE_FOG:\n      return action.payload.fog;\n    case types.REALM_RESET:\n      return 0x020214;\n    default:\n      return state;\n  }\n};\n\nconst id = (\n  state = '',\n  action\n) => {\n  switch (action.type) {\n    case types.REALM_FETCH_FULFILLED:\n      return action.payload._id;\n    case types.REALM_RESET:\n      return '';\n    default:\n      return state;\n  }\n};\n\nconst isCreator = (\n  state = false,\n  action\n) => {\n  switch (action.type) {\n    case types.REALM_FETCH_FULFILLED:\n      return !!action.payload.isCreator;\n    case types.REALM_RESET:\n      return false;\n    default:\n      return state;\n  }\n};\n\nconst isEditingMetadata = (\n  state = false,\n  action\n) => {\n  switch (action.type) {\n    case types.REALM_SHOW_METADATA_POPUP:\n      return true;\n    case types.REALM_HIDE_METADATA_POPUP:\n    case types.REALM_RESET:\n    case types.REALM_UPDATE_METADATA_FULFILLED:\n      return false;\n    default:\n      return state;\n  }\n};\n\nconst name = (\n  state = '',\n  action\n) => {\n  switch (action.type) {\n    case types.REALM_FETCH_FULFILLED:\n      return action.payload.name;\n    case types.REALM_RESET:\n      return '';\n    default:\n      return state;\n  }\n};\n\nconst size = (\n  state = 0,\n  action\n) => {\n  switch (action.type) {\n    case types.REALM_FETCH_FULFILLED:\n      return action.payload.size;\n    case types.REALM_RESET:\n      return 0;\n    default:\n      return state;\n  }\n};\n\nconst voxels = (\n  state = new Uint32Array(),\n  action\n) => {\n  switch (action.type) {\n    case types.REALM_FETCH_FULFILLED:\n    case types.REALM_UPDATE_VOXELS:\n      return action.payload.voxels;\n    case types.REALM_RESET:\n      return new Uint32Array();\n    default:\n      return state;\n  }\n};\n\nconst realmReducer = combineReducers({\n  geometry,\n  fog,\n  id,\n  isCreator,\n  isEditingMetadata,\n  name,\n  size,\n  voxels,\n});\n\nexport default realmReducer;\n","import { combineReducers } from 'redux';\nimport * as types from '@/actions/types';\nimport API from '@/services/api';\n\nconst sessionKey = 'REALMSVR::SESSION';\nconst storedSession = JSON.parse(\n  localStorage.getItem(sessionKey) || 'false'\n);\nif (storedSession) {\n  API.setAuthorization(storedSession.token);\n}\n\nconst isAuth = (\n  state = !!storedSession,\n  action\n) => {\n  switch (action.type) {\n    case types.USER_REFRESH_SESSION_FULFILLED:\n    case types.USER_LOGIN_FULFILLED:\n    case types.USER_REGISTER_FULFILLED:\n      return true;\n    case types.USER_REFRESH_SESSION_REJECTED:\n    case types.USER_SIGNOUT:\n      return false;\n    default:\n      return state;\n  }\n};\n\nconst isSigningIn = (\n  state = false,\n  action\n) => {\n  switch (action.type) {\n    case types.USER_SHOW_SESSION_POPUP:\n      return true;\n    case types.USER_LOGIN_FULFILLED:\n    case types.USER_HIDE_SESSION_POPUP:\n    case types.USER_REGISTER_FULFILLED:\n      return false;\n    default:\n      return state;\n  }\n};\n\nconst profile = (\n  state = storedSession ? storedSession.profile : {},\n  action\n) => {\n  switch (action.type) {\n    case types.USER_REFRESH_SESSION_FULFILLED:\n    case types.USER_LOGIN_FULFILLED:\n    case types.USER_REGISTER_FULFILLED: {\n      const { profile } = action.payload;\n      const { name } = profile;\n      return {\n        ...profile,\n        firstName: name.split(' ')[0],\n      };\n    }\n    case types.USER_REFRESH_SESSION_REJECTED:\n    case types.USER_SIGNOUT:\n      return {};\n    default:\n      return state;\n  }\n};\n\nconst token = (\n  state = storedSession ? storedSession.token : {},\n  action\n) => {\n  switch (action.type) {\n    case types.USER_REFRESH_SESSION_FULFILLED:\n    case types.USER_LOGIN_FULFILLED:\n    case types.USER_REGISTER_FULFILLED:\n      API.setAuthorization(action.payload.token);\n      localStorage.setItem(sessionKey, JSON.stringify(action.payload));\n      return action.payload.token;\n    case types.USER_REFRESH_SESSION_REJECTED:\n    case types.USER_SIGNOUT:\n      API.setAuthorization(false);\n      localStorage.removeItem(sessionKey);\n      return '';\n    default:\n      return state;\n  }\n};\n\nconst userReducer = combineReducers({\n  isAuth,\n  isSigningIn,\n  profile,\n  token,\n});\n\nexport default userReducer;\n","import { combineReducers } from 'redux';\nimport { i18nReducer as i18n } from 'react-redux-i18n';\nimport { loadingBarReducer as loadingBar } from 'react-redux-loading-bar';\nimport lobby from './lobby';\nimport realm from './realm';\nimport user from './user';\n\nconst rootReducer = combineReducers({\n  i18n,\n  loadingBar,\n  lobby,\n  realm,\n  user,\n});\n\nexport default rootReducer;\n","import React from 'react';\nimport styled from 'styled-components';\n\nconst Link = styled.a`\n  position: absolute;\n  bottom: 0;\n  right: 0;\n`;\n\nconst Discord = () => (\n  <Link\n    href=\"https://discord.gg/9KyFbe8\"\n    rel=\"noopener noreferrer\"\n    target=\"_blank\"\n  >\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"80\"\n      height=\"80\"\n      viewBox=\"0 0 245 240\"\n      fill=\"#fff\"\n    >\n      <path\n        d=\"M104.4 103.9c-5.7 0-10.2 5-10.2 11.1s4.6 11.1 10.2 11.1c5.7 0 10.2-5 10.2-11.1.1-6.1-4.5-11.1-10.2-11.1zM140.9 103.9c-5.7 0-10.2 5-10.2 11.1s4.6 11.1 10.2 11.1c5.7 0 10.2-5 10.2-11.1s-4.5-11.1-10.2-11.1z\"\n      />\n      <path\n        d=\"M189.5 20h-134C44.2 20 35 29.2 35 40.6v135.2c0 11.4 9.2 20.6 20.5 20.6h113.4l-5.3-18.5 12.8 11.9 12.1 11.2 21.5 19V40.6c0-11.4-9.2-20.6-20.5-20.6zm-38.6 130.6s-3.6-4.3-6.6-8.1c13.1-3.7 18.1-11.9 18.1-11.9-4.1 2.7-8 4.6-11.5 5.9-5 2.1-9.8 3.5-14.5 4.3-9.6 1.8-18.4 1.3-25.9-.1-5.7-1.1-10.6-2.7-14.7-4.3-2.3-.9-4.8-2-7.3-3.4-.3-.2-.6-.3-.9-.5-.2-.1-.3-.2-.4-.3-1.8-1-2.8-1.7-2.8-1.7s4.8 8 17.5 11.8c-3 3.8-6.7 8.3-6.7 8.3-22.1-.7-30.5-15.2-30.5-15.2 0-32.2 14.4-58.3 14.4-58.3 14.4-10.8 28.1-10.5 28.1-10.5l1 1.2c-18 5.2-26.3 13.1-26.3 13.1s2.2-1.2 5.9-2.9c10.7-4.7 19.2-6 22.7-6.3.6-.1 1.1-.2 1.7-.2 6.1-.8 13-1 20.2-.2 9.5 1.1 19.7 3.9 30.1 9.6 0 0-7.9-7.5-24.9-12.7l1.4-1.6s13.7-.3 28.1 10.5c0 0 14.4 26.1 14.4 58.3 0 0-8.5 14.5-30.6 15.2z\"\n      />\n    </svg>\n  </Link>\n);\n\nexport default Discord;\n","import React from 'react';\nimport styled from 'styled-components';\n\nconst Link = styled.a`\n  position: absolute;\n  top: 0;\n  right: 0;\n  .octo-arm {\n    transform-origin: 130px 106px;\n  }\n  &:hover .octo-arm {\n    animation: octocat-wave 560ms ease-in-out;\n  }\n  @keyframes octocat-wave {\n    0% {\n      transform: rotate(0deg);\n    }\n    20% {\n      transform: rotate(-25deg);\n    }\n    40% {\n      transform: rotate(10deg);\n    }\n    60% {\n      transform: rotate(-25deg);\n    }\n    80% {\n      transform: rotate(10deg);\n    }\n    100% {\n      transform: rotate(0deg);\n    }\n  }\n`;\n\nconst GitHub = () => (\n  <Link\n    href=\"https://github.com/danielesteban/RealmsVR#readme\"\n    rel=\"noopener noreferrer\"\n    target=\"_blank\"\n  >\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"80\"\n      height=\"80\"\n      viewBox=\"0 0 250 250\"\n      fill=\"#fff\"\n    >\n      <path\n        d=\"M0 0l115 115h15l12 27 108 108V0z\"\n        fill=\"#000\"\n      />\n      <path\n        className=\"octo-arm\"\n        d=\"M128 109c-15-9-9-19-9-19 3-7 2-11 2-11-1-7 3-2 3-2 4 5 2 11 2 11-3 10 5 15 9 16\"\n      />\n      <path\n        className=\"octo-body\"\n        d=\"M115 115s4 2 5 0l14-14c3-2 6-3 8-3-8-11-15-24 2-41 5-5 10-7 16-7 1-2 3-7 12-11 0 0 5 3 7 16 4 2 8 5 12 9s7 8 9 12c14 3 17 7 17 7-4 8-9 11-11 11 0 6-2 11-7 16-16 16-30 10-41 2 0 3-1 7-5 11l-12 11c-1 1 1 5 1 5z\"\n      />\n    </svg>\n  </Link>\n);\n\nexport default GitHub;\n","import PropTypes from 'prop-types';\nimport React, { PureComponent } from 'react';\nimport {\n  TiMediaFastForward,\n  TiMediaPause,\n  TiMediaPlay,\n} from 'react-icons/ti';\nimport styled from 'styled-components';\n\nconst Wrapper = styled.div`\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  display: flex;\n  align-items: flex-end;\n  box-shadow: 0 0 8px rgba(0, 0, 0, .4);\n  > a > img {\n    width: 100px;\n    height: 100px;\n    background: #000;\n    border: 0;\n    outline: none;\n    vertical-align: middle;\n  }\n  > div {\n    box-sizing: border-box;\n    width: 220px;\n    height: 100px;\n    background: rgba(0, 0, 0, .5);\n    padding: 0.5rem 1rem;\n    border-radius: 0 4px 0 0;\n    > a {\n      display: block;\n      text-decoration: none;\n      outline: none;\n      font-size: 1.25em;\n      line-height: 1.5em;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      overflow: hidden;\n      &:hover {\n        text-decoration: underline;\n      }\n    }\n    > a:nth-child(1) {\n      color: #eee;\n    }\n    > a:nth-child(2) {\n      color: #aaa;\n    }\n  }\n`;\n\nconst Progress = styled.div`\n  height: 3px;\n  margin: 0.5rem 0;\n  background-color: #333;\n  border-radius: 2px;\n  overflow: hidden;\n  > div {\n    height: 100%;\n    background-color: #393;\n  }\n`;\n\nconst Controls = styled.div`\n  display: flex;\n  align-items: center;\n  > button {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color: #333;\n    border: 1px solid #111;\n    color: #fff;\n    font-family: inherit;\n    font-size: inherit;\n    font-weight: inherit;\n    padding: 0.25rem 0;\n    width: 2.5rem;\n    border-radius: 2px;\n    margin-right: 0.125rem;\n    cursor: pointer;\n    outline: none;\n  }\n  > span {\n    margin-left: auto;\n  }\n`;\n\nconst MAX_UINT32 = (2 ** 32) - 1;\nconst aux = new Uint32Array(1);\nconst getRandomValue = (ceiling) => Math.floor(\n  (\n    window.crypto && window.crypto.getRandomValues ? (\n      window.crypto.getRandomValues(aux)[0] / MAX_UINT32\n    ) : (\n      Math.random()\n    )\n  )\n  * ceiling\n);\n\nclass Music extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.next = this.next.bind(this);\n    this.toggle = this.toggle.bind(this);\n    // Shuffle tracks\n    const tracks = [...Music.tracks];\n    for (let index = tracks.length - 1; index >= 0; index -= 1) {\n      const random = getRandomValue(index + 1);\n      const temp = tracks[index];\n      tracks[index] = tracks[random];\n      tracks[random] = temp;\n    }\n    // Initialize state\n    this.player = document.createElement('audio');\n    this.player.crossOrigin = 'anonymous';\n    this.player.ontimeupdate = this.onTimeUpdate.bind(this);\n    this.player.onended = this.next;\n    this.player.volume = 0.5;\n    this.state = {\n      isPlaying: false,\n      playhead: 0,\n      time: '0:00',\n      track: undefined,\n    };\n    this.track = 0;\n    this.tracks = tracks;\n  }\n\n  componentDidMount() {\n    this.waitForFirstInteraction();\n  }\n\n  onTimeUpdate() {\n    const { player } = this;\n    const min = Math.floor(player.currentTime / 60);\n    const sec = Math.floor(player.currentTime % 60);\n    this.setState({\n      playhead: player.currentTime / player.duration,\n      time: `${min}:${sec < 10 ? '0' : ''}${sec}`,\n    });\n  }\n\n  waitForFirstInteraction() {\n    const first = () => {\n      window.removeEventListener('mousedown', first);\n      window.removeEventListener('touchstart', first);\n      window.removeEventListener('vrdisplayactivate', first);\n      this.play();\n    };\n    window.addEventListener('mousedown', first, false);\n    window.addEventListener('touchstart', first, false);\n    window.addEventListener('vrdisplayactivate', first, false);\n  }\n\n  next() {\n    const { player, tracks } = this;\n    // Stop current player\n    if (!player.paused) {\n      player.pause();\n    }\n    player.src = '';\n    // Loop through the track list\n    this.track = (this.track + 1) % tracks.length;\n    this.play();\n  }\n\n  play() {\n    const {\n      player,\n      track,\n      tracks,\n    } = this;\n    // Fetch the current track\n    const clientId = 'client_id=eb5fcff9e107aab508431b4c3c416415';\n    const id = tracks[track];\n    if (!__PRODUCTION__) {\n      console.log(`playing: ${id}`);\n    }\n    fetch(`https://api.soundcloud.com/tracks/${id}?format=json&${clientId}`)\n      .then((res) => {\n        if (res.status !== 200) {\n          throw new Error(`Couldn't fetch track: ${id}`);\n        }\n        return res.json();\n      })\n      .then((track) => {\n        // Cleanup track title\n        const userOnTitle = `${track.user.username} - `;\n        if (track.title.indexOf(userOnTitle) === 0) {\n          track.title = track.title.substr(userOnTitle.length);\n        }\n        // Play the track\n        player.src = `${track.stream_url}?${clientId}`;\n        player.play();\n        this.setState({\n          isPlaying: true,\n          playhead: 0,\n          time: '0:00',\n          track,\n        });\n      })\n      .catch(() => (\n        this.next()\n      ));\n  }\n\n  toggle() {\n    const { player } = this;\n    if (player.paused) {\n      player.play();\n    } else {\n      player.pause();\n    }\n    this.setState({ isPlaying: !player.paused });\n  }\n\n  render() {\n    const { renderUI } = this.props;\n    const {\n      isPlaying,\n      playhead,\n      time,\n      track,\n    } = this.state;\n    if (!track || !renderUI) {\n      return null;\n    }\n    const {\n      title,\n      artwork_url: artwork,\n      permalink_url: link,\n      user: { username, permalink_url: userlink },\n      waveform_url: waveform,\n    } = track;\n    return (\n      <Wrapper>\n        <a\n          href={link}\n          rel=\"noopener noreferrer\"\n          target=\"_blank\"\n        >\n          <img alt={title} src={artwork || waveform} />\n        </a>\n        <div>\n          <a\n            href={link}\n            rel=\"noopener noreferrer\"\n            target=\"_blank\"\n          >\n            {title}\n          </a>\n          <a\n            href={userlink}\n            rel=\"noopener noreferrer\"\n            target=\"_blank\"\n          >\n            {username}\n          </a>\n          <Progress>\n            <div style={{ width: `${playhead * 100}%` }} />\n          </Progress>\n          <Controls>\n            <button\n              type=\"button\"\n              onClick={this.toggle}\n            >\n              {isPlaying ? <TiMediaPause /> : <TiMediaPlay />}\n            </button>\n            <button\n              type=\"button\"\n              onClick={this.next}\n            >\n              <TiMediaFastForward />\n            </button>\n            <span>\n              { time }\n            </span>\n          </Controls>\n        </div>\n      </Wrapper>\n    );\n  }\n}\n\nMusic.defaultProps = {\n  renderUI: true,\n};\n\nMusic.propTypes = {\n  renderUI: PropTypes.bool,\n};\n\n/* eslint-disable */\nMusic.tracks = [\n  334831124,3654595,3654647,62965282,55529274,40801532,28921242,58102473,44049414,584470,348172961,348172759,118227213,58103033,58102746,29062473,73664676,217254339,26016069,143994169,34751566,22899851,19645145,14604316,14604145,9747273,290203217,290202627,290203029,290203125,230280393,230280565,230280839,290202890,230280665,230280740,174033188,238809205,219872323,85441920,85442027,85442324,85442658,295429557,31232642,118720768,66345578,64979755,9747680,3654444,354826097,174209343,374346584,374346578,374346566,374346536,374346518,374346506,374346440,272272960,82537981,272272962,331110005,253646536,69972925,297108748,95089740,264157290,3654394,51204969,28460870,270165801,93513660,107137565,200476847,241036508,345846433,13728685,3193491,235796705,74366070,293115267,65027631,226460783,132730188,267647225,331743020,348075711,328602395,232135696,13385987,303726380,\n  319470292,312179497,300022056,212600702,336206149,319100206,299965683,308768675,202903037,220992150,221433894,223843476,155626389,155626391,306589305,304501298,305600086,300328640,283863336,283863306,260674048,117308221,78683752,340317786,277352612,226847547,220656015,224154466,240254433,249957904,260419888,250754945,235013168,336784751,277029337,229288316,343272434,343194325,334599482,343032721,343661072,343552665,344563095,285122161,1687603,286269026,340681124,265119655,345756307,351035779,350060806,352308515,353896778,353896991,353896595,355550264,360321368,337715872,272189608,43751468,65190792,200959753,347608134,133531982,183519916,185401372,42227482,376984973,372830927,376671563,376317227,342538038,338288083,338266624,265353084,159115092,122088683,85356706,69351024,18159187,28667337,169274681,221402560,402032439,401604759,416088969,424864200,424881921,426294102,430158741,441378576,440982825,438854664,451627668,285022424,416942091,289481139,236661381,289727425,302903905,284737661,275642447,291943120,284052253,228088399,209533328,90164812,43727131,175757015,\n];\n/* eslint-enable */\n\nexport default Music;\n","import PropTypes from 'prop-types';\nimport React, { PureComponent } from 'react';\nimport {\n  TiKey,\n  TiSocialGooglePlusCircular,\n} from 'react-icons/ti';\nimport { connect } from 'react-redux';\nimport { Translate } from 'react-redux-i18n';\nimport styled from 'styled-components';\nimport Popup from '@/components/popup';\nimport {\n  hideSessionPopup as hide,\n  login,\n  loginWithGoogle,\n  register,\n} from '@/actions/user';\n\nconst Tabs = styled.div`\n  display: flex;\n  height: 100%;\n  > a {\n    display: flex;\n    align-items: center;\n    background: #222;\n    padding: 0 1rem;\n    border-left: 1px solid #333;\n    cursor: pointer;\n    &:first-child {\n      border-left: none;\n    }\n    &.active {\n      background: #444;\n      cursor: default;\n    }\n  }\n`;\n\nconst Content = styled.div`\n  .google {\n    display: flex;\n    justify-content: center;\n  }\n  .or {\n    position: relative;\n    width: 100%;\n    border-top: 1px solid #222;\n    margin: 2rem 0;\n    > span {\n      position: absolute;\n      display: block;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n  }\n  button {\n    display: flex;\n    align-items: center;\n    border: 1px solid #555;\n    background: #222;\n    padding: 0.5rem 1rem;\n    margin: 0;\n    font-family: inherit;\n    font-weight: 700;\n    font-size: 1.2rem;\n    color: inherit;\n    cursor: pointer;\n    outline: 0;\n    > svg {\n      font-size: 1.5em;\n      margin-right: 0.5rem;\n    }\n  }\n`;\n\nconst Form = styled.form`\n  display: none;\n  flex-direction: column;\n  align-items: center;\n  width: 80%;\n  &.active {\n    display: flex;\n  }\n  > label {\n    width: 100%;\n    padding: 0;\n  }\n  > input {\n    box-sizing: border-box;\n    border: 1px solid #333;\n    width: 100%;\n    background: #222;\n    color: inherit;\n    font-family: inherit;\n    font-weight: 400;\n    font-size: 2em;\n    padding: 0.5rem;\n    margin: 0 0 1rem;\n  }\n`;\n\nclass Session extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.onLoginSubmit = this.onLoginSubmit.bind(this);\n    this.onRegisterSubmit = this.onRegisterSubmit.bind(this);\n    this.state = { tab: 'login' };\n  }\n\n  // eslint-disable-next-line camelcase\n  UNSAFE_componentWillReceiveProps({ isSigningIn }) {\n    const { isSigningIn: wasSigningIn } = this.props;\n    if (isSigningIn && !wasSigningIn) {\n      this.setState({ tab: 'login' });\n    }\n  }\n\n  onLoginSubmit(e) {\n    e.preventDefault();\n    const { target: form } = e;\n    const { login } = this.props;\n    login({\n      email: form.email.value,\n      password: form.password.value,\n    });\n  }\n\n  onRegisterSubmit(e) {\n    e.preventDefault();\n    const { target: form } = e;\n    const { register } = this.props;\n    if (form.password.value !== form.confirmPassword.value) {\n      return;\n    }\n    register({\n      email: form.email.value,\n      name: form.name.value,\n      password: form.password.value,\n    });\n  }\n\n  render() {\n    const {\n      isSigningIn,\n      hide,\n      loginWithGoogle,\n    } = this.props;\n    const { tab } = this.state;\n    const tabs = (\n      <Tabs>\n        <a\n          className={tab === 'login' ? 'active' : null}\n          onClick={() => this.setState({ tab: 'login' })}\n        >\n          <Translate value=\"User.signIn\" />\n        </a>\n        <a\n          className={tab === 'register' ? 'active' : null}\n          onClick={() => this.setState({ tab: 'register' })}\n        >\n          <Translate value=\"User.register\" />\n        </a>\n      </Tabs>\n    );\n    return (\n      <Popup\n        heading={tabs}\n        isShowing={isSigningIn}\n        hide={hide}\n      >\n        <Content>\n          <Form\n            className={tab === 'login' ? 'active' : null}\n            onSubmit={this.onLoginSubmit}\n          >\n            <label><Translate value=\"User.email\" /></label>\n            <input type=\"email\" name=\"email\" required />\n            <label><Translate value=\"User.password\" /></label>\n            <input type=\"password\" name=\"password\" required />\n            <button\n              type=\"submit\"\n            >\n              <TiKey />\n              <Translate value=\"User.signIn\" />\n            </button>\n          </Form>\n          <Form\n            className={tab === 'register' ? 'active' : null}\n            onSubmit={this.onRegisterSubmit}\n          >\n            <label><Translate value=\"User.name\" /></label>\n            <input type=\"text\" name=\"name\" required />\n            <label><Translate value=\"User.email\" /></label>\n            <input type=\"email\" name=\"email\" required />\n            <label><Translate value=\"User.password\" /></label>\n            <input type=\"password\" name=\"password\" required />\n            <label><Translate value=\"User.confirmPassword\" /></label>\n            <input type=\"password\" name=\"confirmPassword\" required />\n            <button\n              type=\"submit\"\n            >\n              <TiKey />\n              <Translate value=\"User.register\" />\n            </button>\n          </Form>\n          <div className=\"or\">\n            <Translate value=\"User.or\" />\n          </div>\n          <div className=\"google\">\n            <button\n              onClick={loginWithGoogle}\n              type=\"button\"\n            >\n              <TiSocialGooglePlusCircular />\n              <Translate value=\"User.signInWithGoogle\" />\n            </button>\n          </div>\n        </Content>\n      </Popup>\n    );\n  }\n}\n\nSession.propTypes = {\n  isSigningIn: PropTypes.bool.isRequired,\n  hide: PropTypes.func.isRequired,\n  login: PropTypes.func.isRequired,\n  loginWithGoogle: PropTypes.func.isRequired,\n  register: PropTypes.func.isRequired,\n};\n\nexport default connect(\n  ({\n    user: {\n      isSigningIn,\n    },\n  }) => ({\n    isSigningIn,\n  }),\n  {\n    hide,\n    login,\n    loginWithGoogle,\n    register,\n  }\n)(Session);\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { Route, Redirect, Switch } from 'react-router-dom';\nimport Renderer from '@/components/renderer';\nimport Lobby from './lobby';\nimport Realm from './realm';\n\nconst Scenes = ({ renderer }) => (\n  <Switch>\n    {[\n      { path: '/', Component: Lobby },\n      { path: '/:slug', Component: Realm },\n    ].map(({ path, Component }) => (\n      <Route\n        exact\n        key={path}\n        path={path}\n        render={(props) => (\n          <Component {...props} renderer={renderer} />\n        )}\n      />\n    ))}\n    <Redirect to=\"/\" />\n  </Switch>\n);\n\nScenes.propTypes = {\n  renderer: PropTypes.shape({\n    current: PropTypes.instanceOf(Renderer),\n  }).isRequired,\n};\n\nexport default Scenes;\n","import React, { PureComponent } from 'react';\nimport { hot } from 'react-hot-loader';\nimport LoadingBar from 'react-redux-loading-bar';\nimport styled from 'styled-components';\nimport Discord from '@/components/discord';\nimport Github from '@/components/github';\nimport Music from '@/components/music';\nimport Renderer from '@/components/renderer';\nimport Session from '@/components/session';\nimport Scenes from '@/scenes';\n\nconst Wrapper = styled.div`\n  width: 100vw;\n  height: 100vh;\n`;\n\nconst loadingBarStyle = {\n  backgroundColor: '#393',\n  zIndex: 1,\n};\n\nclass Layout extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.renderer = React.createRef();\n  }\n\n  render() {\n    const { renderer } = this;\n    const isScreenshot = window.__SCREENSHOT__;\n    return (\n      <div>\n        <LoadingBar style={loadingBarStyle} />\n        <Wrapper>\n          <Renderer ref={renderer} />\n        </Wrapper>\n        <Scenes renderer={renderer} />\n        <Music />\n        {!isScreenshot ? (\n          <div>\n            <Discord />\n            <Github />\n          </div>\n        ) : null}\n        <Session />\n      </div>\n    );\n  }\n}\n\nexport default hot(module)(Layout);\n","import React, { PureComponent } from 'react';\nimport { hot } from 'react-hot-loader';\nimport Music from '@/components/music';\nimport Renderer from '@/components/renderer';\nimport Scenes from '@/scenes';\n\nclass Layout extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.renderer = React.createRef();\n  }\n\n  render() {\n    const { renderer } = this;\n    return (\n      <div>\n        <Renderer ref={renderer} />\n        <Scenes renderer={renderer} />\n        <Music renderUI={false} />\n      </div>\n    );\n  }\n}\n\nexport default hot(module)(Layout);\n","import { createBrowserHistory } from 'history';\nimport React from 'react';\nimport { render } from 'react-dom';\nimport { applyMiddleware, createStore, compose as productionCompose } from 'redux';\nimport promiseMiddleware from 'redux-promise-middleware';\nimport { Provider } from 'react-redux';\nimport { loadingBarMiddleware } from 'react-redux-loading-bar';\nimport { Router } from 'react-router-dom';\nimport thunkMiddleware from 'redux-thunk';\nimport { refreshSession } from '@/actions/user';\nimport syncTranslationWithStore, { load as reloadLocales } from '@/locales';\nimport rootReducer from '@/reducers';\nimport getLayoutComponent from '@/layout';\n\n// Create Redux Store\nconst devCompose = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;\nconst compose = !__PRODUCTION__ && devCompose ? devCompose : productionCompose;\nconst store = createStore(\n  rootReducer,\n  {},\n  compose(\n    applyMiddleware(thunkMiddleware, promiseMiddleware, loadingBarMiddleware())\n  )\n);\nsyncTranslationWithStore(store);\n\n// Revive session from localStorage\nif (store.getState().user.isAuth) {\n  store.dispatch(refreshSession());\n}\n\n// Create router history\nconst history = createBrowserHistory({\n  basename: __BASENAME__,\n});\n\n// Support initial hash route from the ghpages-spa-webpack-plugin\nif (window.location.hash) {\n  history.replace(`/${window.location.hash.substr(2)}`);\n}\n\n// Track pageviews\nif (__ANALYTICS__ && __PRODUCTION__) {\n  window.GoogleAnalyticsObject = 'ga';\n  window.ga = function ga() {\n    if (!window.ga.q) window.ga.q = [];\n    // eslint-disable-next-line prefer-rest-params\n    window.ga.q.push(arguments);\n  };\n  window.ga.l = (new Date()) * 1;\n  window.ga('create', __ANALYTICS__, 'auto');\n  window.ga('send', 'pageview');\n  const script = document.createElement('script');\n  script.async = true;\n  script.src = 'https://www.google-analytics.com/analytics.js';\n  document.body.appendChild(script);\n  history.listen(({ pathname }) => window.ga('send', 'pageview', pathname));\n}\n\n// Disable contextual menus\nwindow.addEventListener('contextmenu', (e) => (\n  e.preventDefault()\n), false);\n\n// Render the page\nconst mount = document.getElementById('mount');\nconst Layout = getLayoutComponent();\nrender(\n  <Provider store={store}>\n    <Router history={history}>\n      <Layout />\n    </Router>\n  </Provider>,\n  mount\n);\n\n// Hot reload locales & reducers\nif (!__PRODUCTION__ && module.hot) {\n  module.hot.accept('@/locales', () => reloadLocales(store));\n  module.hot.accept('@/reducers', () => store.replaceReducer(rootReducer));\n}\n","import DefaultLayout from './default';\nimport ExokitLayout from './exokit';\n\nexport default () => {\n  if (~window.navigator.userAgent.indexOf('Exokit')) {\n    return ExokitLayout;\n  }\n  return DefaultLayout;\n};\n","import { setLocale as reduxSetLocale } from 'react-redux-i18n';\nimport * as types from './types';\nimport API from '@/services/api';\n\nexport function hideSessionPopup() {\n  return {\n    type: types.USER_HIDE_SESSION_POPUP,\n  };\n}\n\nexport function register({ email, name, password }) {\n  return (dispatch) => dispatch({\n    type: types.USER_REGISTER,\n    payload: API.fetch({\n      body: {\n        email,\n        name,\n        password,\n      },\n      endpoint: 'user',\n      method: 'PUT',\n    }),\n  }).catch(() => {});\n}\n\nexport function refreshSession() {\n  return (dispatch) => dispatch({\n    type: types.USER_REFRESH_SESSION,\n    payload: API.fetch({\n      endpoint: 'user',\n    }),\n  }).catch(() => {});\n}\n\nexport function setLocale(locale) {\n  return (dispatch) => {\n    localStorage.setItem('REALMSVR::LOCALE', locale);\n    dispatch(reduxSetLocale(locale));\n  };\n}\n\nexport function showSessionPopup() {\n  return {\n    type: types.USER_SHOW_SESSION_POPUP,\n  };\n}\n\nexport function login({ email, password }) {\n  return (dispatch) => dispatch({\n    type: types.USER_LOGIN,\n    payload: API.fetch({\n      body: {\n        email,\n        password,\n      },\n      endpoint: 'user',\n      method: 'POST',\n    }),\n  }).catch(() => {});\n}\n\nexport function loginWithGoogle() {\n  return (dispatch) => {\n    const w = 512;\n    const h = 512;\n    const left = (window.screen.width / 2) - w / 2;\n    const top = (window.screen.height / 2) - h / 2;\n    const win = window.open(\n      `${API.baseURL}user/google`,\n      'loginWithGoogle',\n      `width=${w},height=${h},top=${top},left=${left}`\n    );\n    const watcher = setInterval(() => {\n      if (!win.window) {\n        clearInterval(watcher);\n        return;\n      }\n      win.postMessage(true, API.baseURL);\n    }, 100);\n    const onMessage = ({ origin, data: { session } }) => {\n      if (API.baseURL.indexOf(origin) === 0) {\n        window.removeEventListener('message', onMessage);\n        clearInterval(watcher);\n        if (!session) {\n          return;\n        }\n        dispatch({\n          type: types.USER_LOGIN_FULFILLED,\n          payload: session,\n        });\n      }\n    };\n    window.addEventListener('message', onMessage, false);\n  };\n}\n\nexport function signout() {\n  return {\n    type: types.USER_SIGNOUT,\n  };\n}\n","import {\n  BufferAttribute,\n  BufferGeometry,\n  DynamicDrawUsage,\n  Frustum,\n  InstancedBufferAttribute,\n  InstancedBufferGeometry,\n  Matrix4,\n  Mesh,\n  MeshBasicMaterial,\n  Object3D,\n  ShaderMaterial,\n  UniformsUtils,\n  ShaderLib,\n  VertexColors,\n  Vector3,\n} from 'three';\nimport Noise from '@/textures/noise';\n\nclass Voxels extends Object3D {\n  constructor({ instanced = false }) {\n    super();\n    if (instanced) {\n      const { shader } = Voxels;\n      this.geometry = new InstancedBufferGeometry();\n      this.material = new ShaderMaterial({\n        defines: shader.defines,\n        vertexShader: shader.vertex,\n        fragmentShader: shader.fragment,\n        uniforms: UniformsUtils.merge([\n          shader.uniforms,\n          { map: { value: Noise } },\n        ]),\n        fog: true,\n        vertexColors: VertexColors,\n      });\n    } else {\n      this.geometry = new BufferGeometry();\n      this.material = new MeshBasicMaterial({\n        map: Noise,\n        vertexColors: VertexColors,\n      });\n    }\n    this.instanced = instanced;\n    this.visible = false;\n\n    this.aux = {\n      frustum: new Frustum(),\n      matrix: new Matrix4(),\n    };\n  }\n\n  dispose() {\n    const { geometry, material } = this;\n    geometry.dispose();\n    material.dispose();\n  }\n\n  resize(size) {\n    const {\n      children,\n      geometry,\n      instanced,\n      material,\n    } = this;\n    while (children.length) {\n      this.remove(children[0]);\n    }\n\n    const radius = 8;\n    this.instances = [];\n    const aux = new Vector3();\n    const origin = new Vector3();\n    for (let z = -radius; z <= radius; z += 1) {\n      for (let y = -radius; y <= radius; y += 1) {\n        for (let x = -radius; x <= radius; x += 1) {\n          const distance = aux.set(x, y, z).distanceTo(origin);\n          if (Math.round(distance) <= radius) {\n            const instance = new Mesh(\n              geometry,\n              material\n            );\n            instance.chunk = { x, y, z };\n            instance.distance = distance;\n            instance.matrixAutoUpdate = false;\n            instance.position.set(x * size, y * size, z * size);\n            instance.updateMatrix();\n            instance.updateMatrixWorld();\n            this.instances.push(instance);\n          }\n        }\n      }\n    }\n    this.instances.sort(({ distance: a }, { distance: b }) => (\n      a - b\n    ));\n    this.intersects = this.instances.filter((instance) => {\n      const { chunk: { x, y, z } } = instance;\n      return (\n        x >= -2 && x <= 2\n        && y >= -2 && y <= 2\n        && z >= -2 && z <= 2\n      );\n    });\n\n    if (instanced) {\n      const mesh = new Mesh(\n        geometry,\n        material\n      );\n      mesh.frustumCulled = false;\n      this.add(mesh);\n      const offset = new Float32Array(this.instances.length * 3);\n      geometry.setAttribute('offset', new InstancedBufferAttribute(offset, 3));\n      geometry.attributes.offset.setUsage(DynamicDrawUsage);\n      geometry.maxInstancedCount = 0;\n    } else {\n      this.instances.forEach((instance) => this.add(instance));\n    }\n  }\n\n  updateFrustum(camera) {\n    const {\n      aux: { frustum, matrix },\n      geometry,\n      instanced,\n      instances,\n    } = this;\n    if (!instanced || !instances) return;\n    matrix.multiplyMatrices(camera.projectionMatrix, camera.matrixWorldInverse);\n    frustum.setFromMatrix(matrix);\n    const offsets = instances\n      .filter(({ worldSphere }) => worldSphere && frustum.intersectsSphere(worldSphere))\n      .reduce((offsets, { position }) => {\n        offsets.push(\n          position.x,\n          position.y,\n          position.z\n        );\n        return offsets;\n      }, []);\n    geometry.attributes.offset.array.set(offsets);\n    geometry.attributes.offset.needsUpdate = true;\n    geometry.maxInstancedCount = offsets.length / 3;\n  }\n\n  update({\n    index,\n    position,\n    color,\n    normal,\n    uv,\n  }) {\n    const { geometry, instances } = this;\n    geometry.setAttribute('position', new BufferAttribute(position, 3));\n    geometry.setAttribute('color', new BufferAttribute(color, 3));\n    geometry.setAttribute('normal', new BufferAttribute(normal, 3));\n    geometry.setAttribute('uv', new BufferAttribute(uv, 2));\n    geometry.setIndex(new BufferAttribute(index, 1));\n    geometry.computeBoundingSphere();\n    instances.forEach((instance) => {\n      instance.worldSphere = geometry.boundingSphere\n        .clone()\n        .applyMatrix4(instance.matrixWorld);\n    });\n    this.visible = true;\n  }\n}\n\nVoxels.shader = {\n  vertex: (\n    ShaderLib.basic.vertexShader\n      .replace(\n        '#include <clipping_planes_pars_vertex>',\n        [\n          '#include <clipping_planes_pars_vertex>',\n          'attribute vec3 offset;',\n        ].join('\\n')\n      )\n      .replace(\n        '#include <begin_vertex>',\n        [\n          'vec3 transformed = vec3( offset + position );',\n        ].join('\\n')\n      )\n  ),\n  fragment: ShaderLib.basic.fragmentShader,\n  uniforms: UniformsUtils.clone(ShaderLib.basic.uniforms),\n  defines: { USE_MAP: true, USE_UV: true },\n};\n\nexport default Voxels;\n","import PropTypes from 'prop-types';\nimport React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { Matrix4, Vector3 } from 'three';\nimport {\n  fetch,\n  reset,\n  updateFog,\n  updateVoxels,\n} from '@/actions/realm';\nimport Metadata from '@/components/realm/metadata';\nimport Picker from '@/components/realm/picker';\nimport Voxels from '@/components/realm/voxels';\nimport Renderer from '@/components/renderer';\n\nclass Realm extends PureComponent {\n  componentDidMount() {\n    const {\n      fog,\n      history,\n      match: { params: { slug } },\n      renderer: { current: renderer },\n      fetch,\n      updateFog,\n    } = this.props;\n    // Setup scene\n    const scene = renderer.resetScene();\n    renderer.camera.canLock = !renderer.renderer.vr.enabled;\n    this.picker = new Picker({\n      anisotropy: renderer.getMaxAnisotropy(),\n      fog,\n      history,\n      updateFog,\n    });\n    renderer.hands.children[1].add(this.picker);\n    this.voxels = new Voxels({\n      instanced: !!renderer.renderer.extensions.get('ANGLE_instanced_arrays'),\n    });\n    scene.add(this.voxels);\n    this.head = new Vector3();\n    this.intersects = [this.picker];\n    this.renderer = renderer;\n    this.rocket = {\n      forward: new Vector3(),\n      matrix: new Matrix4(),\n    };\n    this.scene = scene;\n    scene.onBeforeRender = this.onBeforeRender.bind(this);\n    // Fetch realm\n    fetch(slug);\n  }\n\n  componentDidUpdate({\n    geometry: previousGeometry,\n    fog: previousFog,\n    size: previousSize,\n  }) {\n    const { geometry, fog, size } = this.props;\n    const { picker, renderer, voxels } = this;\n    const {\n      isScreenshot,\n      raycaster,\n      room,\n      renderer: { vr },\n    } = renderer;\n    if (fog !== previousFog) {\n      // Update fog\n      renderer.setFog(fog);\n    }\n    if (size !== previousSize) {\n      // Resize voxels\n      room.position.set(\n        size * 0.5 + 0.5,\n        size * 0.5,\n        size * 0.5 + 0.5\n      );\n      voxels.resize(size);\n      this.intersects = [\n        picker,\n        ...voxels.intersects,\n      ];\n    }\n    if (geometry !== previousGeometry) {\n      // Update voxels\n      voxels.update(geometry);\n      if (!previousGeometry.index && vr.enabled) {\n        // Pull the player down to the nearest voxel\n        raycaster.ray.origin.copy(room.position);\n        raycaster.ray.direction.set(0, -1, 0);\n        const hit = raycaster.intersectObjects(voxels.intersects)[0];\n        if (hit) {\n          room.position.y = hit.point.y;\n        }\n      }\n      if (isScreenshot) {\n        setImmediate(() => {\n          window.__SCREENSHOT_READY__ = true;\n        });\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    const { picker, renderer, scene } = this;\n    const { reset } = this.props;\n    renderer.hands.children[1].remove(picker);\n    picker.dispose();\n    delete scene.onBeforeRender;\n    reset();\n  }\n\n  onBeforeRender({ animation: { delta, time } }, scene, camera) {\n    const {\n      head,\n      intersects,\n      picker,\n      props: {\n        size,\n        updateVoxels,\n      },\n      renderer: {\n        hands,\n        isScreenshot,\n        raycaster,\n        room,\n      },\n      rocket,\n      voxels,\n    } = this;\n    voxels.updateFrustum(camera);\n\n    // Handle controls\n    let isLevitating = false;\n    hands.children.forEach((hand) => {\n      const { buttons, pointer } = hand;\n      // Rocket locomotion\n      if (picker.locomotionMode === 'levitate' && buttons.pad) {\n        rocket.matrix.extractRotation(hand.matrixWorld);\n        rocket.forward\n          .set(0, 0, -1)\n          .applyMatrix4(rocket.matrix)\n          .multiplyScalar(5 * delta);\n        const [x, y, z] = ['x', 'y', 'z'].map((axis) => {\n          let position = room.position[axis] + rocket.forward[axis];\n          while (position < 0) position += size;\n          while (position >= size) position -= size;\n          return position;\n        });\n        room.position.set(x, y, z);\n        isLevitating = true;\n      }\n      if (isLevitating) {\n        pointer.visible = false;\n        return;\n      }\n      hand.setupRaycaster(raycaster);\n      const hit = raycaster.intersectObjects(intersects)[0] || false;\n      if (!hit) {\n        pointer.visible = false;\n        return;\n      }\n      const {\n        distance,\n        face: { normal },\n        object,\n        point,\n      } = hit;\n      // Pointer feedback\n      pointer.scale.z = distance - 0.175;\n      pointer.visible = true;\n      // Color picker\n      if (object === picker) {\n        if (buttons.triggerDown) {\n          picker.onPointer(point);\n        }\n        return;\n      }\n      // Translocation\n      if (\n        buttons.padDown\n        && normal.x === 0\n        && normal.y === 1\n        && normal.z === 0\n      ) {\n        head.setFromMatrixPosition(camera.matrixWorld);\n        const offset = {\n          x: head.x - room.position.x,\n          y: 0,\n          z: head.z - room.position.z,\n        };\n        const [x, y, z] = ['x', 'y', 'z'].map((axis) => {\n          let position = point[axis] - offset[axis];\n          while (position < 0) position += size;\n          while (position >= size) position -= size;\n          return position;\n        });\n        room.position.set(x, y, z);\n      }\n      // Voxel update\n      if (\n        buttons.triggerDown\n        || buttons.gripDown\n      ) {\n        updateVoxels({\n          color: picker.colors.fg,\n          point,\n          normal,\n          remove: buttons.gripDown,\n        });\n      }\n    });\n\n    // Animation for non-vr browsers\n    if (!isScreenshot && size && camera.canLock) {\n      if (!camera.isLocked) {\n        const rotation = Math.sin(time * 0.1) * 0.0005;\n        camera.rotateY(rotation);\n        camera.rotateX(rotation);\n        camera.rotateZ(rotation);\n        camera.translateZ(delta * 0.5);\n        camera.updateMatrixWorld();\n      }\n      ['x', 'y', 'z'].forEach((axis) => {\n        while (camera.position[axis] < 0) {\n          camera.position[axis] += size;\n        }\n        while (camera.position[axis] >= size) {\n          camera.position[axis] -= size;\n        }\n      });\n    }\n  }\n\n  render() {\n    const { isCreator } = this.props;\n    const isExokit = ~window.navigator.userAgent.indexOf('Exokit');\n    return isCreator && !isExokit ? (\n      <Metadata />\n    ) : null;\n  }\n}\n\nRealm.propTypes = {\n  geometry: PropTypes.shape({\n    index: PropTypes.instanceOf(Uint32Array),\n    position: PropTypes.instanceOf(Float32Array),\n    color: PropTypes.instanceOf(Float32Array),\n    normal: PropTypes.instanceOf(Float32Array),\n    uv: PropTypes.instanceOf(Float32Array),\n  }).isRequired,\n  fog: PropTypes.number.isRequired,\n  // eslint-disable-next-line react/forbid-prop-types\n  history: PropTypes.object.isRequired,\n  isCreator: PropTypes.bool.isRequired,\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      slug: PropTypes.string.isRequired,\n    }).isRequired,\n  }).isRequired,\n  size: PropTypes.number.isRequired,\n  renderer: PropTypes.shape({\n    current: PropTypes.instanceOf(Renderer),\n  }).isRequired,\n  fetch: PropTypes.func.isRequired,\n  reset: PropTypes.func.isRequired,\n  updateFog: PropTypes.func.isRequired,\n  updateVoxels: PropTypes.func.isRequired,\n};\n\nexport default connect(\n  ({\n    realm: {\n      geometry,\n      fog,\n      isCreator,\n      size,\n    },\n  }) => ({\n    geometry,\n    fog,\n    isCreator,\n    size,\n  }),\n  {\n    fetch,\n    reset,\n    updateFog,\n    updateVoxels,\n  }\n)(Realm);\n","import PropTypes from 'prop-types';\nimport React, { PureComponent } from 'react';\nimport { TiEdit } from 'react-icons/ti';\nimport { connect } from 'react-redux';\nimport { Translate } from 'react-redux-i18n';\nimport styled from 'styled-components';\nimport Popup from '@/components/popup';\nimport {\n  hideMetadataPopup as hide,\n  showMetadataPopup as show,\n  updateMetadata as update,\n} from '@/actions/realm';\n\nconst Toggle = styled.form`\n  position: absolute;\n  top: 0;\n  left: 0;\n  cursor: pointer;\n  .icon {\n    position: absolute;\n    font-size: 2.5rem;\n    top: ${100 / 3}%;\n    left: ${100 / 3}%;\n    transform: translate(-50%, -50%);\n  }\n`;\n\nconst Content = styled.div`\n  button {\n    display: flex;\n    align-items: center;\n    border: 1px solid #555;\n    background: #222;\n    padding: 0.5rem 1rem;\n    margin: 0;\n    font-family: inherit;\n    font-weight: 700;\n    font-size: 1.2rem;\n    color: inherit;\n    cursor: pointer;\n    outline: 0;\n    > svg {\n      font-size: 1.5em;\n      margin-right: 0.5rem;\n    }\n  }\n`;\n\nconst Form = styled.form`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 80%;\n  > label {\n    width: 100%;\n    padding: 0;\n  }\n  > input {\n    box-sizing: border-box;\n    border: 1px solid #333;\n    width: 100%;\n    background: #222;\n    color: inherit;\n    font-family: inherit;\n    font-weight: 400;\n    font-size: 2em;\n    padding: 0.5rem;\n    margin: 0 0 1rem;\n  }\n`;\n\nclass Metadata extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n    const { target: form } = e;\n    const { update } = this.props;\n    update({\n      name: form.name.value,\n    });\n  }\n\n  render() {\n    const {\n      isEditingMetadata,\n      name,\n      hide,\n      show,\n    } = this.props;\n    return (\n      <div>\n        <Toggle\n          onClick={show}\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"80\"\n            height=\"80\"\n            viewBox=\"0 0 250 250\"\n            fill=\"#fff\"\n          >\n            <path\n              d=\"M0,250 L250,0 L0,0 Z\"\n              fill=\"#000\"\n            />\n          </svg>\n          <TiEdit className=\"icon\" />\n        </Toggle>\n        <Popup\n          heading={<Translate value=\"Realm.editMetadata\" />}\n          isShowing={isEditingMetadata}\n          hide={hide}\n        >\n          <Content>\n            <Form\n              onSubmit={this.onSubmit}\n            >\n              <label><Translate value=\"Realm.name\" /></label>\n              <input\n                type=\"text\"\n                name=\"name\"\n                defaultValue={name}\n                required\n              />\n              <button\n                type=\"submit\"\n              >\n                <TiEdit />\n                <Translate value=\"Realm.save\" />\n              </button>\n            </Form>\n          </Content>\n        </Popup>\n      </div>\n    );\n  }\n}\n\nMetadata.propTypes = {\n  isEditingMetadata: PropTypes.bool.isRequired,\n  name: PropTypes.string.isRequired,\n  hide: PropTypes.func.isRequired,\n  show: PropTypes.func.isRequired,\n  update: PropTypes.func.isRequired,\n};\n\nexport default connect(\n  ({\n    realm: {\n      isEditingMetadata,\n      name,\n    },\n  }) => ({\n    isEditingMetadata,\n    name,\n  }),\n  {\n    hide,\n    show,\n    update,\n  }\n)(Metadata);\n","import {\n  BufferGeometry,\n  Mesh,\n  MeshBasicMaterial,\n  PlaneGeometry,\n  Vector3,\n  VertexColors,\n} from 'three';\nimport Noise from '@/textures/noise';\n\nclass Ground extends Mesh {\n  constructor() {\n    if (\n      !Ground.geometry\n      || !Ground.material\n    ) {\n      Ground.setup();\n    }\n    super(\n      Ground.geometry,\n      Ground.material\n    );\n  }\n\n  static setup() {\n    if (!Ground.geometry) {\n      const size = 256;\n      const geometry = new PlaneGeometry(size, size, size, size);\n      geometry.rotateX(Math.PI * -0.5);\n      const origin = new Vector3();\n      geometry.vertices.forEach((vertex) => {\n        const distance = Math.floor(vertex.distanceTo(origin)) / 4;\n        const height = Math.floor((distance ** 2) / 3) / 6;\n        vertex.y = (\n          height * (Math.random() * 0.4 + 0.6)\n          + Math.max(Math.min(-(distance - 1.25), 0), -2)\n        );\n      });\n      geometry.faces.forEach((face, i) => {\n        if (i % 2 === 1) {\n          const p = geometry.faces[i - 1];\n          const v = [\n            face.a, face.b, face.c,\n            p.a, p.b, p.c,\n          ].map((v) => geometry.vertices[v]);\n          const height = v.reduce((avg, v) => (\n            avg + v.y\n          ), 0) / v.length;\n          v.forEach((v) => { v.y = height; });\n          const factor = Math.min(height / 40 + 0.25, 1);\n          face.color.setRGB(factor * 0.5, factor, factor * 0.75);\n          face.color.offsetHSL(\n            Math.random() * 0.03 - 0.01,\n            Math.random() * 0.2,\n            Math.random() * -0.05\n          );\n          p.color.copy(face.color);\n        }\n      });\n      Ground.geometry = (new BufferGeometry()).fromGeometry(geometry);\n      const uv = Ground.geometry.attributes.uv.array;\n      for (let i = 0; i < uv.length / 2; i += 6) {\n        uv.set([\n          0, 1,\n        ], i * 2);\n        uv.set([\n          0, 0,\n        ], (i + 1) * 2);\n        uv.set([\n          1, 1,\n        ], (i + 2) * 2);\n        uv.set([\n          0, 0,\n        ], (i + 3) * 2);\n        uv.set([\n          1, 0,\n        ], (i + 4) * 2);\n        uv.set([\n          1, 1,\n        ], (i + 5) * 2);\n      }\n    }\n    if (!Ground.material) {\n      Ground.material = new MeshBasicMaterial({\n        map: Noise,\n        vertexColors: VertexColors,\n      });\n    }\n  }\n}\n\nexport default Ground;\n","import * as types from './types';\nimport API from '@/services/api';\n\nexport function fetchRealms() {\n  return (dispatch, getState) => {\n    const { lobby: { filter, pagination: { page } } } = getState();\n    return dispatch({\n      type: types.LOBBY_FETCH_REALMS,\n      payload: API.fetch({\n        endpoint: `realms/${filter}/${page}`,\n      }),\n    });\n  };\n}\n\nexport function setFilter(value) {\n  return {\n    type: types.LOBBY_SET_FILTER,\n    payload: { value },\n  };\n}\n\nexport function setPage(value) {\n  return {\n    type: types.LOBBY_SET_PAGE,\n    payload: { value },\n  };\n}\n","import { Color } from 'three';\nimport Panel from '@/components/panel';\nimport Fonts from '@/services/fonts';\n\nclass Picker extends Panel {\n  constructor({\n    anisotropy,\n    fog,\n    history,\n    updateFog,\n  }) {\n    super({ anisotropy });\n    const { renderer } = this;\n    this.position.set(-0.15, 0.15, 0.075);\n    this.rotation.set(0, Math.PI * 0.5, Math.PI * 0.1, 'ZYX');\n    this.scale.set(0.3, 0.3, 1);\n    this.block = {\n      x: renderer.width * 0.05,\n      y: renderer.height * 0.05,\n      width: renderer.width * 0.75,\n      height: renderer.height * 0.75,\n    };\n    this.strip = {\n      x: renderer.width * 0.85,\n      y: renderer.height * 0.05,\n      width: renderer.width * 0.1,\n      height: renderer.height * 0.6,\n    };\n    this.colorModeButton = {\n      label: 'MODE',\n      x: renderer.width * 0.7,\n      y: renderer.height * 0.85,\n      width: renderer.width * 0.25,\n      height: renderer.height * 0.1,\n      onPointer: () => {\n        this.setColorMode(\n          this.colorMode === 'fg' ? 'bg' : 'fg'\n        );\n        this.draw();\n      },\n    };\n    this.locomotionModeButton = {\n      label: 'MODE',\n      x: renderer.width * 0.375,\n      y: renderer.height * 0.85,\n      width: renderer.width * 0.25,\n      height: renderer.height * 0.1,\n      onPointer: () => {\n        this.setLocomotionMode(\n          this.locomotionMode === 'teleport' ? 'levitate' : 'teleport'\n        );\n        this.draw();\n      },\n    };\n    this.buttons = [\n      {\n        label: ' REALMS',\n        x: renderer.width * 0.05,\n        y: renderer.height * 0.85,\n        width: renderer.width * 0.25,\n        height: renderer.height * 0.1,\n        onPointer: () => history.push('/'),\n      },\n      this.colorModeButton,\n      this.locomotionModeButton,\n    ];\n    this.colors = {\n      bg: (new Color()).setHex(fog),\n      fg: (new Color()).setHSL(Math.random(), 0.6, 0.8),\n      block: new Color(),\n    };\n    this.setColorMode('fg');\n    this.setLocomotionMode('teleport');\n    this.updateFog = updateFog;\n    Fonts\n      .waitUntilLoaded('Roboto')\n      .then(() => (\n        this.draw()\n      ));\n  }\n\n  draw() {\n    const {\n      block,\n      buttons,\n      colorMode,\n      colors,\n      context: ctx,\n      renderer,\n      strip,\n    } = this;\n\n    super.draw();\n\n    {\n      const {\n        x,\n        y,\n        width,\n        height,\n      } = block;\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.fillStyle = `#${colors.block.getHexString()}`;\n      ctx.fillRect(0, 0, width, height);\n\n      const grdWhite = ctx.createLinearGradient(0, 0, width, 0);\n      grdWhite.addColorStop(0, 'rgba(255,255,255,1)');\n      grdWhite.addColorStop(1, 'rgba(255,255,255,0)');\n      ctx.fillStyle = grdWhite;\n      ctx.fillRect(0, 0, width, height);\n\n      const grdBlack = ctx.createLinearGradient(0, 0, 0, height);\n      grdBlack.addColorStop(0, 'rgba(0,0,0,0)');\n      grdBlack.addColorStop(1, 'rgba(0,0,0,1)');\n      ctx.fillStyle = grdBlack;\n      ctx.fillRect(0, 0, width, height);\n      ctx.restore();\n    }\n\n    {\n      const {\n        x,\n        y,\n        width,\n        height,\n      } = strip;\n      ctx.save();\n      ctx.translate(x, y);\n      const grd = ctx.createLinearGradient(0, 0, 0, height);\n      grd.addColorStop(0, 'rgba(255, 0, 0, 1)');\n      grd.addColorStop(0.17, 'rgba(255, 255, 0, 1)');\n      grd.addColorStop(0.34, 'rgba(0, 255, 0, 1)');\n      grd.addColorStop(0.51, 'rgba(0, 255, 255, 1)');\n      grd.addColorStop(0.68, 'rgba(0, 0, 255, 1)');\n      grd.addColorStop(0.85, 'rgba(255, 0, 255, 1)');\n      grd.addColorStop(1, 'rgba(255, 0, 0, 1)');\n      ctx.fillStyle = grd;\n      ctx.fillRect(0, 0, width, height);\n      ctx.restore();\n    }\n\n    {\n      ctx.save();\n      const width = renderer.width * 0.1;\n      const height = renderer.width * 0.1;\n      ctx.translate(renderer.width * 0.85, renderer.height * 0.7);\n      ctx.fillStyle = `#${colors[colorMode].getHexString()}`;\n      ctx.strokeStyle = '#333';\n      ctx.beginPath();\n      ctx.rect(0, 0, width, height);\n      ctx.fill();\n      ctx.stroke();\n      ctx.restore();\n    }\n\n    buttons.forEach(({\n      label,\n      x,\n      y,\n      width,\n      height,\n    }) => {\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.fillStyle = '#222';\n      ctx.strokeStyle = '#333';\n      ctx.beginPath();\n      ctx.rect(0, 0, width, height);\n      ctx.fill();\n      ctx.stroke();\n      ctx.fillStyle = '#fff';\n      ctx.font = '700 24px Roboto';\n      ctx.textAlign = 'center';\n      ctx.textBaseline = 'middle';\n      ctx.fillText(label, width * 0.5, height * 0.5);\n      ctx.restore();\n    });\n  }\n\n  setColorMode(mode) {\n    const { colors, colorModeButton } = this;\n    colors.block.copy(colors[mode]);\n    colorModeButton.label = mode === 'fg' ? 'FG color' : 'BG color';\n    this.colorMode = mode;\n  }\n\n  setLocomotionMode(mode) {\n    const { locomotionModeButton } = this;\n    locomotionModeButton.label = `${mode.substr(0, 1).toUpperCase()}${mode.substr(1)}`;\n    this.locomotionMode = mode;\n  }\n\n  onPointer(point) {\n    const {\n      block,\n      buttons,\n      colors,\n      context: ctx,\n      colorMode,\n      pointer,\n      strip,\n      updateFog,\n    } = this;\n    super.onPointer(point);\n    [block, strip, ...buttons].forEach((object) => {\n      const {\n        x,\n        y,\n        width,\n        height,\n        onPointer,\n      } = object;\n      if (\n        pointer.x < x\n        || pointer.x > x + width\n        || pointer.y < y\n        || pointer.y > y + height\n      ) {\n        return;\n      }\n      if (onPointer) {\n        onPointer();\n        return;\n      }\n      const imageData = ctx.getImageData(pointer.x, pointer.y, 1, 1).data;\n      if (object === strip) {\n        colors.block.setRGB(\n          imageData[0] / 0xFF,\n          imageData[1] / 0xFF,\n          imageData[2] / 0xFF\n        );\n      }\n      colors[colorMode].setRGB(\n        imageData[0] / 0xFF,\n        imageData[1] / 0xFF,\n        imageData[2] / 0xFF\n      );\n      if (colorMode === 'bg') {\n        updateFog(colors.bg.getHex());\n      }\n      this.draw();\n    });\n  }\n}\n\nexport default Picker;\n","/* eslint-disable max-classes-per-file */\nimport {\n  BufferGeometry,\n  Color,\n  CylinderGeometry,\n  Mesh,\n  MeshBasicMaterial,\n  Object3D,\n  VertexColors,\n} from 'three';\nimport Panel from '@/components/panel';\nimport API from '@/services/api';\nimport Fonts from '@/services/fonts';\n\nclass Pillar extends Mesh {\n  constructor() {\n    if (!Pillar.geometry || !Pillar.material) {\n      Pillar.setup();\n    }\n    super(\n      Pillar.geometry,\n      Pillar.material\n    );\n  }\n\n  static setup() {\n    if (!Pillar.geometry) {\n      const geometry = new CylinderGeometry(0.025, 0.025, 1.5, 8, 32);\n      geometry.translate(0, -0.83, 0);\n      const color = new Color();\n      geometry.faces.forEach((face, i) => {\n        if (i % 2 === 1) {\n          face.color.copy(color);\n        } else {\n          face.color.setHex(0x445544);\n          face.color.offsetHSL(0, 0, Math.random() * -0.1);\n          color.copy(face.color);\n        }\n      });\n      Pillar.geometry = (new BufferGeometry()).fromGeometry(geometry);\n    }\n    if (!Pillar.material) {\n      Pillar.material = new MeshBasicMaterial({\n        vertexColors: VertexColors,\n      });\n    }\n  }\n}\n\nclass Realm extends Panel {\n  constructor({\n    anisotropy,\n    _id: id,\n    name,\n    creator,\n    onPointer,\n  }) {\n    super({\n      anisotropy,\n    });\n    this.name = name.length > 16 ? (\n      `${name.substr(0, 16)}...`\n    ) : (\n      name\n    );\n    this.onPointer = onPointer;\n    this.scale.set(0.3, 0.3, 1);\n    {\n      const { width, height } = this.renderer;\n      const vignette = this.context.createRadialGradient(\n        width * 0.5, height * 0.5, width * 0.2,\n        width * 0.5, height * 0.5, width * 0.5\n      );\n      vignette.addColorStop(0, 'rgba(0, 0, 0, 0)');\n      vignette.addColorStop(1, 'rgba(0, 0, 0, .5)');\n      this.vignette = vignette;\n    }\n    let hasLoadedFont = false;\n    Fonts\n      .waitUntilLoaded('Roboto')\n      .then(() => {\n        hasLoadedFont = true;\n        this.draw();\n      });\n    if (creator) {\n      const image = new Image();\n      image.crossOrigin = 'anonymous';\n      image.src = `${API.baseURL}user/${creator._id}/photo`;\n      image.onload = () => {\n        this.creator = image;\n        if (hasLoadedFont) {\n          this.draw();\n        }\n      };\n    }\n    {\n      const image = new Image();\n      image.crossOrigin = 'anonymous';\n      image.src = `${API.baseURL}realm/${id}/screenshot`;\n      image.onload = () => {\n        this.screenshot = image;\n        if (hasLoadedFont) {\n          this.draw();\n        }\n      };\n    }\n  }\n\n  draw() {\n    const {\n      context: ctx,\n      creator,\n      isHover,\n      name,\n      renderer,\n      screenshot,\n      vignette,\n    } = this;\n    super.draw();\n    if (screenshot) {\n      ctx.drawImage(screenshot, 0, 0);\n    }\n    ctx.fillStyle = vignette;\n    ctx.fillRect(0, 0, renderer.width, renderer.height);\n    ctx.fillStyle = `rgba(${isHover ? '255, 255, 255' : '0, 0, 0'}, .5)`;\n    ctx.fillRect(0, renderer.height * 0.75, renderer.width, renderer.height * 0.25);\n    ctx.font = '40px Roboto';\n    ctx.textAlign = 'left';\n    ctx.textBaseline = 'middle';\n    ctx.fillStyle = isHover ? '#333' : '#fff';\n    if (creator) {\n      ctx.drawImage(\n        creator,\n        0, renderer.height * 0.75,\n        renderer.width * 0.25, renderer.height * 0.25\n      );\n    }\n    ctx.fillText(\n      name,\n      renderer.width * 0.05 + (renderer.width * (creator ? 0.25 : 0.05)),\n      renderer.height * 0.875\n    );\n  }\n}\n\nclass ButtonsPanel extends Panel {\n  constructor({\n    anisotropy,\n  }) {\n    super({\n      anisotropy,\n      width: 256,\n      height: 256,\n    });\n    this.scale.set(0.25, 0.25, 1);\n    this.hasLoadedFont = false;\n    Fonts\n      .waitUntilLoaded('Roboto')\n      .then(() => {\n        this.hasLoadedFont = true;\n        this.draw();\n      });\n  }\n\n  draw() {\n    const {\n      buttons,\n      context: ctx,\n    } = this;\n    super.draw();\n    ctx.font = '700 30px Roboto';\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n    buttons.forEach(({\n      label,\n      x,\n      y,\n      width,\n      height,\n      isActive,\n      isDisabled,\n    }) => {\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.beginPath();\n      ctx.rect(0, 0, width, height);\n      if (isDisabled) {\n        ctx.fillStyle = '#555';\n      } else if (isActive) {\n        ctx.fillStyle = '#fff';\n      } else {\n        ctx.fillStyle = '#222';\n      }\n      ctx.strokeStyle = '#333';\n      ctx.fill();\n      ctx.stroke();\n      if (isDisabled) {\n        ctx.fillStyle = '#777';\n      } else if (isActive) {\n        ctx.fillStyle = '#222';\n      } else {\n        ctx.fillStyle = '#fff';\n      }\n      ctx.fillText(\n        label,\n        width * 0.5,\n        height * 0.5\n      );\n      ctx.restore();\n    });\n  }\n\n  onPointer({ isDown, point }) {\n    const { buttons, pointer } = this;\n    if (!isDown) return;\n    super.onPointer(point);\n    buttons\n      .filter(({ isDisabled }) => (!isDisabled))\n      .forEach(({\n        x,\n        y,\n        width,\n        height,\n        onPointer,\n      }) => {\n        if (\n          pointer.x < x\n          || pointer.x > x + width\n          || pointer.y < y\n          || pointer.y > y + height\n        ) {\n          return;\n        }\n        onPointer();\n      });\n  }\n}\n\nclass CreateRealm extends ButtonsPanel {\n  constructor({\n    anisotropy,\n    history,\n    createRealm,\n  }) {\n    super({ anisotropy });\n    this.scale.set(0.3, 0.3, 1);\n    const { width, height } = this.renderer;\n    this.buttons = [\n      {\n        label: 'Create Realm',\n        x: width * 0.1,\n        y: height * 0.3,\n        width: width * 0.8,\n        height: height * 0.4,\n        onPointer: () => (\n          createRealm()\n            .then(({ value: slug }) => history.push(`/${slug}`))\n        ),\n      },\n    ];\n  }\n}\n\nclass Pagination extends ButtonsPanel {\n  constructor({\n    anisotropy,\n    page,\n    pages,\n    update,\n  }) {\n    super({ anisotropy });\n    const { width, height } = this.renderer;\n    this.buttons = [\n      {\n        label: '<',\n        x: width * 0.1,\n        y: height * 0.3,\n        width: width * 0.3,\n        height: height * 0.4,\n        onPointer: () => {\n          if (this.page > 0) update(this.page - 1);\n        },\n      },\n      {\n        label: '>',\n        x: width * 0.6,\n        y: height * 0.3,\n        width: width * 0.3,\n        height: height * 0.4,\n        onPointer: () => {\n          if (this.page < this.pages - 1) update(this.page + 1);\n        },\n      },\n    ];\n    this.page = page;\n    this.pages = pages;\n  }\n\n  draw() {\n    const {\n      context: ctx,\n      page,\n      pages,\n      renderer,\n    } = this;\n    super.draw();\n    ctx.fillStyle = '#fff';\n    ctx.fillText(\n      `${page + 1} / ${pages}`,\n      renderer.width * 0.5,\n      renderer.height * 0.85\n    );\n  }\n}\n\nclass Session extends ButtonsPanel {\n  constructor({\n    anisotropy,\n    isSigningIn,\n    user,\n    signin,\n    signout,\n  }) {\n    super({ anisotropy });\n    this.signin = signin;\n    this.signout = signout;\n    this.updateSession({\n      isSigningIn,\n      user,\n    });\n  }\n\n  updateSession({ isSigningIn, user }) {\n    const { renderer, signin, signout } = this;\n    const { width, height } = renderer;\n    if (isSigningIn) {\n      this.buttons = [];\n    } else if (!user) {\n      this.buttons = [{\n        label: 'Sign-In',\n        x: width * 0.1,\n        y: height * 0.4,\n        width: width * 0.8,\n        height: height * 0.4,\n        onPointer: signin,\n      }];\n    } else {\n      this.buttons = [{\n        label: 'Sign-Out',\n        x: width * 0.1,\n        y: height * 0.7,\n        width: width * 0.8,\n        height: height * 0.2,\n        onPointer: signout,\n      }];\n    }\n    this.isSigningIn = isSigningIn;\n    this.user = user;\n    delete this.userPhoto;\n    if (user) {\n      const image = new Image();\n      image.crossOrigin = 'anonymous';\n      image.src = `${API.baseURL}user/${user._id}/photo`;\n      image.onload = () => {\n        this.userPhoto = image;\n        if (this.hasLoadedFont) {\n          this.draw();\n        }\n      };\n    }\n  }\n\n  draw() {\n    const {\n      context: ctx,\n      isSigningIn,\n      renderer,\n      user,\n      userPhoto,\n    } = this;\n    super.draw();\n    ctx.fillStyle = '#fff';\n    if (isSigningIn) {\n      ctx.fillText(\n        'Remove your',\n        renderer.width * 0.5,\n        renderer.height * 0.25\n      );\n      ctx.fillText(\n        'headset',\n        renderer.width * 0.5,\n        renderer.height * 0.4\n      );\n      ctx.fillText(\n        'And Sign-In',\n        renderer.width * 0.5,\n        renderer.height * 0.6\n      );\n      ctx.fillText(\n        'in your browser',\n        renderer.width * 0.5,\n        renderer.height * 0.75\n      );\n    } else {\n      ctx.fillText(\n        user ? user.firstName : 'Guest',\n        renderer.width * 0.5,\n        renderer.height * 0.2\n      );\n    }\n    if (user && userPhoto) {\n      ctx.drawImage(\n        userPhoto,\n        renderer.width * 0.5 - 40, renderer.height * 0.5 - 50,\n        80, 80\n      );\n    }\n  }\n}\n\nclass Filter extends ButtonsPanel {\n  constructor({\n    anisotropy,\n    isAuth,\n    filter,\n    update,\n  }) {\n    super({ anisotropy });\n    const { width, height } = this.renderer;\n    this.buttons = [\n      {\n        id: 'popular',\n        label: 'Most Popular',\n        x: width * 0.1,\n        y: height * 0.1,\n        width: width * 0.8,\n        height: height * 0.2,\n        onPointer: () => update('popular'),\n      },\n      {\n        id: 'latest',\n        label: 'Latest Realms',\n        x: width * 0.1,\n        y: height * 0.4,\n        width: width * 0.8,\n        height: height * 0.2,\n        onPointer: () => update('latest'),\n      },\n      {\n        id: 'user',\n        label: 'Your Realms',\n        x: width * 0.1,\n        y: height * 0.7,\n        width: width * 0.8,\n        height: height * 0.2,\n        isDisabled: !isAuth,\n        onPointer: () => update('user'),\n      },\n    ];\n    this.filter = filter;\n    this.update = update;\n  }\n\n  updateSession({ isAuth }) {\n    const { buttons } = this;\n    buttons[\n      buttons.findIndex(({ id }) => (id === 'user'))\n    ].isDisabled = !isAuth;\n  }\n\n  draw() {\n    const { buttons, filter } = this;\n    buttons.forEach((button) => {\n      button.isActive = button.id === filter;\n    });\n    super.draw();\n  }\n}\n\nclass Menu extends Object3D {\n  constructor({\n    anisotropy,\n    filter,\n    history,\n    isSigningIn,\n    pagination,\n    realms,\n    user,\n    createRealm,\n    setFilter,\n    setPage,\n    signin,\n    signout,\n  }) {\n    super();\n    this.anisotropy = anisotropy;\n    this.history = history;\n    this.hover = {};\n    this.intersects = [];\n    this.position.set(0, 1.25, -1);\n    this.pagination = this.addPanel(\n      Pagination,\n      {\n        ...pagination,\n        update: setPage,\n      },\n      0, -0.3, 0.13\n    );\n    this.session = this.addPanel(\n      Session,\n      {\n        isSigningIn,\n        user,\n        signin,\n        signout,\n      },\n      -0.3, -0.3, 0.13\n    );\n    this.filter = this.addPanel(\n      Filter,\n      {\n        filter,\n        isAuth: !!user,\n        update: setFilter,\n      },\n      0.3, -0.3, 0.13\n    );\n    this.createRealm = createRealm;\n    this.updateRealms(realms);\n  }\n\n  addPanel(Panel, props, x, y, z) {\n    const { anisotropy, intersects } = this;\n    const panel = new Panel({ ...props, anisotropy });\n    panel.position.set(x, y, z);\n    panel.lookAt(0, 0.5, 1);\n    this.add(panel);\n    const pillar = new Pillar();\n    pillar.position.copy(panel.position);\n    this.add(pillar);\n    intersects.push(panel);\n    return panel;\n  }\n\n  dispose() {\n    const { children } = this;\n    children.forEach((child) => child.dispose && child.dispose());\n  }\n\n  setHover({ hand, realm }) {\n    const { hover } = this;\n    if (hover[hand] === realm) {\n      return;\n    }\n    if (hover[hand]) {\n      hover[hand].isHover = false;\n      hover[hand].draw();\n    }\n    if (realm) {\n      realm.isHover = true;\n      realm.draw();\n    }\n    this.hover[hand] = realm;\n  }\n\n  updateFilter(value) {\n    const { filter } = this;\n    filter.filter = value;\n    filter.draw();\n  }\n\n  updatePagination({ page, pages }) {\n    const { pagination } = this;\n    pagination.page = page;\n    pagination.pages = pages;\n    pagination.draw();\n  }\n\n  updateRealms(realms) {\n    const {\n      anisotropy,\n      children,\n      createRealm,\n      filter: { filter },\n      history,\n      pagination,\n    } = this;\n    while (children.length > 6) {\n      const child = children[children.length - 1];\n      if (child.dispose) child.dispose();\n      this.remove(child);\n    }\n    this.intersects.length = 3;\n    const showCreateRealm = filter === 'user' && pagination.page === 0;\n    const count = realms.length + (showCreateRealm ? 1 : 0);\n    let offset = 0.25 + count * -0.25;\n    if (showCreateRealm) {\n      this.addPanel(\n        CreateRealm,\n        {\n          history,\n          createRealm,\n        },\n        offset, 0, 0\n      );\n      offset += 0.5;\n    }\n    realms.forEach((realm, i) => {\n      const panel = this.addPanel(\n        Realm,\n        {\n          ...realm,\n          anisotropy,\n          onPointer: ({ hand, isDown }) => {\n            this.setHover({ hand, realm: panel });\n            if (isDown) {\n              history.push(`/${realm.slug}`);\n            }\n          },\n        },\n        offset + (i * 0.5), 0, 0\n      );\n    });\n  }\n\n  updateSession({ isSigningIn, user }) {\n    const { filter, session } = this;\n    filter.updateSession({ isAuth: !!user });\n    filter.draw();\n    session.updateSession({ isSigningIn, user });\n    session.draw();\n  }\n}\n\nexport default Menu;\n","import {\n  BufferGeometry,\n  Points,\n  PointsMaterial,\n  VertexColors,\n  BufferAttribute,\n  Vector3,\n} from 'three';\n\nclass Starfield extends Points {\n  constructor() {\n    if (\n      !Starfield.geometry\n      || !Starfield.material\n    ) {\n      Starfield.setup();\n    }\n    super(\n      Starfield.geometry,\n      Starfield.material\n    );\n  }\n\n  onBeforeRender({ animation: { time } }) {\n    this.rotation.x = Math.sin(time * 0.01) * (1 / 3);\n  }\n\n  static setup() {\n    if (!Starfield.geometry) {\n      const count = 2048;\n      const radius = 512;\n      const position = new Float32Array(count * 3);\n      const color = new Float32Array(count * 3);\n      const aux = new Vector3();\n      for (let i = 0; i < count * 3; i += 3) {\n        aux\n          .set(\n            Math.random() * 2 - 1,\n            Math.random(),\n            Math.random() * 2 - 1\n          )\n          .normalize()\n          .multiplyScalar(radius);\n        position[i] = aux.x;\n        position[i + 1] = aux.y;\n        position[i + 2] = aux.z;\n        const c = 0.2 + Math.random() * 0.5;\n        color[i] = c - Math.random() * 0.1;\n        color[i + 1] = c - Math.random() * 0.1;\n        color[i + 2] = c - Math.random() * 0.1;\n      }\n      Starfield.geometry = new BufferGeometry();\n      Starfield.geometry.setAttribute('position', new BufferAttribute(position, 3));\n      Starfield.geometry.setAttribute('color', new BufferAttribute(color, 3));\n    }\n    if (!Starfield.material) {\n      Starfield.material = new PointsMaterial({\n        fog: false,\n        vertexColors: VertexColors,\n      });\n    }\n  }\n}\n\nexport default Starfield;\n","class API {\n  constructor() {\n    this.baseURL = __API__;\n  }\n\n  fetch({\n    body,\n    endpoint,\n    headers = {},\n    method = 'GET',\n  }) {\n    const {\n      authorization,\n      baseURL,\n    } = this;\n    if (authorization) {\n      headers.Authorization = authorization;\n    }\n    if (body && !(body instanceof FormData)) {\n      body = JSON.stringify(body);\n      headers['Content-Type'] = 'application/json';\n    }\n    return fetch(\n      `${baseURL}${endpoint}`,\n      {\n        body,\n        headers,\n        method,\n      }\n    )\n      .then((res) => {\n        const { headers, status } = res;\n        if (status < 200 || status >= 400) {\n          throw new Error(status);\n        }\n        const type = (headers.get('Content-Type') || '').split(';')[0];\n        switch (type) {\n          case 'text/plain':\n            return res.arrayBuffer();\n          case 'application/json':\n            return res.json();\n          default:\n            return res;\n        }\n      });\n  }\n\n  setAuthorization(token) {\n    if (token) {\n      this.authorization = `Bearer ${token}`;\n    } else {\n      delete this.authorization;\n    }\n    this.token = token;\n  }\n}\n\nexport default new API();\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { TiTimes } from 'react-icons/ti';\nimport styled from 'styled-components';\n\nconst Overlay = styled.div`\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background: rgba(0, 0, 0, .5);\n`;\n\nconst Wrapper = styled.div`\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 512px;\n  background: #444;\n  box-shadow: 0 0 32px rgba(0, 0, 0, .5);\n`;\n\nconst Heading = styled.div`\n  background: #111;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 56px;\n  > span {\n    padding: 0 1.5em;\n  }\n  > a {\n    padding: 1rem;\n    cursor: pointer;\n    > svg {\n      font-size: 1.5em;\n    }\n  }\n`;\n\nconst Content = styled.div`\n  > div {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    padding: 2rem 0;\n  }\n`;\n\nconst Popup = ({\n  children,\n  heading,\n  isShowing,\n  hide,\n}) => {\n  if (!isShowing) {\n    return null;\n  }\n  return (\n    <Overlay>\n      <Wrapper>\n        <Heading>\n          {heading}\n          <a\n            onClick={hide}\n          >\n            <TiTimes />\n          </a>\n        </Heading>\n        <Content>\n          {children}\n        </Content>\n      </Wrapper>\n    </Overlay>\n  );\n};\n\nPopup.propTypes = {\n  children: PropTypes.node.isRequired,\n  heading: PropTypes.node.isRequired,\n  isShowing: PropTypes.bool.isRequired,\n  hide: PropTypes.func.isRequired,\n};\n\nexport default Popup;\n","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"code/mesher.worker.3c93bf571945d59d5786.js\");\n};","import {\n  BoxGeometry,\n  BufferGeometry,\n  CanvasTexture,\n  DoubleSide,\n  Mesh,\n  MeshBasicMaterial,\n  PlaneBufferGeometry,\n  VertexColors,\n  Vector3,\n} from 'three';\n\nclass Panel extends Mesh {\n  constructor({\n    anisotropy,\n    width = 512,\n    height = 512,\n  }) {\n    if (\n      !Panel.backplate\n      || !Panel.geometry\n    ) {\n      Panel.setup();\n    }\n    const renderer = document.createElement('canvas');\n    renderer.width = width;\n    renderer.height = height;\n    const texture = new CanvasTexture(renderer);\n    texture.anisotropy = anisotropy;\n    super(\n      Panel.geometry,\n      new MeshBasicMaterial({\n        map: texture,\n      })\n    );\n    this.add(Panel.backplate.clone());\n    this.context = renderer.getContext('2d');\n    this.pointer = new Vector3();\n    this.renderer = renderer;\n    this.texture = texture;\n  }\n\n  dispose() {\n    const { material, texture } = this;\n    material.dispose();\n    texture.dispose();\n  }\n\n  draw() {\n    const {\n      context: ctx,\n      renderer,\n      texture,\n    } = this;\n    ctx.fillStyle = '#111';\n    ctx.fillRect(0, 0, renderer.width, renderer.height);\n    texture.needsUpdate = true;\n  }\n\n  onPointer(point) {\n    const { pointer, renderer } = this;\n    this.worldToLocal(pointer.copy(point));\n    pointer.set(\n      (pointer.x + 0.5) * renderer.width,\n      (1 - (pointer.y + 0.5)) * renderer.height,\n      0\n    );\n  }\n\n  static setup() {\n    if (!Panel.backplate) {\n      const geometry = new BoxGeometry(1, 1, 0.06);\n      geometry.faces.splice(8, 2);\n      geometry.faces.forEach((face, i) => (\n        face.color.setHex(\n          Math.floor(i / 2) === 4 ? 0x111111 : 0x222222\n        )\n      ));\n      geometry.translate(0, 0, -0.01);\n      const backplate = new Mesh(\n        (new BufferGeometry()).fromGeometry(geometry),\n        new MeshBasicMaterial({\n          side: DoubleSide,\n          vertexColors: VertexColors,\n        })\n      );\n      Panel.backplate = backplate;\n    }\n\n    if (!Panel.geometry) {\n      Panel.geometry = new PlaneBufferGeometry(1, 1);\n    }\n  }\n}\n\nexport default Panel;\n","import {\n  CanvasTexture,\n  NearestFilter,\n  RepeatWrapping,\n} from 'three';\n\nclass Noise extends CanvasTexture {\n  constructor() {\n    const renderer = document.createElement('canvas');\n    const ctx = renderer.getContext('2d');\n    renderer.width = 16;\n    renderer.height = 16;\n    const pixels = ctx.getImageData(0, 0, renderer.width, renderer.height);\n    for (let y = 0; y < renderer.height; y += 1) {\n      for (let x = 0; x < renderer.width; x += 1) {\n        let light = 0.9 + Math.random() * 0.05;\n        if (\n          x === 0\n          || x === renderer.width - 1\n          || y === 0\n          || y === renderer.height - 1\n        ) {\n          light *= 0.9;\n        } else if (\n          x === 1\n          || x === renderer.width - 2\n          || y === 1\n          || y === renderer.height - 2\n        ) {\n          light *= 1.2;\n        }\n        light = Math.floor(Math.min(Math.max(light, 0), 1) * 0xFF);\n        const i = (y * renderer.height + x) * 4;\n        pixels.data[i] = light;\n        pixels.data[i + 1] = light;\n        pixels.data[i + 2] = light;\n        pixels.data[i + 3] = 0xFF;\n      }\n    }\n    ctx.putImageData(pixels, 0, 0);\n    super(renderer);\n    this.magFilter = NearestFilter;\n    this.minFilter = NearestFilter;\n    this.wrapS = RepeatWrapping;\n    this.wrapT = RepeatWrapping;\n    this.needsUpdate = true;\n  }\n}\n\nexport default new Noise();\n","import Worker from '@/services/mesher.worker';\n\nclass Mesher {\n  constructor() {\n    this.promiseId = 0;\n    this.promises = {};\n    this.worker = new Worker();\n    this.worker.onmessage = this.onMessage.bind(this);\n  }\n\n  generate({ size, voxels }) {\n    const { promiseId, promises, worker } = this;\n    return new Promise((resolve) => {\n      promises[promiseId] = resolve;\n      this.promiseId += 1;\n      worker.postMessage({\n        promiseId,\n        size,\n        voxels,\n      });\n    });\n  }\n\n  onMessage({ data: { geometry, promiseId } }) {\n    const { promises } = this;\n    promises[promiseId](geometry);\n    delete promises[promiseId];\n  }\n}\n\nexport default new Mesher();\n","import * as types from './types';\nimport API from '@/services/api';\nimport Mesher from '@/services/mesher';\n\nexport function create() {\n  return {\n    type: types.REALM_CREATE,\n    payload: API.fetch({\n      endpoint: 'realm',\n      method: 'PUT',\n    }),\n  };\n}\n\nexport function generateGeometry({ size, voxels }) {\n  return {\n    type: types.REALM_UPDATE_GEOMETRY,\n    payload: Mesher.generate({ size, voxels }),\n  };\n}\n\nexport function fetch(slug) {\n  return (dispatch) => dispatch({\n    type: types.REALM_FETCH,\n    payload: API.fetch({\n      endpoint: `realm/${slug}`,\n    })\n      .then((realm) => (\n        API.fetch({\n          endpoint: `realm/${realm._id}/voxels`,\n        })\n          .then((voxels) => {\n            voxels = new Uint32Array(voxels);\n            dispatch(generateGeometry({ size: realm.size, voxels }));\n            return {\n              ...realm,\n              voxels,\n            };\n          })\n      )),\n  });\n}\n\nexport function hideMetadataPopup() {\n  return {\n    type: types.REALM_HIDE_METADATA_POPUP,\n  };\n}\n\nexport function reset() {\n  return {\n    type: types.REALM_RESET,\n  };\n}\n\nexport function showMetadataPopup() {\n  return {\n    type: types.REALM_SHOW_METADATA_POPUP,\n  };\n}\n\nexport function updateFog(fog) {\n  return (dispatch, getState) => {\n    const {\n      realm: {\n        id,\n        isCreator,\n      },\n    } = getState();\n    if (isCreator) {\n      // Send update to server\n      API.fetch({\n        body: { fog },\n        endpoint: `realm/${id}/metadata`,\n        method: 'PUT',\n      });\n    }\n    return dispatch({\n      type: types.REALM_UPDATE_FOG,\n      payload: { fog },\n    });\n  };\n}\n\nexport function updateMetadata({ name }) {\n  return (dispatch, getState) => {\n    const { realm: { id } } = getState();\n    return dispatch({\n      type: types.REALM_UPDATE_METADATA,\n      payload: API.fetch({\n        body: { name },\n        endpoint: `realm/${id}/metadata`,\n        method: 'PUT',\n      }),\n    });\n  };\n}\n\nexport function updateVoxels({\n  color,\n  normal,\n  point,\n  remove,\n}) {\n  return (dispatch, getState) => {\n    const {\n      realm: {\n        id,\n        isCreator,\n        size,\n        voxels: current,\n      },\n    } = getState();\n    // Normalize & 3D wrap voxel position\n    const [x, y, z] = ['x', 'y', 'z'].map((axis) => {\n      let position = Math.floor(point[axis] + (normal[axis] * 0.5 * (remove ? -1 : 1)));\n      while (position < 0) position += size;\n      while (position >= size) position -= size;\n      return position;\n    });\n    // Randomize the color just a bit\n    const randomized = {\n      r: Math.min(Math.max(Math.round((color.r * 0xFF) + (Math.random() * 8) - 4), 0), 255),\n      g: Math.min(Math.max(Math.round((color.g * 0xFF) + (Math.random() * 8) - 4), 0), 255),\n      b: Math.min(Math.max(Math.round((color.b * 0xFF) + (Math.random() * 8) - 4), 0), 255),\n    };\n    const value = remove ? (\n      0x00\n    ) : (\n      (0x01 << 24) | (randomized.r << 16) | (randomized.g << 8) | randomized.b\n    );\n    // Update the voxels data\n    const voxels = new Uint32Array(current);\n    voxels[z * size * size + y * size + x] = value;\n    // Request a geometry generation\n    dispatch(generateGeometry({ size, voxels }));\n    if (isCreator) {\n      // Send update to server\n      const body = new FormData();\n      body.append('voxels', new Blob([voxels.buffer], { type: 'text/plain' }));\n      API.fetch({\n        body,\n        endpoint: `realm/${id}/voxels`,\n        method: 'PUT',\n      });\n    }\n    return dispatch({\n      type: types.REALM_UPDATE_VOXELS,\n      payload: { voxels },\n    });\n  };\n}\n","// LOBBY\nexport const LOBBY_FETCH_REALMS = 'LOBBY/FETCH_REALMS';\nexport const LOBBY_FETCH_REALMS_FULFILLED = 'LOBBY/FETCH_REALMS_FULFILLED';\nexport const LOBBY_SET_FILTER = 'LOBBY/SET_FILTER';\nexport const LOBBY_SET_PAGE = 'LOBBY/SET_PAGE';\n\n// REALM\nexport const REALM_CREATE = 'REALM/CREATE';\nexport const REALM_CREATE_FULFILLED = 'REALM/CREATE_FULFILLED';\nexport const REALM_FETCH = 'REALM/FETCH';\nexport const REALM_FETCH_FULFILLED = 'REALM/FETCH_FULFILLED';\nexport const REALM_HIDE_METADATA_POPUP = 'REALM/HIDE_METADATA_POPUP';\nexport const REALM_RESET = 'REALM/RESET';\nexport const REALM_SHOW_METADATA_POPUP = 'REALM/SHOW_METADATA_POPUP';\nexport const REALM_UPDATE_FOG = 'REALM/UPDATE_FOG';\nexport const REALM_UPDATE_GEOMETRY = 'REALM/UPDATE_GEOMETRY';\nexport const REALM_UPDATE_GEOMETRY_FULFILLED = 'REALM/UPDATE_GEOMETRY_FULFILLED';\nexport const REALM_UPDATE_METADATA = 'REALM/UPDATE_METADATA';\nexport const REALM_UPDATE_METADATA_FULFILLED = 'REALM/UPDATE_METADATA_FULFILLED';\nexport const REALM_UPDATE_VOXELS = 'REALM/UPDATE_VOXELS';\n\n// USER\nexport const USER_HIDE_SESSION_POPUP = 'USER/HIDE_SESSION_POPUP';\nexport const USER_REFRESH_SESSION = 'USER/REFRESH_SESSION';\nexport const USER_REFRESH_SESSION_FULFILLED = 'USER/REFRESH_SESSION_FULFILLED';\nexport const USER_REFRESH_SESSION_REJECTED = 'USER/REFRESH_SESSION_REJECTED';\nexport const USER_SHOW_SESSION_POPUP = 'USER/SHOW_SESSION_POPUP';\nexport const USER_LOGIN = 'USER/LOGIN';\nexport const USER_LOGIN_FULFILLED = 'USER/LOGIN_FULFILLED';\nexport const USER_LOGIN_REJECTED = 'USER/LOGIN_REJECTED';\nexport const USER_REGISTER = 'USER/REGISTER';\nexport const USER_REGISTER_FULFILLED = 'USER/REGISTER_FULFILLED';\nexport const USER_REGISTER_REJECTED = 'USER/REGISTER_REJECTED';\nexport const USER_SIGNOUT = 'USER/SIGNOUT';\n","class Fonts {\n  constructor() {\n    this.loaded = {};\n  }\n\n  waitUntilLoaded(fonts) {\n    const { loaded } = this;\n    if (!Array.isArray(fonts)) {\n      fonts = [fonts];\n    }\n    return Promise.all(\n      fonts\n        .map((font) => (\n          new Promise((resolve) => {\n            if (loaded[font]) {\n              resolve();\n              return;\n            }\n            const check = () => {\n              if (document.fonts.check(`1rem ${font}`)) {\n                loaded[font] = true;\n                resolve();\n                return;\n              }\n              setTimeout(check, 10);\n            };\n            check();\n          })\n        ))\n    );\n  }\n}\n\nexport default new Fonts();\n","import {\n  CanvasTexture,\n  Mesh,\n  MeshBasicMaterial,\n  PlaneBufferGeometry,\n} from 'three';\nimport Fonts from '@/services/fonts';\n\nclass Title extends Mesh {\n  constructor({ anisotropy }) {\n    const renderer = document.createElement('canvas');\n    renderer.width = 1024;\n    renderer.height = 1024;\n    const texture = new CanvasTexture(renderer);\n    texture.anisotropy = anisotropy;\n    super(\n      new PlaneBufferGeometry(2, 2),\n      new MeshBasicMaterial({\n        map: texture,\n        transparent: true,\n      })\n    );\n    this.lookAt(0, -0.5, 1);\n    this.position.set(0, 2.5, -3);\n    this.renderer = renderer;\n    this.texture = texture;\n    this.visible = false;\n    Fonts\n      .waitUntilLoaded('Roboto')\n      .then(() => {\n        this.draw();\n        this.visible = true;\n      });\n  }\n\n  dispose() {\n    const { geometry, material, texture } = this;\n    geometry.dispose();\n    material.dispose();\n    texture.dispose();\n  }\n\n  draw() {\n    const { renderer, texture } = this;\n    const ctx = renderer.getContext('2d');\n    const subdivision = 8;\n    const radius = subdivision * 0.5;\n    const color = { r: 0x33, g: 0x99, b: 0x33 };\n    for (let y = 0; y < renderer.height; y += subdivision) {\n      for (let x = 0; x < renderer.width; x += subdivision) {\n        const a = (1 - (y / (renderer.height - subdivision)) + 0.1) / 3;\n        const l = Math.random() * 0.6 + 0.3;\n        ctx.fillStyle = `rgba(${Math.floor(color.r * l)}, ${Math.floor(color.g * l)}, ${Math.floor(color.b * l)}, ${a})`;\n        ctx.beginPath();\n        ctx.arc(x + radius, y + radius, radius * 0.75, 0, Math.PI * 2);\n        ctx.fill();\n      }\n    }\n    ctx.font = '700 200px Roboto';\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n    ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';\n    ctx.fillText(\n      'REALMS',\n      renderer.width * 0.5,\n      renderer.height * 0.21\n    );\n    ctx.font = '70px Roboto';\n    ctx.fillStyle = '#999';\n    ctx.fillText(\n      'A recursive VR experience',\n      renderer.width * 0.5,\n      renderer.height * 0.5\n    );\n    ctx.font = '50px Roboto';\n    ctx.fillStyle = '#696';\n    ctx.fillText(\n      `v${__VERSION__} - dani@gatunes  2019`,\n      renderer.width * 0.5,\n      renderer.height * 0.815\n    );\n    texture.needsUpdate = true;\n  }\n}\n\nexport default Title;\n"],"sourceRoot":""}