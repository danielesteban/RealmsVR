(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{0:function(e,t,n){n("55Il"),n("p2bk"),e.exports=n("7RL8")},1:function(e,t){},"4mAa":function(e,t,n){"use strict";var r=n("q1tI"),o=n.n(r),a=(n("MZFn"),n("Womt"));function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function i(){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),i.mesh&&i.pointerMesh||i.setup(),n=u(this,c(i).call(this));for(var r=i.mesh,o=i.pointerMesh,e=function(e){var t=r.clone();t.buttons={menu:!1,menuDown:!1,menuUp:!1,grip:!1,gripDown:!1,gripUp:!1,pad:!1,padDown:!1,padUp:!1,trigger:!1,triggerDown:!1,triggerUp:!1},t.pointer=o.clone(),t.pointer.visible=!1,t.add(t.pointer),t.matrixAutoUpdate=!1,t.setupRaycaster=function(e){return i.setupRaycaster({hand:t,raycaster:e})},t.visible=!1,n.add(t)},t=0;t<2;t+=1)e();return n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(i,a["r"]),function(e,t,n){t&&s(e.prototype,t),n&&s(e,n)}(i,[{key:"update",value:function(){var e=this.children,t="getGamepads"in navigator?navigator.getGamepads():[];e.forEach(function(e){e.visible=!1});for(var n=0,r=0;r<t.length;r+=1){var o=t[r];if(o&&("OpenVR Gamepad"===o.id||o.id.startsWith("Oculus Touch")||o.id.startsWith("Spatial Controller"))&&(o.pose&&this.updateHand({hand:e[n],buttons:o.buttons,pose:o.pose}),1<(n+=1)))break}}},{key:"updateHand",value:function(e){var t=e.hand,n=e.buttons,r=e.pose,o=this.standingMatrix;null!==r.position&&t.position.fromArray(r.position),null!==r.orientation&&t.quaternion.fromArray(r.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(o),t.matrixWorldNeedsUpdate=!0,t.visible=!0;var i=n[3]&&n[3].pressed;t.buttons.menuDown=i&&t.buttons.menu!==i,t.buttons.menuUp=!i&&t.buttons.menu!==i,t.buttons.menu=i;var a=n[2]&&n[2].pressed;t.buttons.gripDown=a&&t.buttons.grip!==a,t.buttons.gripUp=!a&&t.buttons.grip!==a,t.buttons.grip=a;var s=n[0]&&n[0].pressed;t.buttons.padDown=s&&t.buttons.pad!==s,t.buttons.padUp=!s&&t.buttons.pad!==s,t.buttons.pad=s;var u=n[1]&&n[1].pressed;t.buttons.triggerDown=u&&t.buttons.trigger!==u,t.buttons.triggerUp=!u&&t.buttons.trigger!==u,t.buttons.trigger=u}}],[{key:"setupRaycaster",value:function(e){var t=e.hand,n=e.raycaster;t.auxMatrix||(t.auxMatrix=new a.o);var r=t.auxMatrix,o=t.matrixWorld;r.identity().extractRotation(o),n.ray.origin.setFromMatrixPosition(o),n.ray.direction.set(0,0,-1).applyMatrix4(r),n.ray.origin.addScaledVector(n.ray.direction,-.175)}},{key:"setup",value:function(){if(!i.geometry){var e=new a.a(1,1,1);e.scale(.05,.03,.2),e.translate(0,0,.075),e.faces.forEach(function(e,t){e.color.set(7829367),10<=t&&t<=11&&e.color.offsetHSL(0,0,-.1)}),i.geometry=(new a.c).fromGeometry(e)}i.material||(i.material=new a.q({color:16769213})),i.mesh||(i.mesh=new a.p(i.geometry,i.material)),i.pointerGeometry||(i.pointerGeometry=(new a.c).setFromPoints([new a.D(0,0,0),new a.D(0,0,-1)])),i.pointerMaterial||(i.pointerMaterial=new a.n({color:16769213})),i.pointerMesh||(i.pointerMesh=new a.m(i.pointerGeometry,i.pointerMaterial))}}]),i}();function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=function(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?m(e):t}(this,y(n).call(this,e))).canvas=o.a.createRef(),t.onAnimationTick=t.onAnimationTick.bind(m(t)),t.onResize=t.onResize.bind(m(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(n,r["Component"]),function(e,t,n){t&&h(e.prototype,t),n&&h(e,n)}(n,[{key:"componentDidMount",value:function(){var e=this.canvas.current;this.isScreenshot=window.__SCREENSHOT__,this.camera=new a.s(80,1,.1,1024),this.clock=new a.e,this.raycaster=new a.x,this.room=new a.r,this.room.add(this.camera),this.hands=new f,this.room.add(this.hands),this.resetCamera(),this.resetScene();var t=new a.F({antialias:!0,canvas:e,powerPreference:"high-performance",stencil:!1});t.setPixelRatio(window.devicePixelRatio||1),t.setClearColor(this.scene.fog.color),t.setAnimationLoop(this.onAnimationTick),window.addEventListener("resize",this.onResize,!1),this.renderer=t,this.onResize(),this.setupVR()}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"onAnimationTick",value:function(){var e=this.camera,t=this.clock,n=this.hands,r=this.renderer,o=this.scene,i=this.stats;i&&i.begin(),r.animation={delta:t.getDelta(),time:t.oldTime/1e3},n.update(),r.render(o,e),i&&i.end()}},{key:"onResize",value:function(){var e=this.canvas.current,t=this.camera,n=this.renderer,r=e.parentNode.getBoundingClientRect(),o=r.width,i=r.height;this.width=o,this.height=i,n.vr.isPresenting()||n.setSize(o,i),t.aspect=o/i,t.updateProjectionMatrix()}},{key:"getMaxAnisotropy",value:function(){return this.renderer.capabilities.getMaxAnisotropy()}},{key:"setupVR",value:function(){var e=this.hands,n=this.renderer,t="xr"in navigator,r="getVRDisplays"in navigator;if(t){var o=function(){if(!n.vr.isPresenting()){var e=n.vr.getDevice();e?e.requestSession({immersive:!0,exclusive:!0}).then(function(e){n.vr.setSession(e,{frameOfReferenceType:"stage"})}):navigator.xr.requestDevice().then(function(e){n.vr.enabled=!0,n.vr.setDevice(e)})}};window.addEventListener("mousedown",o,!1),o()}else if(r){var i=function(){if(!n.vr.isPresenting()){var e=n.vr.getDevice();e?e.requestPresent([{source:n.domElement}]):navigator.getVRDisplays().then(function(e){if(e.length){var t=d(e,1)[0];n.vr.enabled=!0,n.vr.setDevice(t)}})}};window.addEventListener("mousedown",i,!1),window.addEventListener("vrdisplayactivate",i,!1),i()}e.standingMatrix=n.vr.getStandingMatrix()}},{key:"resetCamera",value:function(){var e=this.camera;e.position.set(0,1.25,0),e.rotation.set(0,0,0)}},{key:"resetScene",value:function(){return this.scene&&this.scene.children.forEach(function(e){e.dispose&&e.dispose()}),this.room.position.set(0,0,0),this.scene=new a.y,this.scene.add(this.room),this.scene.fog=new a.i(0,.0125),this.scene.fog.color.setRGB(.01,.01,.08),this.scene}},{key:"render",value:function(){var e=this.canvas;return o.a.createElement("canvas",{ref:e})}}]),n}();a.z.fog_pars_vertex=a.z.fog_pars_vertex.replace("varying float fogDepth;","varying vec4 fogDepth;"),a.z.fog_vertex=a.z.fog_vertex.replace("fogDepth = -mvPosition.z;","fogDepth = mvPosition;"),a.z.fog_pars_fragment=a.z.fog_pars_fragment.replace("varying float fogDepth;","varying vec4 fogDepth;"),a.z.fog_fragment=a.z.fog_fragment.replace("float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );",["float fogDist = length(fogDepth);","float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDist * fogDist * LOG2 ) );"].join("\n")).replace("float fogFactor = smoothstep( fogNear, fogFar, fogDepth );","float fogFactor = smoothstep( fogNear, fogFar, length(fogDepth) );");t.a=b},"7RL8":function(e,t,n){"use strict";n.r(t);var r=n("LhCv"),o=n("q1tI"),u=n.n(o),i=n("i8i4"),a=n("ANjH"),s=n("Igns"),c=n("/MKj"),l=n("gyEF"),f=n.n(l),p=n("Ty5D"),d=n("sINF"),h=n("97A4"),y=(n("bo1M"),n("wcCE")),m=n("N2Rb");var g={en:{User:{confirmPassword:"Confirm password",email:"Email",name:"Name",signIn:"Sign-In",signInWithGoogle:"Sign-In with Google",signOut:"Sign-Out",password:"Password",register:"Create an account"}},es:{User:{confirmPassword:"Confirmar contraseña",email:"Email",name:"Nombre",signIn:"Iniciar sesión",signInWithGoogle:"Iniciar sesión con Google",signOut:"Cerrar sesión",password:"Contraseña",register:"Crear una cuenta"}}},b=Object.keys(g),v={};b.forEach(function(e){v[e]=Object(y.recursive)(!0,g.en,g[e])});var w=n("vzVy");function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){E(t,e,n[e])})}return t}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=Object(a.c)({filter:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"all",t=1<arguments.length?arguments[1]:void 0;switch(t.type){case w.c:return t.payload.value;default:return e}},hasLoaded:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];switch((1<arguments.length?arguments[1]:void 0).type){case w.b:return!0;case w.f:return!1;default:return e}},pagination:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{page:0,pages:0},t=1<arguments.length?arguments[1]:void 0;switch(t.type){case w.b:return S({},e,{pages:t.payload.pages});case w.c:return S({},e,{page:0});case w.d:return S({},e,{page:t.payload.value});default:return e}},realms:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0;switch(t.type){case w.b:return t.payload.realms;default:return e}}}),x=Object(a.c)({geometry:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0;switch(t.type){case w.k:return t.payload;case w.i:return{};default:return e}},id:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length?arguments[1]:void 0;switch(t.type){case w.h:return t.payload._id;case w.i:return"";default:return e}},isCreator:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length?arguments[1]:void 0;switch(t.type){case w.h:return!!t.payload.isCreator;case w.i:return!1;default:return e}},name:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length?arguments[1]:void 0;switch(t.type){case w.h:return t.payload.name;case w.i:return"";default:return e}},size:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case w.h:return t.payload.size;case w.i:return 0;default:return e}},voxels:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Uint32Array,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case w.h:case w.l:return t.payload.voxels;case w.i:return new Uint32Array;default:return e}}}),_=n("dCQc");var R="REALMSVR::SESSION",k=JSON.parse(localStorage.getItem(R)||"false");k&&_.a.setAuthorization(k.token);var j=Object(a.c)({isAuth:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!!k;switch((1<arguments.length?arguments[1]:void 0).type){case w.q:case w.o:case w.t:return!0;case w.r:case w.v:return!1;default:return e}},isSigningIn:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];switch((1<arguments.length?arguments[1]:void 0).type){case w.u:return!0;case w.o:case w.m:case w.t:return!1;default:return e}},profile:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:k?k.profile:{},t=1<arguments.length?arguments[1]:void 0;switch(t.type){case w.q:case w.o:case w.t:var n=t.payload.profile;return function(o){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},t=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),t.forEach(function(e){var t,n,r;t=o,r=i[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r})}return o}({},n,{firstName:n.name.split(" ")[0]});case w.r:case w.v:return{};default:return e}},token:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:k?k.token:{},t=1<arguments.length?arguments[1]:void 0;switch(t.type){case w.q:case w.o:case w.t:return _.a.setAuthorization(t.payload.token),localStorage.setItem(R,JSON.stringify(t.payload)),t.payload.token;case w.r:case w.v:return _.a.setAuthorization(!1),localStorage.removeItem(R),"";default:return e}}}),P=Object(a.c)({i18n:m.i18nReducer,loadingBar:l.loadingBarReducer,lobby:O,realm:x,user:j}),C=n("vOnD"),A=C.a.a.withConfig({displayName:"github__Link",componentId:"sc-10jf6yn-0"})(["position:absolute;top:0;right:0;.octo-arm{transform-origin:130px 106px;}&:hover .octo-arm{animation:octocat-wave 560ms ease-in-out;}@keyframes octocat-wave{0%{transform:rotate(0deg);}20%{transform:rotate(-25deg);}40%{transform:rotate(10deg);}60%{transform:rotate(-25deg);}80%{transform:rotate(10deg);}100%{transform:rotate(0deg);}}"]),T=function(){return u.a.createElement(A,{href:"https://github.com/danielesteban/RealmsVR#readme",rel:"noopener noreferrer",target:"_blank"},u.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"80",height:"80",viewBox:"0 0 250 250",fill:"#fff"},u.a.createElement("path",{d:"M0 0l115 115h15l12 27 108 108V0z",fill:"#000"}),u.a.createElement("path",{className:"octo-arm",d:"M128 109c-15-9-9-19-9-19 3-7 2-11 2-11-1-7 3-2 3-2 4 5 2 11 2 11-3 10 5 15 9 16"}),u.a.createElement("path",{className:"octo-body",d:"M115 115s4 2 5 0l14-14c3-2 6-3 8-3-8-11-15-24 2-41 5-5 10-7 16-7 1-2 3-7 12-11 0 0 5 3 7 16 4 2 8 5 12 9s7 8 9 12c14 3 17 7 17 7-4 8-9 11-11 11 0 6-2 11-7 16-16 16-30 10-41 2 0 3-1 7-5 11l-12 11c-1 1 1 5 1 5z"})))};function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var F=C.a.div.withConfig({displayName:"music__Wrapper",componentId:"sc-1qpg9ee-0"})(["position:fixed;bottom:0;left:0;display:flex;align-items:flex-end;> a > img{width:100px;height:100px;background:#000;border:0;outline:none;vertical-align:middle;}> div{background:rgba(0,0,0,.5);font-size:1.4em;line-height:1.5em;padding:0.5rem 1rem;border-radius:0 4px 0 0;> a{display:block;text-decoration:none;outline:none;&:hover{text-decoration:underline;}}> a:nth-child(1){color:#eee;}> a:nth-child(2){color:#aaa;}}"]),q=function(e){function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=function(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?U(e):t}(this,D(a).call(this,e));for(var n=L(a.tracks),r=n.length-1;0<=r;r-=1){var o=Math.floor(Math.random()*n.length),i=n[r];n[r]=n[o],n[o]=i}return t.player=document.createElement("audio"),t.player.onended=t.next.bind(U(t)),t.player.volume=.5,t.state={track:void 0},t.tracks=n,t.track=0,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(a,o["PureComponent"]),function(e,t,n){t&&M(e.prototype,t),n&&M(e,n)}(a,[{key:"componentDidMount",value:function(){this.waitForFirstInteraction()}},{key:"waitForFirstInteraction",value:function(){var t=this,e=function e(){window.removeEventListener("mousedown",e),window.removeEventListener("touchstart",e),window.removeEventListener("vrdisplayactivate",e),t.play()};window.addEventListener("mousedown",e,!1),window.addEventListener("touchstart",e,!1),window.addEventListener("vrdisplayactivate",e,!1)}},{key:"next",value:function(){var e=this.player;e.paused||e.pause(),e.src="",this.track=(this.track+1)%this.tracks.length,this.play()}},{key:"play",value:function(){var t=this,n=this.player,e=this.track,r=this.tracks,o="client_id=eb5fcff9e107aab508431b4c3c416415",i=r[e];fetch("https://api.soundcloud.com/tracks/".concat(i,"?format=json&").concat(o)).then(function(e){return e.json()}).then(function(e){if(!e)throw new Error("Couldn't fetch track: ".concat(i));n.src="".concat(e.stream_url,"?").concat(o),n.play(),t.setState({track:e})}).catch(function(){return t.next()})}},{key:"render",value:function(){var e=this.state.track;if(!e)return null;var t=e.title,n=e.artwork_url,r=e.permalink_url,o=e.user,i=o.username,a=o.permalink_url,s=e.waveform_url;return u.a.createElement(F,null,u.a.createElement("a",{href:r,rel:"noopener noreferrer",target:"_blank"},u.a.createElement("img",{alt:t,src:n||s})),u.a.createElement("div",null,u.a.createElement("a",{href:r,rel:"noopener noreferrer",target:"_blank"},t),u.a.createElement("a",{href:a,rel:"noopener noreferrer",target:"_blank"},i)))}}]),a}();q.tracks=[334831124,3654595,3654647,62965282,55529274,40801532,28921242,58102473,65194517,44049414,584470,348172961,348172759,118227213,58103033,58102746,255599053,29062473,73664676,217254339,26016069,143994169,34751566,22899851,19645145,14604316,14604145,9747273,290203217,290202627,290203029,290203125,230280393,230280565,230280839,290202890,230280665,230280740,174033188,238809205,219872323,85441920,85442027,85442324,85442658,295429557,31232642,118720768,66345578,64979755,9747680,3654444,354826097,174209343,374346584,374346578,374346566,374346536,374346518,374346506,374346440,272272960,82537981,272272962,331110005,253646536,69972925,297108748,95089740,264157290,3654394,51204969,28460870,270165801,93513660,107137565,200476847,241036508,345846433,13728685,3193491,235796705,74366070,293115267,65027631,226460783,132730188,267647225,331743020,348075711,328602395,232135696,13385987,303726380];var N=q,G=n("4mAa"),B=n("17x9"),H=n.n(B),W=n("O1PE");function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var K=C.a.div.withConfig({displayName:"session__Wrapper",componentId:"sc-1avroa0-0"})(["position:fixed;top:0;right:0;bottom:0;left:0;background:rgba(0,0,0,.5);"]),Z=C.a.div.withConfig({displayName:"session__Popup",componentId:"sc-1avroa0-1"})(["position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:512px;background:#444;box-shadow:0 0 32px rgba(0,0,0,.5);"]),$=C.a.div.withConfig({displayName:"session__Heading",componentId:"sc-1avroa0-2"})(["background:#111;display:flex;align-items:center;justify-content:space-between;height:56px;.tabs{display:flex;height:100%;> a{display:flex;align-items:center;background:#222;padding:0 1rem;border-left:1px solid #333;cursor:pointer;&:first-child{border-left:none;}&.active{background:#444;cursor:default;}}}> a{padding:1rem;> svg{font-size:1.5em;}}"]),ee=C.a.div.withConfig({displayName:"session__Content",componentId:"sc-1avroa0-3"})(["display:flex;flex-grow:1;flex-direction:column;align-items:center;justify-content:center;padding:2rem 0;button{display:flex;align-items:center;border:1px solid #555;background:#222;padding:0.5rem 1rem;margin:0;font-family:inherit;font-weight:700;font-size:1.2rem;color:inherit;cursor:pointer;outline:0;> svg{font-size:1.5em;margin-right:0.5rem;}}.or{position:relative;width:100%;border-top:1px solid #222;margin:2rem 0;> span{position:absolute;display:block;left:50%;transform:translate(-50%,-50%);}}.google{display:flex;justify-content:center;}"]),te=C.a.form.withConfig({displayName:"session__Form",componentId:"sc-1avroa0-4"})(["display:none;flex-direction:column;align-items:center;width:80%;&.active{display:flex;}> label{width:100%;padding:0;}> input{box-sizing:border-box;border:1px solid #333;width:100%;background:#222;color:inherit;font-family:inherit;font-weight:400;font-size:2em;padding:0.5rem;margin:0 0 1rem;}"]),ne=function(e){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=function(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?J(e):t}(this,X(n).call(this,e))).onLoginSubmit=t.onLoginSubmit.bind(J(t)),t.onRegisterSubmit=t.onRegisterSubmit.bind(J(t)),t.state={tab:"login"},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(n,o["PureComponent"]),function(e,t,n){t&&Y(e.prototype,t),n&&Y(e,n)}(n,[{key:"onLoginSubmit",value:function(e){e.preventDefault();var t=e.target;(0,this.props.login)({email:t.email.value,password:t.password.value})}},{key:"onRegisterSubmit",value:function(e){e.preventDefault();var t=e.target,n=this.props.register;t.password.value===t.confirmPassword.value&&n({email:t.email.value,name:t.name.value,password:t.password.value})}},{key:"render",value:function(){var e=this,t=this.props,n=t.isSigningIn,r=t.hide,o=t.loginWithGoogle,i=this.state.tab;return n?u.a.createElement(K,null,u.a.createElement(Z,null,u.a.createElement($,null,u.a.createElement("div",{className:"tabs"},u.a.createElement("a",{className:"login"===i?"active":null,onClick:function(){return e.setState({tab:"login"})}},u.a.createElement(m.Translate,{value:"User.signIn"})),u.a.createElement("a",{className:"register"===i?"active":null,onClick:function(){return e.setState({tab:"register"})}},u.a.createElement(m.Translate,{value:"User.register"}))),u.a.createElement("a",{onClick:r},u.a.createElement(W.TiTimes,null))),u.a.createElement(ee,null,u.a.createElement(te,{className:"login"===i?"active":null,onSubmit:this.onLoginSubmit},u.a.createElement("label",null,u.a.createElement(m.Translate,{value:"User.email"})),u.a.createElement("input",{type:"email",name:"email",required:!0}),u.a.createElement("label",null,u.a.createElement(m.Translate,{value:"User.password"})),u.a.createElement("input",{type:"password",name:"password",required:!0}),u.a.createElement("button",{type:"submit"},u.a.createElement(W.TiKey,null),u.a.createElement(m.Translate,{value:"User.signIn"}))),u.a.createElement(te,{className:"register"===i?"active":null,onSubmit:this.onRegisterSubmit},u.a.createElement("label",null,u.a.createElement(m.Translate,{value:"User.name"})),u.a.createElement("input",{type:"text",name:"name",required:!0}),u.a.createElement("label",null,u.a.createElement(m.Translate,{value:"User.email"})),u.a.createElement("input",{type:"email",name:"email",required:!0}),u.a.createElement("label",null,u.a.createElement(m.Translate,{value:"User.password"})),u.a.createElement("input",{type:"password",name:"password",required:!0}),u.a.createElement("label",null,u.a.createElement(m.Translate,{value:"User.confirmPassword"})),u.a.createElement("input",{type:"password",name:"confirmPassword",required:!0}),u.a.createElement("button",{type:"submit"},u.a.createElement(W.TiKey,null),u.a.createElement(m.Translate,{value:"User.register"}))),u.a.createElement("div",{className:"or"},u.a.createElement(m.Translate,{value:"User.or"})),u.a.createElement("div",{className:"google"},u.a.createElement("button",{onClick:o,type:"button"},u.a.createElement(W.TiSocialGooglePlusCircular,null),u.a.createElement(m.Translate,{value:"User.signInWithGoogle"})))))):null}}]),n}();ne.propTypes={isSigningIn:H.a.bool.isRequired,hide:H.a.func.isRequired,login:H.a.func.isRequired,loginWithGoogle:H.a.func.isRequired,register:H.a.func.isRequired};var re=Object(c.connect)(function(e){return{isSigningIn:e.user.isSigningIn}},{hide:h.a,login:h.b,loginWithGoogle:h.c,register:h.e})(ne),oe=n("AULw"),ie=n("bCFX");function ae(){return(ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var se=function(e){var r=e.renderer;return u.a.createElement(p.d,null,[{path:"/",Component:oe.a},{path:"/:slug",Component:ie.a}].map(function(e){var t=e.path,n=e.Component;return u.a.createElement(p.b,{exact:!0,key:t,path:t,render:function(e){return u.a.createElement(n,ae({},e,{renderer:r}))}})}),u.a.createElement(p.a,{to:"/"}))};se.propTypes={renderer:H.a.shape({current:H.a.instanceOf(G.a)}).isRequired};var ue=se;function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e,t){return!t||"object"!==ce(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var he,ye,me,ge,be=C.a.div.withConfig({displayName:"layout__Wrapper",componentId:"d2i6t1-0"})(["width:100vw;height:100vh;"]),ve={backgroundColor:"#393",zIndex:1},we=function(e){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=fe(this,pe(n).call(this,e))).renderer=u.a.createRef(),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(n,o["PureComponent"]),function(e,t,n){t&&le(e.prototype,t),n&&le(e,n)}(n,[{key:"render",value:function(){var e=this.renderer,t=window.__SCREENSHOT__;return u.a.createElement("div",null,u.a.createElement(f.a,{style:ve}),u.a.createElement(be,null,u.a.createElement(G.a,{ref:e})),u.a.createElement(ue,{renderer:e}),u.a.createElement(N,null),t?null:u.a.createElement(T,null),u.a.createElement(re,null))}}]),n}(),Se=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,a.d),Ee=Object(a.e)(P,{},Se(Object(a.a)(d.a,s.a,Object(l.loadingBarMiddleware)())));he=Ee,ye=localStorage.getItem("REALMSVR::LOCALE"),me=((window.navigator.languages?window.navigator.languages[0]:null)||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage||"en").substr(0,2).toLowerCase(),ge="en",~b.indexOf(ye)?ge=ye:~b.indexOf(me)&&(ge=me),Object(m.syncTranslationWithStore)(he),he.dispatch(Object(m.loadTranslations)(v)),he.dispatch(Object(m.setLocale)(ge)),Ee.getState().user.isAuth&&Ee.dispatch(Object(h.d)());var Oe=Object(r.a)({basename:"/"});window.location.hash&&Oe.replace("/".concat(window.location.hash.substr(2))),window.addEventListener("contextmenu",function(e){return e.preventDefault()},!1);var xe=document.getElementById("mount");Object(i.render)(u.a.createElement(c.Provider,{store:Ee},u.a.createElement(p.c,{history:Oe},u.a.createElement(we,null))),xe)},"97A4":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"e",function(){return o}),n.d(t,"d",function(){return i}),n.d(t,"f",function(){return u}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return l}),n.d(t,"g",function(){return f});n("N2Rb");var a=n("vzVy"),s=n("dCQc");function r(){return{type:a.m}}function o(e){var t=e.email,n=e.name,r=e.password;return function(e){return e({type:a.s,payload:s.a.fetch({body:{email:t,name:n,password:r},endpoint:"user",method:"PUT"})}).catch(function(){})}}function i(){return function(e){return e({type:a.p,payload:s.a.fetch({endpoint:"user"})}).catch(function(){})}}function u(){return{type:a.u}}function c(e){var t=e.email,n=e.password;return function(e){return e({type:a.n,payload:s.a.fetch({body:{email:t,password:n},endpoint:"user",method:"POST"})}).catch(function(){})}}function l(){return function(o){var e=window.screen.width/2-256,t=window.screen.height/2-256,n=window.open("".concat(s.a.baseURL,"user/google"),"loginWithGoogle","width=".concat(512,",height=").concat(512,",top=").concat(t,",left=").concat(e)),i=setInterval(function(){n.window?n.postMessage(!0,s.a.baseURL):clearInterval(i)},100);window.addEventListener("message",function e(t){var n=t.origin,r=t.data.session;if(0===s.a.baseURL.indexOf(n)){if(window.removeEventListener("message",e),clearInterval(i),!r)return;o({type:a.o,payload:r})}},!1)}}function f(){return{type:a.v}}},AULw:function(e,m,O){"use strict";(function(g){var e=O("17x9"),t=O.n(e),n=O("q1tI"),r=O("/MKj"),o=O("1339"),b=O.n(o),i=O("QBLo"),a=O("vJ50"),s=O("97A4"),v=O("NaA/"),w=O("Xtfx"),S=O("awf5"),E=O("z+lE"),u=O("4mAa");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,p(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,n["PureComponent"]),function(e,t,n){t&&l(e.prototype,t),n&&l(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.filter,n=e.hasLoaded,r=e.history,o=e.isSigningIn,i=e.pagination,a=e.realms,s=e.user,u=e.renderer.current,c=e.createRealm,l=e.fetchRealms,f=e.setFilter,p=e.setPage,d=e.signin,h=e.signout,y=u.getMaxAnisotropy(),m=u.resetScene();m.add(new v.a),m.add(new S.a),m.add(new E.a({anisotropy:y})),this.menu=new w.a({anisotropy:y,filter:t,history:r,isSigningIn:o,pagination:i,realms:a,user:s,createRealm:c,setFilter:f,setPage:p,signin:d,signout:h}),m.add(this.menu),this.renderer=u,(this.scene=m).onBeforeRender=this.onBeforeRender.bind(this),u.renderer.vr.enabled||(this.touches=b()(window,{filtered:!0,target:u.canvas.current}).on("start",this.onPointerDown.bind(this))),n||l()}},{key:"componentDidUpdate",value:function(e){var t=e.filter,n=e.isSigningIn,r=e.pagination,o=e.realms,i=e.user,a=this.props,s=a.filter,u=a.isSigningIn,c=a.pagination,l=a.realms,f=a.user,p=a.fetchRealms,d=a.setFilter,h=this.menu,y=this.renderer.isScreenshot,m=s!==t;(m||c.page!==r.page)&&p(),m&&h.updateFilter(s),u!==n&&h.updateSession({isSigningIn:u}),c!==r&&h.updatePagination(c),l!==o&&(h.updateRealms(l),y&&g(function(){window.__SCREENSHOT_READY__=!0})),f!==i&&(h.updateSession({user:f}),f||"user"!==s||d("all"))}},{key:"componentWillUnmount",value:function(){var e=this.scene,t=this.touches;delete e.onBeforeRender,t&&t.disable()}},{key:"onBeforeRender",value:function(){var u=this.menu,e=this.renderer,t=e.hands,c=e.raycaster;t.children.forEach(function(e,t){var n=e.buttons,r=e.pointer;e.setupRaycaster(c);var o=c.intersectObjects(u.intersects)[0]||!1;if(!o)return r.visible=!1,void u.setHover({hand:t});var i=o.distance,a=o.object,s=o.point;r.scale.z=i-.175,r.visible=!0,a.onPointer({hand:t,isDown:n.triggerDown,point:s})})}},{key:"onPointerDown",value:function(e,t){var n=d(t,2),r=n[0],o=n[1],i=this.menu,a=this.props.isSigningIn,s=this.renderer,u=s.camera,c=s.raycaster,l=s.width,f=s.height;if(!a){c.setFromCamera({x:-2*Math.min(Math.max(.5-r/l,-.5),.5),y:2*Math.min(Math.max(.5-o/f,-.5),.5)},u);var p=c.intersectObjects(i.intersects)[0]||!1;p&&p.object.onPointer({hand:0,isDown:!0,point:p.point})}}},{key:"render",value:function(){return null}}]),t}();y.defaultProps={user:void 0},y.propTypes={filter:t.a.string.isRequired,hasLoaded:t.a.bool.isRequired,history:t.a.object.isRequired,isSigningIn:t.a.bool.isRequired,pagination:t.a.shape({page:t.a.number.isRequired,pages:t.a.number.isRequired}).isRequired,realms:t.a.arrayOf(t.a.shape({name:t.a.string.isRequired,slug:t.a.string.isRequired})).isRequired,renderer:t.a.shape({current:t.a.instanceOf(u.a)}).isRequired,user:t.a.shape({_id:t.a.string,name:t.a.string}),createRealm:t.a.func.isRequired,fetchRealms:t.a.func.isRequired,setFilter:t.a.func.isRequired,setPage:t.a.func.isRequired,signin:t.a.func.isRequired,signout:t.a.func.isRequired},m.a=Object(r.connect)(function(e){var t=e.lobby,n=t.filter,r=t.hasLoaded,o=t.pagination,i=t.realms,a=e.user,s=a.isAuth,u=a.isSigningIn,c=a.profile;return{filter:n,hasLoaded:r,isSigningIn:u,pagination:o,realms:i,user:s?c:void 0}},{createRealm:a.a,fetchRealms:i.a,setFilter:i.b,setPage:i.c,signin:s.f,signout:s.g})(y)}).call(this,O("URgk").setImmediate)},CEu6:function(e,t,n){"use strict";var y=n("Womt");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){function i(e){var t,n=e.instanced,r=void 0!==n&&n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=a(this,s(i).call(this)),r){var o=i.shader;t.geometry=new y.l,t.material=new y.B({vertexShader:o.vertex,fragmentShader:o.fragment,uniforms:o.uniforms,vertexColors:y.E,fog:!0})}else t.geometry=new y.c,t.material=new y.q({vertexColors:y.E});return t.instanced=r,t.visible=!1,t.aux={frustum:new y.j,matrix:new y.o},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(i,y["r"]),function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(i,[{key:"dispose",value:function(){var e=this.geometry,t=this.material;e.dispose(),t.dispose()}},{key:"resize",value:function(e){for(var t=this,n=this.children,r=this.geometry,o=this.instanced,i=this.material;n.length;)this.remove(n[0]);this.instances=[];for(var a=new y.D,s=new y.D,u=-8;u<=8;u+=1)for(var c=-8;c<=8;c+=1)for(var l=-8;l<=8;l+=1){var f=a.set(l,c,u).distanceTo(s);if(Math.round(f)<=8){var p=new y.p(r,i);p.chunk={x:l,y:c,z:u},p.distance=f,p.matrixAutoUpdate=!1,p.position.set(l*e,c*e,u*e),p.updateMatrix(),p.updateMatrixWorld(),this.instances.push(p)}}if(this.instances.sort(function(e,t){return e.distance-t.distance}),this.intersects=this.instances.filter(function(e){var t=e.chunk,n=t.x,r=t.y,o=t.z;return-2<=n&&n<=2&&-2<=r&&r<=2&&-2<=o&&o<=2}),o){var d=new y.p(r,i);d.frustumCulled=!1,this.add(d);var h=new Float32Array(3*this.instances.length);r.attributes.offset?r.attributes.offset.setArray(h):(r.addAttribute("offset",new y.k(h,3)),r.attributes.offset.setDynamic(!0)),r.maxInstancedCount=0}else this.instances.forEach(function(e){return t.add(e)})}},{key:"updateFrustum",value:function(e){var t=this.aux,n=t.frustum,r=t.matrix,o=this.geometry,i=this.instanced,a=this.instances;if(i&&a){r.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),n.setFromMatrix(r);var s=a.filter(function(e){var t=e.worldSphere;return t&&n.intersectsSphere(t)}).reduce(function(e,t){var n=t.position;return e.push(n.x,n.y,n.z),e},[]);o.attributes.offset.array.set(s),o.attributes.offset.needsUpdate=!0,o.maxInstancedCount=s.length/3}}},{key:"update",value:function(e){var t=e.index,n=e.position,r=e.color,o=e.normal,i=this.geometry,a=this.instances;i.attributes.position?(i.attributes.position.setArray(n),i.attributes.position.needsUpdate=!0):i.addAttribute("position",new y.b(n,3)),i.attributes.color?(i.attributes.color.setArray(r),i.attributes.color.needsUpdate=!0):i.addAttribute("color",new y.b(r,3)),i.attributes.normal?(i.attributes.normal.setArray(o),i.attributes.normal.needsUpdate=!0):i.addAttribute("normal",new y.b(o,3)),i.index?(i.index.setArray(t),i.index.needsUpdate=!0):i.setIndex(new y.b(t,1)),i.computeBoundingSphere(),a.forEach(function(e){e.worldSphere=i.boundingSphere.clone().applyMatrix4(e.matrixWorld)}),this.visible=!0}}]),i}();i.shader={vertex:y.A.basic.vertexShader.replace("#include <clipping_planes_pars_vertex>",["#include <clipping_planes_pars_vertex>","attribute vec3 offset;"].join("\n")).replace("#include <begin_vertex>",["vec3 transformed = vec3( offset + position );"].join("\n")),fragment:y.A.basic.fragmentShader,uniforms:y.C.clone(y.A.basic.uniforms)},t.a=i},"NaA/":function(e,t,n){"use strict";var r=n("Womt");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),t.geometry&&t.material||t.setup(),a(this,s(t).call(this,t.geometry,t.material))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["p"]),function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(t,null,[{key:"setup",value:function(){if(!t.geometry){var e=new r.u(256,256,256,256);e.rotateX(-.5*Math.PI);var n=new r.f;e.faces.forEach(function(e,t){t%2==1?e.color.copy(n):(e.color.setHex(6710869),e.color.offsetHSL(0,0,-.1*Math.random()),n.copy(e.color))}),t.geometry=(new r.c).fromGeometry(e)}t.material||(t.material=new r.q({vertexColors:r.E}))}}]),t}();t.a=c},QBLo:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return s});var i=n("vzVy"),a=n("dCQc");function r(){return function(e,t){var n=t().lobby,r=n.filter,o=n.pagination.page;return e({type:i.a,payload:a.a.fetch({endpoint:"realms/".concat("user"===r?"user/":"").concat(o)})})}}function o(e){return{type:i.c,payload:{value:e}}}function s(e){return{type:i.d,payload:{value:e}}}},SuMo:function(e,t,n){"use strict";var i=n("Womt"),r=n("kC7N"),a=n("yHfR");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t,n){return(S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function w(e){var t,n=e.anisotropy,r=e.history;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,w);var o=u(t=function(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?u(e):t}(this,E(w).call(this,{anisotropy:n}))).renderer;return t.position.set(-.15,.15,.075),t.rotation.set(0,.5*Math.PI,.1*Math.PI,"ZYX"),t.scale.set(.3,.3,1),t.block={x:.05*o.width,y:.05*o.height,width:.75*o.width,height:.75*o.height},t.strip={x:.85*o.width,y:.05*o.height,width:.1*o.width,height:.75*o.height},t.menu={x:.05*o.width,y:.85*o.height,width:.25*o.width,height:.1*o.height},t.blockColor=new i.f,t.color=new i.f,t.blockColor.setRGB(1,0,0),t.color.copy(t.blockColor),t.history=r,a.a.waitUntilLoaded("Roboto").then(function(){return t.draw()}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(w,r["a"]),function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(w,[{key:"draw",value:function(){var e=this.block,t=this.blockColor,n=this.color,r=this.context,o=this.menu,i=this.renderer,a=this.strip;S(E(w.prototype),"draw",this).call(this);var s=e.x,u=e.y,c=e.width,l=e.height;r.save(),r.translate(s,u),r.fillStyle="#".concat(t.getHexString()),r.fillRect(0,0,c,l);var f=r.createLinearGradient(0,0,c,0);f.addColorStop(0,"rgba(255,255,255,1)"),f.addColorStop(1,"rgba(255,255,255,0)"),r.fillStyle=f,r.fillRect(0,0,c,l);var p=r.createLinearGradient(0,0,0,l);p.addColorStop(0,"rgba(0,0,0,0)"),p.addColorStop(1,"rgba(0,0,0,1)"),r.fillStyle=p,r.fillRect(0,0,c,l),r.restore();var d=a.x,h=a.y,y=a.width,m=a.height;r.save(),r.translate(d,h);var g=r.createLinearGradient(0,0,0,m);g.addColorStop(0,"rgba(255, 0, 0, 1)"),g.addColorStop(.17,"rgba(255, 255, 0, 1)"),g.addColorStop(.34,"rgba(0, 255, 0, 1)"),g.addColorStop(.51,"rgba(0, 255, 255, 1)"),g.addColorStop(.68,"rgba(0, 0, 255, 1)"),g.addColorStop(.85,"rgba(255, 0, 255, 1)"),g.addColorStop(1,"rgba(255, 0, 0, 1)"),r.fillStyle=g,r.fillRect(0,0,y,m),r.restore(),r.save(),r.translate(o.x,o.y),r.fillStyle="#222",r.strokeStyle="#333",r.beginPath(),r.rect(0,0,o.width,o.height),r.fill(),r.stroke(),r.fillStyle="#fff",r.font="700 24px Roboto",r.textAlign="center",r.textBaseline="middle",r.fillText("« REALMS",.5*o.width,.5*o.height),r.restore(),r.save();var b=.25*i.width,v=.1*i.width;r.translate(.375*i.width,.85*i.height),r.fillStyle="#".concat(n.getHexString()),r.strokeStyle="#333",r.beginPath(),r.rect(0,0,b,v),r.fill(),r.stroke(),r.restore()}},{key:"onPointer",value:function(e){var a=this,t=this.block,s=this.blockColor,u=this.color,c=this.context,l=this.history,f=this.menu,p=this.pointer,d=this.strip;S(E(w.prototype),"onPointer",this).call(this,e),[t,d,f].forEach(function(e){var t=e.x,n=e.y,r=e.width,o=e.height;if(!(p.x<t||p.x>t+r||p.y<n||p.y>n+o))if(e!==f){var i=c.getImageData(p.x,p.y,1,1).data;e===d&&s.setRGB(i[0]/255,i[1]/255,i[2]/255),u.setRGB(i[0]/255,i[1]/255,i[2]/255),a.draw()}else l.goBack()})}}]),w}();t.a=l},Xtfx:function(e,t,n){"use strict";var r=n("Womt"),i=n("kC7N"),y=n("dCQc"),m=n("yHfR");function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){o(t,e,n[e])})}return t}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function v(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return b(this,t),t.geometry&&t.material||t.setup(),v(this,w(t).call(this,t.geometry,t.material))}return f(t,r["p"]),u(t,null,[{key:"setup",value:function(){if(!t.geometry){var e=new r.g(.025,.025,1,8,16);e.translate(0,-.575,0);var n=new r.f;e.faces.forEach(function(e,t){t%2==1?e.color.copy(n):(e.color.setHex(5596757),e.color.offsetHSL(0,0,-.1*Math.random()),n.copy(e.color))}),t.geometry=(new r.c).fromGeometry(e)}t.material||(t.material=new r.q({vertexColors:r.E}))}}]),t}(),d=function(e){function h(e){var t,n=e.anisotropy,r=e.name,o=e.creator,i=e.onPointer,a=e.screenshot;b(this,h),(t=v(this,w(h).call(this,{anisotropy:n}))).name=r,t.onPointer=i,t.scale.set(.3,.3,1);var s=t.renderer,u=s.width,c=s.height,l=t.context.createRadialGradient(.5*u,.5*c,.2*u,.5*u,.5*c,.5*u);l.addColorStop(0,"rgba(0, 0, 0, 0)"),l.addColorStop(1,"rgba(0, 0, 0, .5)"),t.vignette=l;var f=!1;if(m.a.waitUntilLoaded("Roboto").then(function(){f=!0,t.draw()}),o){var p=new Image;p.crossOrigin="anonymous",p.src="".concat(y.a.baseURL,"user/").concat(o._id,"/photo"),p.onload=function(){t.creator=p,f&&t.draw()}}if(a){var d=new Image;d.src="data:image/jpeg;base64,".concat(a),d.onload=function(){t.screenshot=d,f&&t.draw()}}return t}return f(h,i["a"]),u(h,[{key:"draw",value:function(){var e=this.context,t=this.creator,n=this.isHover,r=this.name,o=this.renderer,i=this.screenshot,a=this.vignette;l(w(h.prototype),"draw",this).call(this),i&&e.drawImage(i,0,0),e.fillStyle=a,e.fillRect(0,0,o.width,o.height),e.fillStyle="rgba(".concat(n?"255, 255, 255":"0, 0, 0",", .5)"),e.fillRect(0,.75*o.height,o.width,.25*o.height),e.font="40px Roboto",e.textAlign="left",e.textBaseline="middle",e.fillStyle=n?"#333":"#fff",t&&e.drawImage(t,0,.75*o.height,.25*o.width,.25*o.height),e.fillText(r,.05*o.width+o.width*(t?.25:.05),.875*o.height)}}]),h}(),h=function(e){function o(e){var t,n=e.anisotropy;return b(this,o),(t=v(this,w(o).call(this,{anisotropy:n,width:256,height:256}))).scale.set(.25,.25,1),t.hasLoadedFont=!1,m.a.waitUntilLoaded("Roboto").then(function(){t.hasLoadedFont=!0,t.draw()}),t}return f(o,i["a"]),u(o,[{key:"draw",value:function(){var e=this.buttons,u=this.context;l(w(o.prototype),"draw",this).call(this),u.font="700 30px Roboto",u.textAlign="center",u.textBaseline="middle",e.forEach(function(e){var t=e.label,n=e.x,r=e.y,o=e.width,i=e.height,a=e.isActive,s=e.isDisabled;u.save(),u.translate(n,r),u.beginPath(),u.rect(0,0,o,i),u.fillStyle=s?"#555":a?"#fff":"#222",u.strokeStyle="#333",u.fill(),u.stroke(),u.fillStyle=s?"#777":a?"#222":"#fff",u.fillText(t,.5*o,.5*i),u.restore()})}},{key:"onPointer",value:function(e){var t=e.isDown,n=e.point,r=this.buttons,a=this.pointer;t&&(l(w(o.prototype),"onPointer",this).call(this,n),r.filter(function(e){return!e.isDisabled}).forEach(function(e){var t=e.x,n=e.y,r=e.width,o=e.height,i=e.onPointer;a.x<t||a.x>t+r||a.y<n||a.y>n+o||i()}))}}]),o}(),S=function(e){function u(e){var t,n=e.anisotropy,r=e.history,o=e.createRealm;b(this,u),(t=v(this,w(u).call(this,{anisotropy:n}))).scale.set(.3,.3,1);var i=t.renderer,a=i.width,s=i.height;return t.buttons=[{label:"Create Realm",x:.1*a,y:.3*s,width:.8*a,height:.4*s,onPointer:function(){return o().then(function(e){var t=e.value;return r.push("/".concat(t))})}}],t}return f(u,h),u}(),E=function(e){function c(e){var t,n=e.anisotropy,r=e.page,o=e.pages,i=e.update;b(this,c);var a=(t=v(this,w(c).call(this,{anisotropy:n}))).renderer,s=a.width,u=a.height;return t.buttons=[{label:"<",x:.1*s,y:.3*u,width:.3*s,height:.4*u,onPointer:function(){0<t.page&&i(t.page-1)}},{label:">",x:.6*s,y:.3*u,width:.3*s,height:.4*u,onPointer:function(){t.page<t.pages-1&&i(t.page+1)}}],t.page=r,t.pages=o,t}return f(c,h),u(c,[{key:"draw",value:function(){var e=this.context,t=this.page,n=this.pages,r=this.renderer;l(w(c.prototype),"draw",this).call(this),e.fillStyle="#fff",e.fillText("".concat(t+1," / ").concat(n),.5*r.width,.85*r.height)}}]),c}(),O=function(e){function s(e){var t,n=e.anisotropy,r=e.isSigningIn,o=e.user,i=e.signin,a=e.signout;return b(this,s),(t=v(this,w(s).call(this,{anisotropy:n}))).signin=i,t.signout=a,t.updateSession({isSigningIn:r,user:o}),t}return f(s,h),u(s,[{key:"updateSession",value:function(e){var t=this,n=e.isSigningIn,r=e.user,o=this.renderer,i=this.signin,a=this.signout,s=o.width,u=o.height;if(this.buttons=n?[]:r?[{label:"Sign-Out",x:.1*s,y:.7*u,width:.8*s,height:.2*u,onPointer:a}]:[{label:"Sign-In",x:.1*s,y:.4*u,width:.8*s,height:.4*u,onPointer:i}],this.isSigningIn=n,this.user=r,delete this.userPhoto,r){var c=new Image;c.crossOrigin="anonymous",c.src="".concat(y.a.baseURL,"user/").concat(r._id,"/photo"),c.onload=function(){t.userPhoto=c,t.hasLoadedFont&&t.draw()}}}},{key:"draw",value:function(){var e=this.context,t=this.isSigningIn,n=this.renderer,r=this.user,o=this.userPhoto;l(w(s.prototype),"draw",this).call(this),e.fillStyle="#fff",t?(e.fillText("Remove your",.5*n.width,.25*n.height),e.fillText("headset",.5*n.width,.4*n.height),e.fillText("And Sign-In",.5*n.width,.6*n.height),e.fillText("in your browser",.5*n.width,.75*n.height)):e.fillText(r?r.firstName:"Guest",.5*n.width,.2*n.height),r&&o&&e.drawImage(o,.5*n.width-40,.5*n.height-50,80,80)}}]),s}(),x=function(e){function c(e){var t,n=e.anisotropy,r=e.isAuth,o=e.filter,i=e.update;b(this,c);var a=(t=v(this,w(c).call(this,{anisotropy:n}))).renderer,s=a.width,u=a.height;return t.buttons=[{id:"all",label:"All Realms",x:.1*s,y:.2*u,width:.8*s,height:.2*u,onPointer:function(){return i("all")}},{id:"user",label:"Your Realms",x:.1*s,y:.6*u,width:.8*s,height:.2*u,isDisabled:!r,onPointer:function(){return i("user")}}],t.filter=o,t.update=i,t}return f(c,h),u(c,[{key:"updateSession",value:function(e){var t=e.isAuth;this.buttons[1].isDisabled=!t}},{key:"draw",value:function(){var e=this.buttons,t=this.filter;e.forEach(function(e){e.isActive=e.id===t}),l(w(c.prototype),"draw",this).call(this)}}]),c}(),_=function(e){function h(e){var t,n=e.anisotropy,r=e.filter,o=e.history,i=e.isSigningIn,a=e.pagination,s=e.realms,u=e.user,c=e.createRealm,l=e.setFilter,f=e.setPage,p=e.signin,d=e.signout;return b(this,h),(t=v(this,w(h).call(this))).anisotropy=n,t.history=o,t.hover={},t.intersects=[],t.position.set(0,1,-1),t.pagination=t.addPanel(E,g({},a,{update:f}),0,-.3,.13),t.session=t.addPanel(O,{isSigningIn:i,user:u,signin:p,signout:d},-.3,-.3,.13),t.filter=t.addPanel(x,{filter:r,isAuth:!!u,update:l},.3,-.3,.13),t.createRealm=c,t.updateRealms(s),t}return f(h,r["r"]),u(h,[{key:"addPanel",value:function(e,t,n,r,o){var i=this.anisotropy,a=this.intersects,s=new e(g({},t,{anisotropy:i}));s.position.set(n,r,o),s.lookAt(0,.5,1),this.add(s);var u=new p;return u.position.copy(s.position),this.add(u),a.push(s),s}},{key:"dispose",value:function(){this.children.forEach(function(e){return e.dispose&&e.dispose()})}},{key:"setHover",value:function(e){var t=e.hand,n=e.realm,r=this.hover;r[t]!==n&&(r[t]&&(r[t].isHover=!1,r[t].draw()),n&&(n.isHover=!0,n.draw()),this.hover[t]=n)}},{key:"updateFilter",value:function(e){var t=this.filter;t.filter=e,t.draw()}},{key:"updatePagination",value:function(e){var t=e.page,n=e.pages,r=this.pagination;r.page=t,r.pages=n,r.draw()}},{key:"updateRealms",value:function(e){for(var i=this,t=this.anisotropy,n=this.children,r=this.createRealm,o=this.filter.filter,a=this.history,s=this.pagination;6<n.length;)this.remove(n[n.length-1]);this.intersects.length=3;var u="user"===o&&0===s.page,c=.25+-.25*(e.length+(u?1:0));u&&(this.addPanel(S,{history:a,createRealm:r},c,0,0),c+=.5),e.forEach(function(r,e){var o=i.addPanel(d,g({},r,{anisotropy:t,onPointer:function(e){var t=e.hand,n=e.isDown;i.setHover({hand:t,realm:o}),n&&a.push("/".concat(r.slug))}}),c+.5*e,0,0)})}},{key:"updateSession",value:function(e){var t=e.isSigningIn,n=e.user,r=this.filter,o=this.session;r.updateSession({isAuth:!!n}),r.draw(),o.updateSession({isSigningIn:t,user:n}),o.draw()}}]),h}();t.a=_},awf5:function(e,t,n){"use strict";var a=n("Womt");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),i.geometry&&i.material||i.setup(),s(this,u(i).call(this,i.geometry,i.material))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(i,a["v"]),function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(i,null,[{key:"setup",value:function(){if(!i.geometry){for(var e=new Float32Array(6144),t=new Float32Array(6144),n=new a.D,r=0;r<6144;r+=3){n.set(2*Math.random()-1,Math.random(),2*Math.random()-1).normalize().multiplyScalar(512),e[r]=n.x,e[r+1]=n.y,e[r+2]=n.z;var o=.2+.5*Math.random();t[r]=o-.1*Math.random(),t[r+1]=o-.1*Math.random(),t[r+2]=o-.1*Math.random()}(i.geometry=new a.c).addAttribute("position",new a.b(e,3)),i.geometry.addAttribute("color",new a.b(t,3))}i.material||(i.material=new a.w({fog:!1,vertexColors:a.E}))}}]),i}();t.a=i},bCFX:function(e,g,b){"use strict";(function(h){var e=b("17x9"),t=b.n(e),n=b("q1tI"),r=b("/MKj"),a=b("Womt"),o=b("vJ50"),i=b("4mAa"),s=b("SuMo"),u=b("CEu6");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function y(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,p(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,n["PureComponent"]),function(e,t,n){t&&l(e.prototype,t),n&&l(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match.params.slug,n=e.history,r=e.renderer.current,o=e.fetch,i=r.resetScene();this.picker=new s.a({anisotropy:r.getMaxAnisotropy(),history:n}),r.hands.children[1].add(this.picker),this.voxels=new u.a({instanced:!!r.renderer.extensions.get("ANGLE_instanced_arrays")}),i.add(this.voxels),this.head=new a.D,this.intersects=[this.picker],this.renderer=r,(this.scene=i).onBeforeRender=this.onBeforeRender.bind(this),o(t)}},{key:"componentDidUpdate",value:function(e){var t=e.geometry,n=e.size,r=this.props,o=r.geometry,i=r.size,a=this.renderer,s=a.isScreenshot,u=a.raycaster,c=a.room,l=a.renderer.vr,f=this.picker,p=this.voxels;if(i!==n&&(c.position.set(.5*i,.5*i,.5*i),p.resize(i),this.intersects=[f].concat(y(p.intersects))),o!==t){if(p.update(o),!t.index&&l.enabled){u.ray.origin.copy(c.position),u.ray.direction.set(0,-1,0);var d=u.intersectObjects(p.intersects)[0];d&&(c.position.y=d.point.y)}s&&h(function(){window.__SCREENSHOT_READY__=!0})}}},{key:"componentWillUnmount",value:function(){var e=this.picker,t=this.renderer,n=this.scene,r=this.props.reset;t.hands.children[1].remove(e),e.dispose(),delete n.onBeforeRender,r(),t.renderer.vr.enabled||t.resetCamera()}},{key:"onBeforeRender",value:function(e,t,d){var h=this.head,y=this.intersects,m=this.picker,n=this.props,g=n.size,b=n.updateVoxels,r=this.renderer,o=r.hands,i=r.isScreenshot,v=r.raycaster,w=r.room;this.voxels.updateFrustum(d),o.children.forEach(function(e){var t=e.buttons,n=e.pointer;e.setupRaycaster(v);var r=v.intersectObjects(y)[0]||!1;if(r){var o=r.distance,i=r.face.normal,a=r.object,s=r.point;if(n.scale.z=o-.175,n.visible=!0,a!==m){if(t.padDown&&0===i.x&&1===i.y&&0===i.z){h.setFromMatrixPosition(d.matrixWorld);var u={x:h.x-w.position.x,y:0,z:h.z-w.position.z},c=S(["x","y","z"].map(function(e){for(var t=s[e]-u[e];t<0;)t+=g;for(;g<=t;)t-=g;return t}),3),l=c[0],f=c[1],p=c[2];w.position.set(l,f,p)}(t.triggerDown||t.gripDown)&&b({color:m.color,point:s,normal:i,remove:t.gripDown})}else t.triggerDown&&m.onPointer(s)}else n.visible=!1});var a=e.animation,s=e.vr;if(!i&&!s.enabled&&g){var u=a.delta,c=a.time,l=.001*Math.sin(.1*c);d.rotateY(l),d.rotateX(l),d.translateZ(.5*u),d.updateMatrixWorld(),["x","y","z"].forEach(function(e){d.position[e]<0&&(d.position[e]+=g),d.position[e]>=g&&(d.position[e]-=g)})}}},{key:"render",value:function(){return null}}]),t}();m.propTypes={match:t.a.shape({params:t.a.shape({slug:t.a.string.isRequired}).isRequired}).isRequired,geometry:t.a.shape({index:t.a.instanceOf(Uint32Array),position:t.a.instanceOf(Float32Array),color:t.a.instanceOf(Float32Array),normal:t.a.instanceOf(Float32Array)}).isRequired,history:t.a.object.isRequired,size:t.a.number.isRequired,renderer:t.a.shape({current:t.a.instanceOf(i.a)}).isRequired,fetch:t.a.func.isRequired,reset:t.a.func.isRequired,updateVoxels:t.a.func.isRequired},g.a=Object(r.connect)(function(e){var t=e.realm;return{geometry:t.geometry,size:t.size}},{fetch:o.b,reset:o.c,updateVoxels:o.d})(m)}).call(this,b("URgk").setImmediate)},dCQc:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseURL="https://projects.gatunes.com/realmsvr/"}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(e,[{key:"fetch",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(e){var t=e.body,n=e.endpoint,r=e.headers,o=void 0===r?{}:r,i=e.method,a=void 0===i?"GET":i,s=this.authorization,u=this.baseURL;return s&&(o.Authorization=s),!t||t instanceof FormData||(t=JSON.stringify(t),o["Content-Type"]="application/json"),fetch("".concat(u).concat(n),{body:t,headers:o,method:a}).then(function(e){var t=e.headers,n=e.status;if(n<200||400<=n)throw new Error(n);switch((t.get("Content-Type")||"").split(";")[0]){case"text/plain":return e.arrayBuffer();case"application/json":return e.json();default:return e}})})},{key:"setAuthorization",value:function(e){e?this.authorization="Bearer ".concat(e):delete this.authorization,this.token=e}}]),e}();t.a=new o},f7Ve:function(e,t,n){e.exports=function(){return new Worker(n.p+"code/mesher.worker.1c22d4f82f07e694ad4e.js")}},kC7N:function(e,t,n){"use strict";var l=n("Womt");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=function(e){function c(e){var t,n=e.anisotropy,r=e.width,o=void 0===r?512:r,i=e.height,a=void 0===i?512:i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),c.backplate&&c.geometry||c.setup();var s=document.createElement("canvas");s.width=o,s.height=a;var u=new l.d(s);return u.anisotropy=n,(t=f(this,p(c).call(this,c.geometry,new l.q({map:u})))).add(c.backplate.clone()),t.context=s.getContext("2d"),t.pointer=new l.D,t.renderer=s,t.texture=u,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,l["p"]),function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(c,[{key:"dispose",value:function(){var e=this.material,t=this.texture;e.dispose(),t.dispose()}},{key:"draw",value:function(){var e=this.context,t=this.renderer,n=this.texture;e.fillStyle="#111",e.fillRect(0,0,t.width,t.height),n.needsUpdate=!0}},{key:"onPointer",value:function(e){var t=this.pointer,n=this.renderer;this.worldToLocal(t.copy(e)),t.set((t.x+.5)*n.width,(1-(t.y+.5))*n.height,0)}}],[{key:"setup",value:function(){if(!c.backplate){var e=new l.a(1,1,.06);e.faces.splice(8,2),e.faces.forEach(function(e,t){return e.color.setHex(4===Math.floor(t/2)?1118481:2236962)}),e.translate(0,0,-.01);var t=new l.p((new l.c).fromGeometry(e),new l.q({side:l.h,vertexColors:l.E}));c.backplate=t}c.geometry||(c.geometry=new l.t(1,1))}}]),c}();t.a=a},p2bk:function(e,t,n){},vJ50:function(e,t,n){"use strict";var S=n("vzVy"),E=n("dCQc"),r=n("f7Ve"),o=n.n(r);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.promiseId=0,this.promises={},this.worker=new o.a,this.worker.onmessage=this.onMessage.bind(this)}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"generate",value:function(e){var t=this,n=e.size,r=e.voxels,o=this.promiseId,i=this.promises,a=this.worker;return new Promise(function(e){i[o]=e,t.promiseId+=1,a.postMessage({promiseId:o,size:n,voxels:r})})}},{key:"onMessage",value:function(e){var t=e.data,n=t.geometry,r=t.promiseId,o=this.promises;o[r](n),delete o[r]}}]),e}());function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(){return{type:S.e,payload:E.a.fetch({endpoint:"realm",method:"PUT"})}}function x(e){var t=e.size,n=e.voxels;return{type:S.j,payload:a.generate({size:t,voxels:n})}}function u(e){return function(n){return n({type:S.g,payload:E.a.fetch({endpoint:"realm/".concat(e)}).then(function(t){return E.a.fetch({endpoint:"realm/".concat(t._id,"/voxels")}).then(function(e){return e=new Uint32Array(e),n(x({size:t.size,voxels:e})),function(o){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},t=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),t.forEach(function(e){var t,n,r;t=o,r=i[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r})}return o}({},t,{voxels:e})})})})}}function c(){return{type:S.i}}function l(e){var g=e.color,b=e.normal,v=e.point,w=e.remove;return function(e,t){var n=t().realm,r=n.id,o=n.isCreator,i=n.size,a=n.voxels,s=O(["x","y","z"].map(function(e){for(var t=Math.floor(v[e]+.5*b[e]*(w?-1:1));t<0;)t+=i;for(;i<=t;)t-=i;return t}),3),u=s[0],c=s[1],l=s[2],f=Math.min(Math.max(Math.round(255*g.r+8*Math.random()-4),0),255),p=Math.min(Math.max(Math.round(255*g.g+8*Math.random()-4),0),255),d=Math.min(Math.max(Math.round(255*g.b+8*Math.random()-4),0),255),h=w?0:1<<24|f<<16|p<<8|d,y=new Uint32Array(a);if(y[l*i*i+c*i+u]=h,e(x({size:i,voxels:y})),o){var m=new FormData;m.append("voxels",new Blob([y.buffer],{type:"text/plain"})),E.a.fetch({body:m,endpoint:"realm/".concat(r,"/voxels"),method:"PUT"})}return e({type:S.l,payload:{voxels:y}})}}n.d(t,"a",function(){return s}),n.d(t,"b",function(){return u}),n.d(t,"c",function(){return c}),n.d(t,"d",function(){return l})},vzVy:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return a}),n.d(t,"e",function(){return s}),n.d(t,"f",function(){return u}),n.d(t,"g",function(){return c}),n.d(t,"h",function(){return l}),n.d(t,"j",function(){return f}),n.d(t,"k",function(){return p}),n.d(t,"l",function(){return d}),n.d(t,"i",function(){return h}),n.d(t,"m",function(){return y}),n.d(t,"p",function(){return m}),n.d(t,"q",function(){return g}),n.d(t,"r",function(){return b}),n.d(t,"u",function(){return v}),n.d(t,"n",function(){return w}),n.d(t,"o",function(){return S}),n.d(t,"s",function(){return E}),n.d(t,"t",function(){return O}),n.d(t,"v",function(){return x});var r="LOBBY/FETCH_REALMS",o="LOBBY/FETCH_REALMS_FULFILLED",i="LOBBY/SET_FILTER",a="LOBBY/SET_PAGE",s="REALM/CREATE",u="REALM/CREATE_FULFILLED",c="REALM/FETCH",l="REALM/FETCH_FULFILLED",f="REALM/UPDATE_GEOMETRY",p="REALM/UPDATE_GEOMETRY_FULFILLED",d="REALM/UPDATE_VOXELS",h="REALM/RESET",y="USER/HIDE_SESSION_POPUP",m="USER/REFRESH_SESSION",g="USER/REFRESH_SESSION_FULFILLED",b="USER/REFRESH_SESSION_REJECTED",v="USER/SHOW_SESSION_POPUP",w="USER/LOGIN",S="USER/LOGIN_FULFILLED",E="USER/REGISTER",O="USER/REGISTER_FULFILLED",x="USER/SIGNOUT"},yHfR:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.loaded={}}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(e,[{key:"waitUntilLoaded",value:function(e){var r=this.loaded;return Array.isArray(e)||(e=[e]),Promise.all(e.map(function(n){return new Promise(function(t){if(r[n])t();else{!function e(){if(document.fonts.check("1rem ".concat(n)))return r[n]=!0,void t();setTimeout(e,10)}()}})}))}}]),e}();t.a=new o},"z+lE":function(e,t,n){"use strict";var a=n("Womt"),s=n("yHfR");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){function i(e){var t,n=e.anisotropy;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=document.createElement("canvas");r.width=1024,r.height=1024;var o=new a.d(r);return o.anisotropy=n,(t=u(this,c(i).call(this,new a.t(2,2),new a.q({map:o,transparent:!0})))).lookAt(0,-.2,1),t.position.set(0,2,-3),t.renderer=r,t.texture=o,s.a.waitUntilLoaded("Roboto").then(function(){return t.draw()}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(i,a["p"]),function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(i,[{key:"dispose",value:function(){var e=this.geometry,t=this.material,n=this.texture;e.dispose(),t.dispose(),n.dispose()}},{key:"draw",value:function(){var e=this.renderer,t=this.texture,n=e.getContext("2d"),r=n.createLinearGradient(0,0,0,e.height);r.addColorStop(0,"rgba(0, 0, 0, 0.3)"),r.addColorStop(1,"rgba(0, 0, 0, 0)"),n.fillStyle=r,n.fillRect(0,0,e.width,e.height),n.font="700 200px Roboto",n.textAlign="center",n.textBaseline="middle",n.fillStyle="#eee",n.shadowColor="rgba(255, 255, 0, .5)",n.shadowBlur=50,n.fillText("REALMS",.5*e.width,.2*e.height),n.font="70px Roboto",n.fillStyle="#999",n.shadowBlur=0,n.fillText("A recursive VR experience",.5*e.width,.5*e.height),n.font="50px Roboto",n.fillStyle="#999",n.fillText("v".concat("0.1.10"," - dani@gatunes © 2019"),.5*e.width,.8*e.height),t.needsUpdate=!0}}]),i}();t.a=i}},[[0,1,2]]]);
//# sourceMappingURL=main.3c25bc92fd7f8972ad5b619f32ba91ca.js.map