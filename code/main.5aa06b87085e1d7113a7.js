(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{"+dvs":function(e,t,n){"use strict";(function(e){var r=n("17x9"),o=n.n(r),i=n("q1tI"),a=n("/MKj"),s=n("1339"),u=n.n(s),c=n("QBLo"),l=n("vJ50"),f=n("97A4"),p=n("NaA/"),d=n("Xtfx"),h=n("awf5"),y=n("z+lE"),m=n("4mAa");function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var O=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),w(this,E(n).apply(this,arguments))}var r,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(n,i["PureComponent"]),r=n,(o=[{key:"componentDidMount",value:function(){var e=this.props,t=e.filter,n=e.hasLoaded,r=e.history,o=e.isSigningIn,i=e.pagination,a=e.realms,s=e.user,c=e.renderer.current,l=e.createRealm,f=e.fetchRealms,m=e.setFilter,b=e.setPage,g=e.signin,v=e.signout,w=c.getMaxAnisotropy(),E=c.resetScene();E.add(new p.a),E.add(new h.a),E.add(new y.a({anisotropy:w})),this.menu=new d.a({anisotropy:w,filter:t,history:r,isSigningIn:o,pagination:i,realms:a,user:s,createRealm:l,setFilter:m,setPage:b,signin:g,signout:v}),E.add(this.menu),this.renderer=c,this.scene=E,E.onBeforeRender=this.onBeforeRender.bind(this),c.renderer.vr.enabled||(this.touches=u()(window,{filtered:!0,target:c.canvas.current}).on("start",this.onPointerDown.bind(this))),n||f()}},{key:"componentDidUpdate",value:function(t){var n=t.filter,r=t.isSigningIn,o=t.pagination,i=t.realms,a=t.user,s=this.props,u=s.filter,c=s.isSigningIn,l=s.pagination,f=s.realms,p=s.user,d=s.fetchRealms,h=s.setFilter,y=this.menu,m=this.renderer.isScreenshot,b=u!==n;(b||l.page!==o.page)&&d(),b&&y.updateFilter(u),c!==r&&y.updateSession({isSigningIn:c}),l!==o&&y.updatePagination(l),f!==i&&(y.updateRealms(f),m&&e(function(){window.__SCREENSHOT_READY__=!0})),p!==a&&(y.updateSession({user:p}),p||"user"!==u||h("popular"))}},{key:"componentWillUnmount",value:function(){var e=this.scene,t=this.touches;delete e.onBeforeRender,t&&t.disable()}},{key:"onBeforeRender",value:function(){var e=this.menu,t=this.renderer,n=t.hands,r=t.raycaster;n.children.forEach(function(t,n){var o=t.buttons,i=t.pointer;t.setupRaycaster(r);var a=r.intersectObjects(e.intersects)[0]||!1;if(!a)return i.visible=!1,void e.setHover({hand:n});var s=a.distance,u=a.object,c=a.point;i.scale.z=s-.175,i.visible=!0,u.onPointer({hand:n,isDown:o.triggerDown,point:c})})}},{key:"onPointerDown",value:function(e,t){var n=g(t,2),r=n[0],o=n[1],i=this.menu,a=this.props.isSigningIn,s=this.renderer,u=s.camera,c=s.raycaster,l=s.width,f=s.height;if(!a){c.setFromCamera({x:-2*Math.min(Math.max(.5-r/l,-.5),.5),y:2*Math.min(Math.max(.5-o/f,-.5),.5)},u);var p=c.intersectObjects(i.intersects)[0]||!1;p&&p.object.onPointer({hand:0,isDown:!0,point:p.point})}}},{key:"render",value:function(){return null}}])&&v(r.prototype,o),a&&v(r,a),n}();O.defaultProps={user:void 0},O.propTypes={filter:o.a.string.isRequired,hasLoaded:o.a.bool.isRequired,history:o.a.object.isRequired,isSigningIn:o.a.bool.isRequired,pagination:o.a.shape({page:o.a.number.isRequired,pages:o.a.number.isRequired}).isRequired,realms:o.a.arrayOf(o.a.shape({name:o.a.string.isRequired,slug:o.a.string.isRequired})).isRequired,renderer:o.a.shape({current:o.a.instanceOf(m.a)}).isRequired,user:o.a.shape({_id:o.a.string,name:o.a.string}),createRealm:o.a.func.isRequired,fetchRealms:o.a.func.isRequired,setFilter:o.a.func.isRequired,setPage:o.a.func.isRequired,signin:o.a.func.isRequired,signout:o.a.func.isRequired},t.a=Object(a.connect)(function(e){var t=e.lobby,n=t.filter,r=t.hasLoaded,o=t.pagination,i=t.realms,a=e.user,s=a.isAuth,u=a.isSigningIn,c=a.profile;return{filter:n,hasLoaded:r,isSigningIn:u,pagination:o,realms:i,user:s?c:void 0}},{createRealm:l.a,fetchRealms:c.a,setFilter:c.b,setPage:c.c,signin:f.f,signout:f.g})(O)}).call(this,n("URgk").setImmediate)},0:function(e,t,n){n("55Il"),n("p2bk"),e.exports=n("7RL8")},1:function(e,t){},2:function(e,t){},3:function(e,t){},"4mAa":function(e,t,n){"use strict";var r=n("q1tI"),o=n.n(r),i=(n("MZFn"),n("Womt")),a=n("xaIH"),s=n.n(a);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){var n,r,o,a=e.canvas;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=l(t).call(this,70,1,.1,1024))||"object"!==u(o)&&"function"!=typeof o?f(r):o).canvas=a,n.rotation.order="YXZ",n.aux={direction:new i.G,forward:new i.G,right:new i.G,up:new i.G,worldUp:new i.G(0,1,0)},n.input={keyboard:new i.G(0,0,0),pointer:new i.F(0,0)},n.onBlur=n.onBlur.bind(f(n)),n.onKeyboardDown=n.onKeyboardDown.bind(f(n)),n.onKeyboardUp=n.onKeyboardUp.bind(f(n)),n.reset(),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,i["t"]),n=t,(r=[{key:"onBlur",value:function(){this.input.keyboard.set(0,0,0)}},{key:"onKeyboardDown",value:function(e){var t=e.keyCode,n=e.repeat,r=this.input.keyboard;if(!n)switch(t){case 65:r.x=-1;break;case 68:r.x=1;break;case 16:r.y=-1;break;case 32:r.y=1;break;case 83:r.z=-1;break;case 87:r.z=1}}},{key:"onKeyboardUp",value:function(e){var t=e.keyCode,n=e.repeat,r=this.input.keyboard;if(!n)switch(t){case 65:r.x<0&&(r.x=0);break;case 68:r.x>0&&(r.x=0);break;case 16:r.y<0&&(r.y=0);break;case 32:r.y>0&&(r.y=0);break;case 83:r.z<0&&(r.z=0);break;case 87:r.z>0&&(r.z=0)}}},{key:"onPointerLockAttain",value:function(e){this.isLocked=!0,this.rotation.z=0,window.addEventListener("blur",this.onBlur,!1),window.addEventListener("keydown",this.onKeyboardDown,!1),window.addEventListener("keyup",this.onKeyboardUp,!1),e.on("data",this.onPointerMovement.bind(this)),e.on("close",this.onPointerLockClose.bind(this))}},{key:"onPointerLockClose",value:function(){var e=this.input,t=e.keyboard,n=e.pointer;window.removeEventListener("blur",this.onBlur),window.removeEventListener("keydown",this.onKeyboardDown),window.removeEventListener("keyup",this.onKeyboardUp),this.isLocked=!1,t.set(0,0),n.set(0,0)}},{key:"onPointerMovement",value:function(e){var t=e.dx,n=e.dy;this.input.pointer.set(t,n)}},{key:"onAnimationTick",value:function(e){var t=e.delta,n=this.isLocked,r=this.input,o=r.keyboard,i=r.pointer,a=this.rotation,s=this.position;if(n){if(0!==i.x||0!==i.y){a.y-=.003*i.x,a.x-=.003*i.y;var u=Math.PI/2;a.x=Math.max(-u,Math.min(u,a.x)),i.set(0,0)}if(0!==o.x||0!==o.y||0!==o.z){var c=this.aux,l=c.direction,f=c.forward,p=c.right,d=c.up,h=c.worldUp;this.getWorldDirection(f),p.crossVectors(f,h).normalize(),d.crossVectors(p,f).normalize(),l.set(0,0,0).addScaledVector(p,o.x).addScaledVector(d,o.y).addScaledVector(f,o.z).normalize(),s.addScaledVector(l,6*t),this.updateMatrixWorld()}}}},{key:"reset",value:function(){var e=this.position,t=this.rotation;e.set(0,1.5,.5),t.set(0,0,0),this.lookAt(0,1.5,.5),this.canLock=!1}},{key:"canLock",get:function(){return this._canLock},set:function(e){e&&!this.pointerlock&&s.a.available()&&(this.pointerlock=s()(this.canvas),this.pointerlock.on("attain",this.onPointerLockAttain.bind(this))),!e&&this.pointerlock&&(this.pointerlock.destroy(),delete this.pointerlock),this._canLock=e}}])&&c(n.prototype,r),o&&c(n,o),t}(),h=n("ooUw");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),t.mesh&&t.pointerMesh||t.setup(),e=b(this,g(t).call(this));for(var n=t.mesh,r=t.pointerMesh,o=function(o){var i=n.clone();i.buttons={menu:!1,menuDown:!1,menuUp:!1,grip:!1,gripDown:!1,gripUp:!1,pad:!1,padDown:!1,padUp:!1,trigger:!1,triggerDown:!1,triggerUp:!1},i.pointer=r.clone(),i.pointer.visible=!1,i.add(i.pointer),i.matrixAutoUpdate=!1,i.setupRaycaster=function(e){return t.setupRaycaster({hand:i,raycaster:e})},i.visible=!1,e.add(i)},i=0;i<2;i+=1)o();return e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,i["s"]),n=t,o=[{key:"setupRaycaster",value:function(e){var t=e.hand,n=e.raycaster;t.auxMatrix||(t.auxMatrix=new i.o);var r=t.auxMatrix,o=t.matrixWorld;r.identity().extractRotation(o),n.ray.origin.setFromMatrixPosition(o),n.ray.direction.set(0,0,-1).applyMatrix4(r),n.ray.origin.addScaledVector(n.ray.direction,-.175)}},{key:"setup",value:function(){if(!t.geometry){var e=new i.a(1,1,1);e.scale(.05,.03,.2),e.translate(0,0,.075),e.faces.forEach(function(e,t){e.color.set(7829367),t>=10&&t<=11&&e.color.offsetHSL(0,0,-.1)}),t.geometry=(new i.c).fromGeometry(e)}t.material||(t.material=new i.q({color:16769213,map:h.a})),t.mesh||(t.mesh=new i.p(t.geometry,t.material)),t.pointerGeometry||(t.pointerGeometry=(new i.c).setFromPoints([new i.G(0,0,0),new i.G(0,0,-1)])),t.pointerMaterial||(t.pointerMaterial=new i.n({color:16769213})),t.pointerMesh||(t.pointerMesh=new i.m(t.pointerGeometry,t.pointerMaterial))}}],(r=[{key:"update",value:function(){var e=this.children,t="getGamepads"in navigator?navigator.getGamepads():[];e.forEach(function(e){e.visible=!1});for(var n=0,r=0;r<t.length;r+=1){var o=t[r];if(o&&("OpenVR Gamepad"===o.id||o.id.startsWith("Oculus Touch")||o.id.startsWith("Spatial Controller"))&&(o.pose&&this.updateHand({hand:e[n],buttons:o.buttons,pose:o.pose}),(n+=1)>1))break}}},{key:"updateHand",value:function(e){var t=e.hand,n=e.buttons,r=e.pose,o=this.standingMatrix;null!==r.position&&t.position.fromArray(r.position),null!==r.orientation&&t.quaternion.fromArray(r.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(o),t.matrixWorldNeedsUpdate=!0,t.visible=!0;var i=n[3]&&n[3].pressed;t.buttons.menuDown=i&&t.buttons.menu!==i,t.buttons.menuUp=!i&&t.buttons.menu!==i,t.buttons.menu=i;var a=n[2]&&n[2].pressed;t.buttons.gripDown=a&&t.buttons.grip!==a,t.buttons.gripUp=!a&&t.buttons.grip!==a,t.buttons.grip=a;var s=n[0]&&n[0].pressed;t.buttons.padDown=s&&t.buttons.pad!==s,t.buttons.padUp=!s&&t.buttons.pad!==s,t.buttons.pad=s;var u=n[1]&&n[1].pressed;t.buttons.triggerDown=u&&t.buttons.trigger!==u,t.buttons.triggerUp=!u&&t.buttons.trigger!==u,t.buttons.trigger=u}}])&&m(n.prototype,r),o&&m(n,o),t}();function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var R=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=x(t).call(this,e))||"object"!==E(i)&&"function"!=typeof i?k(r):i).canvas=o.a.createRef(),n.onAnimationTick=n.onAnimationTick.bind(k(n)),n.onResize=n.onResize.bind(k(n)),n}var n,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=this.canvas.current;this.isScreenshot=window.__SCREENSHOT__,this.camera=new d({canvas:e}),this.clock=new i.e,this.fog=new i.i(0,.0125),this.raycaster=new i.y;var t=new i.I({antialias:!0,canvas:e,powerPreference:"high-performance",stencil:!1});t.setPixelRatio(window.devicePixelRatio||1),t.setAnimationLoop(this.onAnimationTick),window.addEventListener("resize",this.onResize,!1),this.renderer=t,this.room=new i.s,this.room.add(this.camera),this.hands=new w,this.room.add(this.hands),this.resetScene(),this.onResize(),this.setupVR()}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"onAnimationTick",value:function(){var e=this.camera,t=this.clock,n=this.hands,r=this.renderer,o=this.scene,i=this.stats;i&&i.begin(),r.animation={delta:t.getDelta(),time:t.oldTime/1e3},e.onAnimationTick(r.animation),n.update(),r.render(o,e),i&&i.end()}},{key:"onResize",value:function(){var e=this.canvas.current,t=this.camera,n=this.renderer,r=e.parentNode.getBoundingClientRect(),o=r.width,i=r.height;this.width=o,this.height=i,n.vr.isPresenting()||n.setSize(o,i),t.aspect=o/i,t.updateProjectionMatrix()}},{key:"getMaxAnisotropy",value:function(){return this.renderer.capabilities.getMaxAnisotropy()}},{key:"setFog",value:function(e){var t=this.fog,n=this.renderer;t.color.setHex(e),n.setClearColor(t.color)}},{key:"setupVR",value:function(){var e=this.hands,t=this.renderer,n="xr"in navigator,r="getVRDisplays"in navigator;if(n){var o=function(){if(!t.vr.isPresenting()){var e=t.vr.getDevice();e?e.requestSession({immersive:!0,exclusive:!0}).then(function(e){t.vr.setSession(e,{frameOfReferenceType:"stage"})}):navigator.xr.requestDevice().then(function(e){t.vr.enabled=!0,t.vr.setDevice(e)})}};window.addEventListener("mousedown",o,!1),o()}else if(r){var i=function(){if(!t.vr.isPresenting()){var e=t.vr.getDevice();e?e.requestPresent([{source:t.domElement}]):navigator.getVRDisplays().then(function(e){if(e.length){var n=S(e,1)[0];t.vr.enabled=!0,t.vr.setDevice(n)}})}};window.addEventListener("mousedown",i,!1),window.addEventListener("vrdisplayactivate",i,!1),i()}e.standingMatrix=t.vr.getStandingMatrix()}},{key:"resetScene",value:function(){return this.scene&&this.scene.children.forEach(function(e){e.dispose&&e.dispose()}),this.room.position.set(0,0,0),this.camera.reset(),this.setFog(131604),this.scene=new i.A,this.scene.add(this.room),this.scene.fog=this.fog,this.scene}},{key:"render",value:function(){var e=this.canvas;return o.a.createElement("canvas",{ref:e})}}])&&O(n.prototype,a),s&&O(n,s),t}();i.B.fog_vertex=i.B.fog_vertex.replace("fogDepth = -mvPosition.z;","fogDepth = length(mvPosition);");t.a=R},"7RL8":function(e,t,n){"use strict";n.r(t);var r=n("LhCv"),o=n("q1tI"),i=n.n(o),a=n("i8i4"),s=n("ANjH"),u=n("Igns"),c=n("/MKj"),l=n("gyEF"),f=n.n(l),p=n("Ty5D"),d=n("sINF"),h=n("97A4"),y=(n("bo1M"),n("wcCE")),m=n("N2Rb");var b={en:{Realm:{editMetadata:"Edit metadata",name:"Name",save:"Save"},User:{confirmPassword:"Confirm password",email:"Email",name:"Name",signIn:"Sign-In",signInWithGoogle:"Sign-In with Google",signOut:"Sign-Out",password:"Password",register:"Create an account"}},es:{Realm:{editMetadata:"Editar metadatos",name:"Nombre",save:"Guardar"},User:{confirmPassword:"Confirmar contraseña",email:"Email",name:"Nombre",signIn:"Iniciar sesión",signInWithGoogle:"Iniciar sesión con Google",signOut:"Cerrar sesión",password:"Contraseña",register:"Crear una cuenta"}}},g=Object.keys(b),v={};g.forEach(function(e){v[e]=Object(y.recursive)(!0,b.en,b[e])});var w=n("vzVy");function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){S(e,t,n[t])})}return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=Object(s.c)({filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"popular",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.c:return t.payload.value;default:return e}},hasLoaded:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case w.b:return!0;case w.f:return!1;default:return e}},pagination:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:0,pages:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.b:return E({},e,{pages:t.payload.pages});case w.c:return E({},e,{page:0});case w.d:return E({},e,{page:t.payload.value});default:return e}},realms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.b:return t.payload.realms;default:return e}}}),x=Object(s.c)({geometry:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.n:return t.payload;case w.j:return{};default:return e}},fog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:131604,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.h:case w.l:return t.payload.fog;case w.j:return 131604;default:return e}},id:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.h:return t.payload._id;case w.j:return"";default:return e}},isCreator:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.h:return!!t.payload.isCreator;case w.j:return!1;default:return e}},isEditingMetadata:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case w.k:return!0;case w.i:case w.j:case w.p:return!1;default:return e}},name:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.h:return t.payload.name;case w.j:return"";default:return e}},size:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.h:return t.payload.size;case w.j:return 0;default:return e}},voxels:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint32Array,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.h:case w.q:return t.payload.voxels;case w.j:return new Uint32Array;default:return e}}}),k=n("dCQc");function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=JSON.parse(localStorage.getItem("REALMSVR::SESSION")||"false");R&&k.a.setAuthorization(R.token);var P=Object(s.c)({isAuth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!!R;switch((arguments.length>1?arguments[1]:void 0).type){case w.v:case w.t:case w.y:return!0;case w.w:case w.A:return!1;default:return e}},isSigningIn:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case w.z:return!0;case w.t:case w.r:case w.y:return!1;default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R?R.profile:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.v:case w.t:case w.y:var n=t.payload.profile;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){_(e,t,n[t])})}return e}({},n,{firstName:n.name.split(" ")[0]});case w.w:case w.A:return{};default:return e}},token:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R?R.token:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.v:case w.t:case w.y:return k.a.setAuthorization(t.payload.token),localStorage.setItem("REALMSVR::SESSION",JSON.stringify(t.payload)),t.payload.token;case w.w:case w.A:return k.a.setAuthorization(!1),localStorage.removeItem("REALMSVR::SESSION"),"";default:return e}}}),j=Object(s.c)({i18n:m.i18nReducer,loadingBar:l.loadingBarReducer,lobby:O,realm:x,user:P}),M=n("vOnD"),T=M.a.a.withConfig({displayName:"github__Link",componentId:"sc-10jf6yn-0"})(["position:absolute;top:0;right:0;.octo-arm{transform-origin:130px 106px;}&:hover .octo-arm{animation:octocat-wave 560ms ease-in-out;}@keyframes octocat-wave{0%{transform:rotate(0deg);}20%{transform:rotate(-25deg);}40%{transform:rotate(10deg);}60%{transform:rotate(-25deg);}80%{transform:rotate(10deg);}100%{transform:rotate(0deg);}}"]),A=function(){return i.a.createElement(T,{href:"https://github.com/danielesteban/RealmsVR#readme",rel:"noopener noreferrer",target:"_blank"},i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"80",height:"80",viewBox:"0 0 250 250",fill:"#fff"},i.a.createElement("path",{d:"M0 0l115 115h15l12 27 108 108V0z",fill:"#000"}),i.a.createElement("path",{className:"octo-arm",d:"M128 109c-15-9-9-19-9-19 3-7 2-11 2-11-1-7 3-2 3-2 4 5 2 11 2 11-3 10 5 15 9 16"}),i.a.createElement("path",{className:"octo-body",d:"M115 115s4 2 5 0l14-14c3-2 6-3 8-3-8-11-15-24 2-41 5-5 10-7 16-7 1-2 3-7 12-11 0 0 5 3 7 16 4 2 8 5 12 9s7 8 9 12c14 3 17 7 17 7-4 8-9 11-11 11 0 6-2 11-7 16-16 16-30 10-41 2 0 3-1 7-5 11l-12 11c-1 1 1 5 1 5z"})))},C=n("O1PE");function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var q=M.a.div.withConfig({displayName:"music__Wrapper",componentId:"sc-1qpg9ee-0"})(["position:fixed;bottom:0;left:0;display:flex;align-items:flex-end;box-shadow:0 0 8px rgba(0,0,0,.4);> a > img{width:100px;height:100px;background:#000;border:0;outline:none;vertical-align:middle;}> div{box-sizing:border-box;width:220px;height:100px;background:rgba(0,0,0,.5);padding:0.5rem 1rem;border-radius:0 4px 0 0;> a{display:block;text-decoration:none;outline:none;font-size:1.25em;line-height:1.5em;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;&:hover{text-decoration:underline;}}> a:nth-child(1){color:#eee;}> a:nth-child(2){color:#aaa;}}"]),N=M.a.div.withConfig({displayName:"music__Progress",componentId:"sc-1qpg9ee-1"})(["height:3px;margin:0.5rem 0;background-color:#333;border-radius:2px;overflow:hidden;> div{height:100%;background-color:#393;}"]),G=M.a.div.withConfig({displayName:"music__Controls",componentId:"sc-1qpg9ee-2"})(["display:flex;align-items:center;> button{display:flex;align-items:center;justify-content:center;background-color:#333;border:1px solid #111;color:#fff;font-family:inherit;font-size:inherit;font-weight:inherit;padding:0.25rem 0;width:2.5rem;border-radius:2px;margin-right:0.125rem;cursor:pointer;outline:none;}> span{margin-left:auto;}"]),B=Math.pow(2,32)-1,H=new Uint32Array(1),W=function(e){return Math.floor((window.crypto&&window.crypto.getRandomValues?window.crypto.getRandomValues(H)[0]/B:Math.random())*e)},V=function(e){function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=D(t).call(this,e))||"object"!==L(o)&&"function"!=typeof o?z(r):o).next=n.next.bind(z(n)),n.toggle=n.toggle.bind(z(n));for(var i=I(t.tracks),a=i.length-1;a>=0;a-=1){var s=W(a+1),u=i[a];i[a]=i[s],i[s]=u}return n.player=document.createElement("audio"),n.player.ontimeupdate=n.onTimeUpdate.bind(z(n)),n.player.onended=n.next,n.player.volume=.5,n.state={isPlaying:!1,playhead:0,time:"0:00",track:void 0},n.track=0,n.tracks=i,n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,o["PureComponent"]),n=t,(r=[{key:"componentDidMount",value:function(){this.waitForFirstInteraction()}},{key:"onTimeUpdate",value:function(){var e=this.player,t=Math.floor(e.currentTime/60),n=Math.floor(e.currentTime%60);this.setState({playhead:e.currentTime/e.duration,time:"".concat(t,":").concat(n<10?"0":"").concat(n)})}},{key:"waitForFirstInteraction",value:function(){var e=this,t=function t(){window.removeEventListener("mousedown",t),window.removeEventListener("touchstart",t),window.removeEventListener("vrdisplayactivate",t),e.play()};window.addEventListener("mousedown",t,!1),window.addEventListener("touchstart",t,!1),window.addEventListener("vrdisplayactivate",t,!1)}},{key:"next",value:function(){var e=this.player,t=this.tracks;e.paused||e.pause(),e.src="",this.track=(this.track+1)%t.length,this.play()}},{key:"play",value:function(){var e=this,t=this.player,n=this.track,r=this.tracks,o="client_id=eb5fcff9e107aab508431b4c3c416415",i=r[n];fetch("https://api.soundcloud.com/tracks/".concat(i,"?format=json&").concat(o)).then(function(e){if(200!==e.status)throw new Error("Couldn't fetch track: ".concat(i));return e.json()}).then(function(n){var r="".concat(n.user.username," - ");0===n.title.indexOf(r)&&(n.title=n.title.substr(r.length)),t.src="".concat(n.stream_url,"?").concat(o),t.play(),e.setState({isPlaying:!0,playhead:0,time:"0:00",track:n})}).catch(function(){return e.next()})}},{key:"toggle",value:function(){var e=this.player;e.paused?e.play():e.pause(),this.setState({isPlaying:!e.paused})}},{key:"render",value:function(){var e=this.state,t=e.isPlaying,n=e.playhead,r=e.time,o=e.track;if(!o)return null;var a=o.title,s=o.artwork_url,u=o.permalink_url,c=o.user,l=c.username,f=c.permalink_url,p=o.waveform_url;return i.a.createElement(q,null,i.a.createElement("a",{href:u,rel:"noopener noreferrer",target:"_blank"},i.a.createElement("img",{alt:a,src:s||p})),i.a.createElement("div",null,i.a.createElement("a",{href:u,rel:"noopener noreferrer",target:"_blank"},a),i.a.createElement("a",{href:f,rel:"noopener noreferrer",target:"_blank"},l),i.a.createElement(N,null,i.a.createElement("div",{style:{width:"".concat(100*n,"%")}})),i.a.createElement(G,null,i.a.createElement("button",{type:"button",onClick:this.toggle},t?i.a.createElement(C.TiMediaPause,null):i.a.createElement(C.TiMediaPlay,null)),i.a.createElement("button",{type:"button",onClick:this.next},i.a.createElement(C.TiMediaFastForward,null)),i.a.createElement("span",null,r))))}}])&&U(n.prototype,r),a&&U(n,a),t}();V.tracks=[334831124,3654595,3654647,62965282,55529274,40801532,28921242,58102473,44049414,584470,348172961,348172759,118227213,58103033,58102746,29062473,73664676,217254339,26016069,143994169,34751566,22899851,19645145,14604316,14604145,9747273,290203217,290202627,290203029,290203125,230280393,230280565,230280839,290202890,230280665,230280740,174033188,238809205,219872323,85441920,85442027,85442324,85442658,295429557,31232642,118720768,66345578,64979755,9747680,3654444,354826097,174209343,374346584,374346578,374346566,374346536,374346518,374346506,374346440,272272960,82537981,272272962,331110005,253646536,69972925,297108748,95089740,264157290,3654394,51204969,28460870,270165801,93513660,107137565,200476847,241036508,345846433,13728685,3193491,235796705,74366070,293115267,65027631,226460783,132730188,267647225,331743020,348075711,328602395,232135696,13385987,303726380,319470292,312179497,300022056,212600702,336206149,319100206,299965683,308768675,202903037,220992150,221433894,223843476,155626389,155626391,306589305,304501298,305600086,300328640,283863336,283863306,260674048,117308221,78683752,340317786,277352612,226847547,220656015,224154466,240254433,249957904,260419888,250754945,235013168,336784751,277029337,229288316,343272434,343194325,334599482,343032721,343661072,343552665,344563095,285122161,1687603,286269026,340681124,265119655,345756307,351035779,350060806,352308515,353896778,353896991,353896595,355550264,345656655,360321368,337715872,272189608,43751468,65190792,200959753,347608134,133531982,183519916,185401372,42227482,376984973,372830927,376671563,376317227,342538038,338288083,338266624,265353084,159115092,122088683,85356706,69351024,18159187,28667337,169274681,221402560,402032439,401604759,416088969,424864200,424881921,426294102,430158741,441378576,440982825,438854664,451627668,285022424,416942091,289481139,236661381,289727425,302903905,284737661,275642447,291943120,284052253,228088399,209533328,90164812,43727131,175757015];var K=V,J=n("4mAa"),Y=n("17x9"),X=n.n(Y),Q=n("eysR");function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var re=M.a.div.withConfig({displayName:"session__Tabs",componentId:"sc-1avroa0-0"})(["display:flex;height:100%;> a{display:flex;align-items:center;background:#222;padding:0 1rem;border-left:1px solid #333;cursor:pointer;&:first-child{border-left:none;}&.active{background:#444;cursor:default;}}"]),oe=M.a.div.withConfig({displayName:"session__Content",componentId:"sc-1avroa0-1"})([".google{display:flex;justify-content:center;}.or{position:relative;width:100%;border-top:1px solid #222;margin:2rem 0;> span{position:absolute;display:block;left:50%;transform:translate(-50%,-50%);}}button{display:flex;align-items:center;border:1px solid #555;background:#222;padding:0.5rem 1rem;margin:0;font-family:inherit;font-weight:700;font-size:1.2rem;color:inherit;cursor:pointer;outline:0;> svg{font-size:1.5em;margin-right:0.5rem;}}"]),ie=M.a.form.withConfig({displayName:"session__Form",componentId:"sc-1avroa0-2"})(["display:none;flex-direction:column;align-items:center;width:80%;&.active{display:flex;}> label{width:100%;padding:0;}> input{box-sizing:border-box;border:1px solid #333;width:100%;background:#222;color:inherit;font-family:inherit;font-weight:400;font-size:2em;padding:0.5rem;margin:0 0 1rem;}"]),ae=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=ee(t).call(this,e))||"object"!==Z(o)&&"function"!=typeof o?te(r):o).onLoginSubmit=n.onLoginSubmit.bind(te(n)),n.onRegisterSubmit=n.onRegisterSubmit.bind(te(n)),n.state={tab:"login"},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,o["PureComponent"]),n=t,(r=[{key:"componentWillReceiveProps",value:function(e){var t=e.isSigningIn,n=this.props.isSigningIn;t&&!n&&this.setState({tab:"login"})}},{key:"onLoginSubmit",value:function(e){e.preventDefault();var t=e.target;(0,this.props.login)({email:t.email.value,password:t.password.value})}},{key:"onRegisterSubmit",value:function(e){e.preventDefault();var t=e.target,n=this.props.register;t.password.value===t.confirmPassword.value&&n({email:t.email.value,name:t.name.value,password:t.password.value})}},{key:"render",value:function(){var e=this,t=this.props,n=t.isSigningIn,r=t.hide,o=t.loginWithGoogle,a=this.state.tab,s=i.a.createElement(re,null,i.a.createElement("a",{className:"login"===a?"active":null,onClick:function(){return e.setState({tab:"login"})}},i.a.createElement(m.Translate,{value:"User.signIn"})),i.a.createElement("a",{className:"register"===a?"active":null,onClick:function(){return e.setState({tab:"register"})}},i.a.createElement(m.Translate,{value:"User.register"})));return i.a.createElement(Q.a,{heading:s,isShowing:n,hide:r},i.a.createElement(oe,null,i.a.createElement(ie,{className:"login"===a?"active":null,onSubmit:this.onLoginSubmit},i.a.createElement("label",null,i.a.createElement(m.Translate,{value:"User.email"})),i.a.createElement("input",{type:"email",name:"email",required:!0}),i.a.createElement("label",null,i.a.createElement(m.Translate,{value:"User.password"})),i.a.createElement("input",{type:"password",name:"password",required:!0}),i.a.createElement("button",{type:"submit"},i.a.createElement(C.TiKey,null),i.a.createElement(m.Translate,{value:"User.signIn"}))),i.a.createElement(ie,{className:"register"===a?"active":null,onSubmit:this.onRegisterSubmit},i.a.createElement("label",null,i.a.createElement(m.Translate,{value:"User.name"})),i.a.createElement("input",{type:"text",name:"name",required:!0}),i.a.createElement("label",null,i.a.createElement(m.Translate,{value:"User.email"})),i.a.createElement("input",{type:"email",name:"email",required:!0}),i.a.createElement("label",null,i.a.createElement(m.Translate,{value:"User.password"})),i.a.createElement("input",{type:"password",name:"password",required:!0}),i.a.createElement("label",null,i.a.createElement(m.Translate,{value:"User.confirmPassword"})),i.a.createElement("input",{type:"password",name:"confirmPassword",required:!0}),i.a.createElement("button",{type:"submit"},i.a.createElement(C.TiKey,null),i.a.createElement(m.Translate,{value:"User.register"}))),i.a.createElement("div",{className:"or"},i.a.createElement(m.Translate,{value:"User.or"})),i.a.createElement("div",{className:"google"},i.a.createElement("button",{onClick:o,type:"button"},i.a.createElement(C.TiSocialGooglePlusCircular,null),i.a.createElement(m.Translate,{value:"User.signInWithGoogle"})))))}}])&&$(n.prototype,r),a&&$(n,a),t}();ae.propTypes={isSigningIn:X.a.bool.isRequired,hide:X.a.func.isRequired,login:X.a.func.isRequired,loginWithGoogle:X.a.func.isRequired,register:X.a.func.isRequired};var se=Object(c.connect)(function(e){return{isSigningIn:e.user.isSigningIn}},{hide:h.a,login:h.b,loginWithGoogle:h.c,register:h.e})(ae),ue=n("+dvs"),ce=n("JaV3");function le(){return(le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var fe=function(e){var t=e.renderer;return i.a.createElement(p.d,null,[{path:"/",Component:ue.a},{path:"/:slug",Component:ce.a}].map(function(e){var n=e.path,r=e.Component;return i.a.createElement(p.b,{exact:!0,key:n,path:n,render:function(e){return i.a.createElement(r,le({},e,{renderer:t}))}})}),i.a.createElement(p.a,{to:"/"}))};fe.propTypes={renderer:X.a.shape({current:X.a.instanceOf(J.a)}).isRequired};var pe=fe;function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t){return!t||"object"!==de(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function be(e,t){return(be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ge,ve,we,Ee,Se=M.a.div.withConfig({displayName:"layout__Wrapper",componentId:"d2i6t1-0"})(["width:100vw;height:100vh;"]),Oe={backgroundColor:"#393",zIndex:1},xe=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ye(this,me(t).call(this,e))).renderer=i.a.createRef(),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}(t,o["PureComponent"]),n=t,(r=[{key:"render",value:function(){var e=this.renderer,t=window.__SCREENSHOT__;return i.a.createElement("div",null,i.a.createElement(f.a,{style:Oe}),i.a.createElement(Se,null,i.a.createElement(J.a,{ref:e})),i.a.createElement(pe,{renderer:e}),i.a.createElement(K,null),t?null:i.a.createElement(A,null),i.a.createElement(se,null))}}])&&he(n.prototype,r),a&&he(n,a),t}(),ke=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,s.d),_e=Object(s.e)(j,{},ke(Object(s.a)(d.a,u.a,Object(l.loadingBarMiddleware)())));ge=_e,ve=localStorage.getItem("REALMSVR::LOCALE"),we=((window.navigator.languages?window.navigator.languages[0]:null)||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage||"en").substr(0,2).toLowerCase(),Ee="en",~g.indexOf(ve)?Ee=ve:~g.indexOf(we)&&(Ee=we),Object(m.syncTranslationWithStore)(ge),function(e){e.dispatch(Object(m.loadTranslations)(v))}(ge),ge.dispatch(Object(m.setLocale)(Ee)),_e.getState().user.isAuth&&_e.dispatch(Object(h.d)());var Re=Object(r.a)({basename:"/"});window.location.hash&&Re.replace("/".concat(window.location.hash.substr(2))),window.addEventListener("contextmenu",function(e){return e.preventDefault()},!1);var Pe=document.getElementById("mount");Object(a.render)(i.a.createElement(c.Provider,{store:_e},i.a.createElement(p.c,{history:Re},i.a.createElement(xe,null))),Pe)},"97A4":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"e",function(){return a}),n.d(t,"d",function(){return s}),n.d(t,"f",function(){return u}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return l}),n.d(t,"g",function(){return f});n("N2Rb");var r=n("vzVy"),o=n("dCQc");function i(){return{type:r.r}}function a(e){var t=e.email,n=e.name,i=e.password;return function(e){return e({type:r.x,payload:o.a.fetch({body:{email:t,name:n,password:i},endpoint:"user",method:"PUT"})}).catch(function(){})}}function s(){return function(e){return e({type:r.u,payload:o.a.fetch({endpoint:"user"})}).catch(function(){})}}function u(){return{type:r.z}}function c(e){var t=e.email,n=e.password;return function(e){return e({type:r.s,payload:o.a.fetch({body:{email:t,password:n},endpoint:"user",method:"POST"})}).catch(function(){})}}function l(){return function(e){var t=window.screen.width/2-256,n=window.screen.height/2-256,i=window.open("".concat(o.a.baseURL,"user/google"),"loginWithGoogle","width=".concat(512,",height=").concat(512,",top=").concat(n,",left=").concat(t)),a=setInterval(function(){i.window?i.postMessage(!0,o.a.baseURL):clearInterval(a)},100);window.addEventListener("message",function t(n){var i=n.origin,s=n.data.session;if(0===o.a.baseURL.indexOf(i)){if(window.removeEventListener("message",t),clearInterval(a),!s)return;e({type:r.t,payload:s})}},!1)}}function f(){return{type:r.A}}},CEu6:function(e,t,n){"use strict";var r=n("Womt"),o=n("ooUw");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(e){var n,i=e.instanced,a=void 0!==i&&i;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=s(this,u(t).call(this)),a){var c=t.shader;n.geometry=new r.l,n.material=new r.D({defines:c.defines,vertexShader:c.vertex,fragmentShader:c.fragment,uniforms:r.E.merge([c.uniforms,{map:{value:o.a}}]),fog:!0,vertexColors:r.H})}else n.geometry=new r.c,n.material=new r.q({map:o.a,vertexColors:r.H});return n.instanced=a,n.visible=!1,n.aux={frustum:new r.j,matrix:new r.o},n}var n,i,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["s"]),n=t,(i=[{key:"dispose",value:function(){var e=this.geometry,t=this.material;e.dispose(),t.dispose()}},{key:"resize",value:function(e){for(var t=this,n=this.children,o=this.geometry,i=this.instanced,a=this.material;n.length;)this.remove(n[0]);this.instances=[];for(var s=new r.G,u=new r.G,c=-8;c<=8;c+=1)for(var l=-8;l<=8;l+=1)for(var f=-8;f<=8;f+=1){var p=s.set(f,l,c).distanceTo(u);if(Math.round(p)<=8){var d=new r.p(o,a);d.chunk={x:f,y:l,z:c},d.distance=p,d.matrixAutoUpdate=!1,d.position.set(f*e,l*e,c*e),d.updateMatrix(),d.updateMatrixWorld(),this.instances.push(d)}}if(this.instances.sort(function(e,t){return e.distance-t.distance}),this.intersects=this.instances.filter(function(e){var t=e.chunk,n=t.x,r=t.y,o=t.z;return n>=-2&&n<=2&&r>=-2&&r<=2&&o>=-2&&o<=2}),i){var h=new r.p(o,a);h.frustumCulled=!1,this.add(h);var y=new Float32Array(3*this.instances.length);o.attributes.offset?o.attributes.offset.setArray(y):(o.addAttribute("offset",new r.k(y,3)),o.attributes.offset.setDynamic(!0)),o.maxInstancedCount=0}else this.instances.forEach(function(e){return t.add(e)})}},{key:"updateFrustum",value:function(e){var t=this.aux,n=t.frustum,r=t.matrix,o=this.geometry,i=this.instanced,a=this.instances;if(i&&a){r.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),n.setFromMatrix(r);var s=a.filter(function(e){var t=e.worldSphere;return t&&n.intersectsSphere(t)}).reduce(function(e,t){var n=t.position;return e.push(n.x,n.y,n.z),e},[]);o.attributes.offset.array.set(s),o.attributes.offset.needsUpdate=!0,o.maxInstancedCount=s.length/3}}},{key:"update",value:function(e){var t=e.index,n=e.position,o=e.color,i=e.normal,a=e.uv,s=this.geometry,u=this.instances;s.attributes.position?(s.attributes.position.setArray(n),s.attributes.position.needsUpdate=!0):s.addAttribute("position",new r.b(n,3)),s.attributes.color?(s.attributes.color.setArray(o),s.attributes.color.needsUpdate=!0):s.addAttribute("color",new r.b(o,3)),s.attributes.normal?(s.attributes.normal.setArray(i),s.attributes.normal.needsUpdate=!0):s.addAttribute("normal",new r.b(i,3)),s.attributes.uv?(s.attributes.uv.setArray(a),s.attributes.uv.needsUpdate=!0):s.addAttribute("uv",new r.b(a,2)),s.index?(s.index.setArray(t),s.index.needsUpdate=!0):s.setIndex(new r.b(t,1)),s.computeBoundingSphere(),u.forEach(function(e){e.worldSphere=s.boundingSphere.clone().applyMatrix4(e.matrixWorld)}),this.visible=!0}}])&&a(n.prototype,i),l&&a(n,l),t}();l.shader={vertex:r.C.basic.vertexShader.replace("#include <clipping_planes_pars_vertex>",["#include <clipping_planes_pars_vertex>","attribute vec3 offset;"].join("\n")).replace("#include <begin_vertex>",["vec3 transformed = vec3( offset + position );"].join("\n")),fragment:r.C.basic.fragmentShader,uniforms:r.E.clone(r.C.basic.uniforms),defines:{USE_MAP:!0}},t.a=l},JaV3:function(e,t,n){"use strict";(function(e){var r=n("17x9"),o=n.n(r),i=n("q1tI"),a=n.n(i),s=n("/MKj"),u=n("Womt"),c=n("vJ50"),l=n("LMr1"),f=n("SuMo"),p=n("CEu6"),d=n("4mAa");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function m(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),g(this,v(n).apply(this,arguments))}var r,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(n,i["PureComponent"]),r=n,(o=[{key:"componentDidMount",value:function(){var e=this.props,t=e.fog,n=e.history,r=e.match.params.slug,o=e.renderer.current,i=e.fetch,a=e.updateFog,s=o.resetScene();o.camera.canLock=!o.renderer.vr.enabled,this.picker=new f.a({anisotropy:o.getMaxAnisotropy(),fog:t,history:n,updateFog:a}),o.hands.children[1].add(this.picker),this.voxels=new p.a({instanced:!!o.renderer.extensions.get("ANGLE_instanced_arrays")}),s.add(this.voxels),this.head=new u.G,this.intersects=[this.picker],this.renderer=o,this.scene=s,s.onBeforeRender=this.onBeforeRender.bind(this),i(r)}},{key:"componentDidUpdate",value:function(t){var n=t.geometry,r=t.fog,o=t.size,i=this.props,a=i.geometry,s=i.fog,u=i.size,c=this.picker,l=this.renderer,f=this.voxels,p=l.isScreenshot,d=l.raycaster,h=l.room,y=l.renderer.vr;if(s!==r&&l.setFog(s),u!==o&&(h.position.set(.5*u+.5,.5*u,.5*u+.5),f.resize(u),this.intersects=[c].concat(m(f.intersects))),a!==n){if(f.update(a),!n.index&&y.enabled){d.ray.origin.copy(h.position),d.ray.direction.set(0,-1,0);var b=d.intersectObjects(f.intersects)[0];b&&(h.position.y=b.point.y)}p&&e(function(){window.__SCREENSHOT_READY__=!0})}}},{key:"componentWillUnmount",value:function(){var e=this.picker,t=this.renderer,n=this.scene,r=this.props.reset;t.hands.children[1].remove(e),e.dispose(),delete n.onBeforeRender,r()}},{key:"onBeforeRender",value:function(e,t,n){var r=this.head,o=this.intersects,i=this.picker,a=this.props,s=a.size,u=a.updateVoxels,c=this.renderer,l=c.hands,f=c.isScreenshot,p=c.raycaster,d=c.room;if(this.voxels.updateFrustum(n),l.children.forEach(function(e){var t=e.buttons,a=e.pointer;e.setupRaycaster(p);var c=p.intersectObjects(o)[0]||!1;if(c){var l=c.distance,f=c.face.normal,h=c.object,m=c.point;if(a.scale.z=l-.175,a.visible=!0,h!==i){if(t.padDown&&0===f.x&&1===f.y&&0===f.z){r.setFromMatrixPosition(n.matrixWorld);var b={x:r.x-d.position.x,y:0,z:r.z-d.position.z},g=y(["x","y","z"].map(function(e){for(var t=m[e]-b[e];t<0;)t+=s;for(;t>=s;)t-=s;return t}),3),v=g[0],w=g[1],E=g[2];d.position.set(v,w,E)}(t.triggerDown||t.gripDown)&&u({color:i.colors.fg,point:m,normal:f,remove:t.gripDown})}else t.triggerDown&&i.onPointer(m)}else a.visible=!1}),!f&&s&&n.canLock){if(!n.isLocked){var h=e.animation,m=h.delta,b=h.time,g=5e-4*Math.sin(.1*b);n.rotateY(g),n.rotateX(g),n.rotateZ(g),n.translateZ(.5*m),n.updateMatrixWorld()}["x","y","z"].forEach(function(e){for(;n.position[e]<0;)n.position[e]+=s;for(;n.position[e]>=s;)n.position[e]-=s})}}},{key:"render",value:function(){return this.props.isCreator?a.a.createElement(l.a,null):null}}])&&b(r.prototype,o),s&&b(r,s),n}();E.propTypes={geometry:o.a.shape({index:o.a.instanceOf(Uint32Array),position:o.a.instanceOf(Float32Array),color:o.a.instanceOf(Float32Array),normal:o.a.instanceOf(Float32Array),uv:o.a.instanceOf(Float32Array)}).isRequired,fog:o.a.number.isRequired,history:o.a.object.isRequired,isCreator:o.a.bool.isRequired,match:o.a.shape({params:o.a.shape({slug:o.a.string.isRequired}).isRequired}).isRequired,size:o.a.number.isRequired,renderer:o.a.shape({current:o.a.instanceOf(d.a)}).isRequired,fetch:o.a.func.isRequired,reset:o.a.func.isRequired,updateFog:o.a.func.isRequired,updateVoxels:o.a.func.isRequired},t.a=Object(s.connect)(function(e){var t=e.realm;return{geometry:t.geometry,fog:t.fog,isCreator:t.isCreator,size:t.size}},{fetch:c.b,reset:c.d,updateFog:c.f,updateVoxels:c.h})(E)}).call(this,n("URgk").setImmediate)},LMr1:function(e,t,n){"use strict";var r=n("17x9"),o=n.n(r),i=n("q1tI"),a=n.n(i),s=n("O1PE"),u=n("/MKj"),c=n("N2Rb"),l=n("vOnD"),f=n("eysR"),p=n("vJ50");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=l.a.form.withConfig({displayName:"metadata__Toggle",componentId:"sc-1mr8sn1-0"})(["position:absolute;top:0;left:0;cursor:pointer;.icon{position:absolute;font-size:2.5rem;top:","%;left:","%;transform:translate(-50%,-50%);}"],100/3,100/3),v=l.a.div.withConfig({displayName:"metadata__Content",componentId:"sc-1mr8sn1-1"})(["button{display:flex;align-items:center;border:1px solid #555;background:#222;padding:0.5rem 1rem;margin:0;font-family:inherit;font-weight:700;font-size:1.2rem;color:inherit;cursor:pointer;outline:0;> svg{font-size:1.5em;margin-right:0.5rem;}}"]),w=l.a.form.withConfig({displayName:"metadata__Form",componentId:"sc-1mr8sn1-2"})(["display:flex;flex-direction:column;align-items:center;width:80%;> label{width:100%;padding:0;}> input{box-sizing:border-box;border:1px solid #333;width:100%;background:#222;color:inherit;font-family:inherit;font-weight:400;font-size:2em;padding:0.5rem;margin:0 0 1rem;}"]),E=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=y(t).call(this,e))||"object"!==d(o)&&"function"!=typeof o?m(r):o).onSubmit=n.onSubmit.bind(m(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,i["PureComponent"]),n=t,(r=[{key:"onSubmit",value:function(e){e.preventDefault();var t=e.target;(0,this.props.update)({name:t.name.value})}},{key:"render",value:function(){var e=this.props,t=e.isEditingMetadata,n=e.name,r=e.hide,o=e.show;return a.a.createElement("div",null,a.a.createElement(g,{onClick:o},a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"80",height:"80",viewBox:"0 0 250 250",fill:"#fff"},a.a.createElement("path",{d:"M0,250 L250,0 L0,0 Z",fill:"#000"})),a.a.createElement(s.TiEdit,{className:"icon"})),a.a.createElement(f.a,{heading:a.a.createElement(c.Translate,{value:"Realm.editMetadata"}),isShowing:t,hide:r},a.a.createElement(v,null,a.a.createElement(w,{onSubmit:this.onSubmit},a.a.createElement("label",null,a.a.createElement(c.Translate,{value:"Realm.name"})),a.a.createElement("input",{type:"text",name:"name",defaultValue:n,required:!0}),a.a.createElement("button",{type:"submit"},a.a.createElement(s.TiEdit,null),a.a.createElement(c.Translate,{value:"Realm.save"}))))))}}])&&h(n.prototype,r),o&&h(n,o),t}();E.propTypes={isEditingMetadata:o.a.bool.isRequired,name:o.a.string.isRequired,hide:o.a.func.isRequired,show:o.a.func.isRequired,update:o.a.func.isRequired},t.a=Object(u.connect)(function(e){var t=e.realm;return{isEditingMetadata:t.isEditingMetadata,name:t.name}},{hide:p.c,show:p.e,update:p.g})(E)},"NaA/":function(e,t,n){"use strict";var r=n("Womt"),o=n("ooUw");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),t.geometry&&t.material||t.setup(),s(this,u(t).call(this,t.geometry,t.material))}var n,i,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["p"]),n=t,l=[{key:"setup",value:function(){if(!t.geometry){var e=new r.v(256,256,256,256);e.rotateX(-.5*Math.PI);var n=new r.G;e.vertices.forEach(function(e){var t=Math.floor(e.distanceTo(n))/4,r=Math.floor(t*t/3)/6;e.y=r*(.4*Math.random()+.6)+Math.max(Math.min(-(t-1.25),0),-2)}),e.faces.forEach(function(t,n){if(n%2==1){var r=e.faces[n-1],o=[t.a,t.b,t.c,r.a,r.b,r.c].map(function(t){return e.vertices[t]}),i=o.reduce(function(e,t){return e+t.y},0)/o.length;o.forEach(function(e){e.y=i});var a=Math.min(i/40+.25,1);t.color.setRGB(.5*a,a,.75*a),t.color.offsetHSL(.03*Math.random()-.01,.2*Math.random(),-.05*Math.random()),r.color.copy(t.color)}}),t.geometry=(new r.c).fromGeometry(e);for(var i=t.geometry.attributes.uv.array,a=0;a<i.length/2;a+=6)i.set([0,1],2*a),i.set([0,0],2*(a+1)),i.set([1,1],2*(a+2)),i.set([0,0],2*(a+3)),i.set([1,0],2*(a+4)),i.set([1,1],2*(a+5))}t.material||(t.material=new r.q({map:o.a,vertexColors:r.H}))}}],(i=null)&&a(n.prototype,i),l&&a(n,l),t}();t.a=l},QBLo:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return s});var r=n("vzVy"),o=n("dCQc");function i(){return function(e,t){var n=t().lobby,i=n.filter,a=n.pagination.page;return e({type:r.a,payload:o.a.fetch({endpoint:"realms/".concat(i,"/").concat(a)})})}}function a(e){return{type:r.c,payload:{value:e}}}function s(e){return{type:r.d,payload:{value:e}}}},SuMo:function(e,t,n){"use strict";var r=n("Womt"),o=n("kC7N"),i=n("yHfR");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){var n,o,s,u=e.anisotropy,l=e.fog,p=e.history,d=e.updateFog;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,s=f(t).call(this,{anisotropy:u}),n=!s||"object"!==a(s)&&"function"!=typeof s?c(o):s;var h=c(n).renderer;return n.position.set(-.15,.15,.075),n.rotation.set(0,.5*Math.PI,.1*Math.PI,"ZYX"),n.scale.set(.3,.3,1),n.block={x:.05*h.width,y:.05*h.height,width:.75*h.width,height:.75*h.height},n.strip={x:.85*h.width,y:.05*h.height,width:.1*h.width,height:.75*h.height},n.modeButton={label:"MODE",x:.7*h.width,y:.85*h.height,width:.25*h.width,height:.1*h.height,onPointer:function(){n.setMode("fg"===n.mode?"bg":"fg"),n.draw()}},n.buttons=[{label:"« REALMS",x:.05*h.width,y:.85*h.height,width:.25*h.width,height:.1*h.height,onPointer:function(){return p.push("/")}},n.modeButton],n.colors={bg:(new r.f).setHex(l),fg:(new r.f).setHSL(Math.random(),.6,.8),block:new r.f},n.setMode("fg"),n.updateFog=d,i.a.waitUntilLoaded("Roboto").then(function(){return n.draw()}),n}var n,d,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,o["a"]),n=t,(d=[{key:"draw",value:function(){var e=this.block,n=this.buttons,r=this.colors,o=this.context,i=this.mode,a=this.renderer,s=this.strip;l(f(t.prototype),"draw",this).call(this);var u=e.x,c=e.y,p=e.width,d=e.height;o.save(),o.translate(u,c),o.fillStyle="#".concat(r.block.getHexString()),o.fillRect(0,0,p,d);var h=o.createLinearGradient(0,0,p,0);h.addColorStop(0,"rgba(255,255,255,1)"),h.addColorStop(1,"rgba(255,255,255,0)"),o.fillStyle=h,o.fillRect(0,0,p,d);var y=o.createLinearGradient(0,0,0,d);y.addColorStop(0,"rgba(0,0,0,0)"),y.addColorStop(1,"rgba(0,0,0,1)"),o.fillStyle=y,o.fillRect(0,0,p,d),o.restore();var m=s.x,b=s.y,g=s.width,v=s.height;o.save(),o.translate(m,b);var w=o.createLinearGradient(0,0,0,v);w.addColorStop(0,"rgba(255, 0, 0, 1)"),w.addColorStop(.17,"rgba(255, 255, 0, 1)"),w.addColorStop(.34,"rgba(0, 255, 0, 1)"),w.addColorStop(.51,"rgba(0, 255, 255, 1)"),w.addColorStop(.68,"rgba(0, 0, 255, 1)"),w.addColorStop(.85,"rgba(255, 0, 255, 1)"),w.addColorStop(1,"rgba(255, 0, 0, 1)"),o.fillStyle=w,o.fillRect(0,0,g,v),o.restore(),o.save();var E=.25*a.width,S=.1*a.width;o.translate(.375*a.width,.85*a.height),o.fillStyle="#".concat(r[i].getHexString()),o.strokeStyle="#333",o.beginPath(),o.rect(0,0,E,S),o.fill(),o.stroke(),o.restore(),n.forEach(function(e){var t=e.label,n=e.x,r=e.y,i=e.width,a=e.height;o.save(),o.translate(n,r),o.fillStyle="#222",o.strokeStyle="#333",o.beginPath(),o.rect(0,0,i,a),o.fill(),o.stroke(),o.fillStyle="#fff",o.font="700 24px Roboto",o.textAlign="center",o.textBaseline="middle",o.fillText(t,.5*i,.5*a),o.restore()})}},{key:"setMode",value:function(e){var t=this.colors,n=this.modeButton;t.block.copy(t[e]),n.label="fg"===e?"FG color":"BG color",this.mode=e}},{key:"onPointer",value:function(e){var n=this,r=this.block,o=this.buttons,i=this.colors,a=this.context,u=this.mode,c=this.pointer,p=this.strip,d=this.updateFog;l(f(t.prototype),"onPointer",this).call(this,e),[r,p].concat(s(o)).forEach(function(e){var t=e.x,r=e.y,o=e.width,s=e.height,l=e.onPointer;if(!(c.x<t||c.x>t+o||c.y<r||c.y>r+s))if(l)l();else{var f=a.getImageData(c.x,c.y,1,1).data;e===p&&i.block.setRGB(f[0]/255,f[1]/255,f[2]/255),i[u].setRGB(f[0]/255,f[1]/255,f[2]/255),"bg"===u&&d(i[u].getHex()),n.draw()}})}}])&&u(n.prototype,d),h&&u(n,h),t}();t.a=d},Xtfx:function(e,t,n){"use strict";var r=n("Womt"),o=n("kC7N"),i=n("dCQc"),a=n("yHfR");function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){u(e,t,n[t])})}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function h(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){function t(){return f(this,t),t.geometry&&t.material||t.setup(),h(this,y(t).call(this,t.geometry,t.material))}return m(t,r["p"]),d(t,null,[{key:"setup",value:function(){if(!t.geometry){var e=new r.g(.025,.025,1.5,8,32);e.translate(0,-.83,0);var n=new r.f;e.faces.forEach(function(e,t){t%2==1?e.color.copy(n):(e.color.setHex(4478276),e.color.offsetHSL(0,0,-.1*Math.random()),n.copy(e.color))}),t.geometry=(new r.c).fromGeometry(e)}t.material||(t.material=new r.q({vertexColors:r.H}))}}]),t}(),v=function(e){function t(e){var n,r=e.anisotropy,o=e._id,s=e.name,u=e.creator,c=e.onPointer;f(this,t),(n=h(this,y(t).call(this,{anisotropy:r}))).name=s.length>16?"".concat(s.substr(0,16),"..."):s,n.onPointer=c,n.scale.set(.3,.3,1);var l=n.renderer,p=l.width,d=l.height,m=n.context.createRadialGradient(.5*p,.5*d,.2*p,.5*p,.5*d,.5*p);m.addColorStop(0,"rgba(0, 0, 0, 0)"),m.addColorStop(1,"rgba(0, 0, 0, .5)"),n.vignette=m;var b=!1;if(a.a.waitUntilLoaded("Roboto").then(function(){b=!0,n.draw()}),u){var g=new Image;g.crossOrigin="anonymous",g.src="".concat(i.a.baseURL,"user/").concat(u._id,"/photo"),g.onload=function(){n.creator=g,b&&n.draw()}}var v=new Image;return v.crossOrigin="anonymous",v.src="".concat(i.a.baseURL,"realm/").concat(o,"/screenshot"),v.onload=function(){n.screenshot=v,b&&n.draw()},n}return m(t,o["a"]),d(t,[{key:"draw",value:function(){var e=this.context,n=this.creator,r=this.isHover,o=this.name,i=this.renderer,a=this.screenshot,s=this.vignette;c(y(t.prototype),"draw",this).call(this),a&&e.drawImage(a,0,0),e.fillStyle=s,e.fillRect(0,0,i.width,i.height),e.fillStyle="rgba(".concat(r?"255, 255, 255":"0, 0, 0",", .5)"),e.fillRect(0,.75*i.height,i.width,.25*i.height),e.font="40px Roboto",e.textAlign="left",e.textBaseline="middle",e.fillStyle=r?"#333":"#fff",n&&e.drawImage(n,0,.75*i.height,.25*i.width,.25*i.height),e.fillText(o,.05*i.width+i.width*(n?.25:.05),.875*i.height)}}]),t}(),w=function(e){function t(e){var n,r=e.anisotropy;return f(this,t),(n=h(this,y(t).call(this,{anisotropy:r,width:256,height:256}))).scale.set(.25,.25,1),n.hasLoadedFont=!1,a.a.waitUntilLoaded("Roboto").then(function(){n.hasLoadedFont=!0,n.draw()}),n}return m(t,o["a"]),d(t,[{key:"draw",value:function(){var e=this.buttons,n=this.context;c(y(t.prototype),"draw",this).call(this),n.font="700 30px Roboto",n.textAlign="center",n.textBaseline="middle",e.forEach(function(e){var t=e.label,r=e.x,o=e.y,i=e.width,a=e.height,s=e.isActive,u=e.isDisabled;n.save(),n.translate(r,o),n.beginPath(),n.rect(0,0,i,a),n.fillStyle=u?"#555":s?"#fff":"#222",n.strokeStyle="#333",n.fill(),n.stroke(),n.fillStyle=u?"#777":s?"#222":"#fff",n.fillText(t,.5*i,.5*a),n.restore()})}},{key:"onPointer",value:function(e){var n=e.isDown,r=e.point,o=this.buttons,i=this.pointer;n&&(c(y(t.prototype),"onPointer",this).call(this,r),o.filter(function(e){return!e.isDisabled}).forEach(function(e){var t=e.x,n=e.y,r=e.width,o=e.height,a=e.onPointer;i.x<t||i.x>t+r||i.y<n||i.y>n+o||a()}))}}]),t}(),E=function(e){function t(e){var n,r=e.anisotropy,o=e.history,i=e.createRealm;f(this,t),(n=h(this,y(t).call(this,{anisotropy:r}))).scale.set(.3,.3,1);var a=n.renderer,s=a.width,u=a.height;return n.buttons=[{label:"Create Realm",x:.1*s,y:.3*u,width:.8*s,height:.4*u,onPointer:function(){return i().then(function(e){var t=e.value;return o.push("/".concat(t))})}}],n}return m(t,w),t}(),S=function(e){function t(e){var n,r=e.anisotropy,o=e.page,i=e.pages,a=e.update;f(this,t);var s=(n=h(this,y(t).call(this,{anisotropy:r}))).renderer,u=s.width,c=s.height;return n.buttons=[{label:"<",x:.1*u,y:.3*c,width:.3*u,height:.4*c,onPointer:function(){n.page>0&&a(n.page-1)}},{label:">",x:.6*u,y:.3*c,width:.3*u,height:.4*c,onPointer:function(){n.page<n.pages-1&&a(n.page+1)}}],n.page=o,n.pages=i,n}return m(t,w),d(t,[{key:"draw",value:function(){var e=this.context,n=this.page,r=this.pages,o=this.renderer;c(y(t.prototype),"draw",this).call(this),e.fillStyle="#fff",e.fillText("".concat(n+1," / ").concat(r),.5*o.width,.85*o.height)}}]),t}(),O=function(e){function t(e){var n,r=e.anisotropy,o=e.isSigningIn,i=e.user,a=e.signin,s=e.signout;return f(this,t),(n=h(this,y(t).call(this,{anisotropy:r}))).signin=a,n.signout=s,n.updateSession({isSigningIn:o,user:i}),n}return m(t,w),d(t,[{key:"updateSession",value:function(e){var t=this,n=e.isSigningIn,r=e.user,o=this.renderer,a=this.signin,s=this.signout,u=o.width,c=o.height;if(this.buttons=n?[]:r?[{label:"Sign-Out",x:.1*u,y:.7*c,width:.8*u,height:.2*c,onPointer:s}]:[{label:"Sign-In",x:.1*u,y:.4*c,width:.8*u,height:.4*c,onPointer:a}],this.isSigningIn=n,this.user=r,delete this.userPhoto,r){var l=new Image;l.crossOrigin="anonymous",l.src="".concat(i.a.baseURL,"user/").concat(r._id,"/photo"),l.onload=function(){t.userPhoto=l,t.hasLoadedFont&&t.draw()}}}},{key:"draw",value:function(){var e=this.context,n=this.isSigningIn,r=this.renderer,o=this.user,i=this.userPhoto;c(y(t.prototype),"draw",this).call(this),e.fillStyle="#fff",n?(e.fillText("Remove your",.5*r.width,.25*r.height),e.fillText("headset",.5*r.width,.4*r.height),e.fillText("And Sign-In",.5*r.width,.6*r.height),e.fillText("in your browser",.5*r.width,.75*r.height)):e.fillText(o?o.firstName:"Guest",.5*r.width,.2*r.height),o&&i&&e.drawImage(i,.5*r.width-40,.5*r.height-50,80,80)}}]),t}(),x=function(e){function t(e){var n,r=e.anisotropy,o=e.isAuth,i=e.filter,a=e.update;f(this,t);var s=(n=h(this,y(t).call(this,{anisotropy:r}))).renderer,u=s.width,c=s.height;return n.buttons=[{id:"popular",label:"Most Popular",x:.1*u,y:.1*c,width:.8*u,height:.2*c,onPointer:function(){return a("popular")}},{id:"latest",label:"Latest Realms",x:.1*u,y:.4*c,width:.8*u,height:.2*c,onPointer:function(){return a("latest")}},{id:"user",label:"Your Realms",x:.1*u,y:.7*c,width:.8*u,height:.2*c,isDisabled:!o,onPointer:function(){return a("user")}}],n.filter=i,n.update=a,n}return m(t,w),d(t,[{key:"updateSession",value:function(e){var t=e.isAuth,n=this.buttons;n[n.findIndex(function(e){return"user"===e.id})].isDisabled=!t}},{key:"draw",value:function(){var e=this.buttons,n=this.filter;e.forEach(function(e){e.isActive=e.id===n}),c(y(t.prototype),"draw",this).call(this)}}]),t}(),k=function(e){function t(e){var n,r=e.anisotropy,o=e.filter,i=e.history,a=e.isSigningIn,u=e.pagination,c=e.realms,l=e.user,p=e.createRealm,d=e.setFilter,m=e.setPage,b=e.signin,g=e.signout;return f(this,t),(n=h(this,y(t).call(this))).anisotropy=r,n.history=i,n.hover={},n.intersects=[],n.position.set(0,1.25,-1),n.pagination=n.addPanel(S,s({},u,{update:m}),0,-.3,.13),n.session=n.addPanel(O,{isSigningIn:a,user:l,signin:b,signout:g},-.3,-.3,.13),n.filter=n.addPanel(x,{filter:o,isAuth:!!l,update:d},.3,-.3,.13),n.createRealm=p,n.updateRealms(c),n}return m(t,r["s"]),d(t,[{key:"addPanel",value:function(e,t,n,r,o){var i=this.anisotropy,a=this.intersects,u=new e(s({},t,{anisotropy:i}));u.position.set(n,r,o),u.lookAt(0,.5,1),this.add(u);var c=new g;return c.position.copy(u.position),this.add(c),a.push(u),u}},{key:"dispose",value:function(){this.children.forEach(function(e){return e.dispose&&e.dispose()})}},{key:"setHover",value:function(e){var t=e.hand,n=e.realm,r=this.hover;r[t]!==n&&(r[t]&&(r[t].isHover=!1,r[t].draw()),n&&(n.isHover=!0,n.draw()),this.hover[t]=n)}},{key:"updateFilter",value:function(e){var t=this.filter;t.filter=e,t.draw()}},{key:"updatePagination",value:function(e){var t=e.page,n=e.pages,r=this.pagination;r.page=t,r.pages=n,r.draw()}},{key:"updateRealms",value:function(e){for(var t=this,n=this.anisotropy,r=this.children,o=this.createRealm,i=this.filter.filter,a=this.history,u=this.pagination;r.length>6;){var c=r[r.length-1];c.dispose&&c.dispose(),this.remove(c)}this.intersects.length=3;var l="user"===i&&0===u.page,f=.25+-.25*(e.length+(l?1:0));l&&(this.addPanel(E,{history:a,createRealm:o},f,0,0),f+=.5),e.forEach(function(e,r){var o=t.addPanel(v,s({},e,{anisotropy:n,onPointer:function(n){var r=n.hand,i=n.isDown;t.setHover({hand:r,realm:o}),i&&a.push("/".concat(e.slug))}}),f+.5*r,0,0)})}},{key:"updateSession",value:function(e){var t=e.isSigningIn,n=e.user,r=this.filter,o=this.session;r.updateSession({isAuth:!!n}),r.draw(),o.updateSession({isSigningIn:t,user:n}),o.draw()}}]),t}();t.a=k},awf5:function(e,t,n){"use strict";var r=n("Womt");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),t.geometry&&t.material||t.setup(),a(this,s(t).call(this,t.geometry,t.material))}var n,o,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["w"]),n=t,c=[{key:"setup",value:function(){if(!t.geometry){for(var e=new Float32Array(6144),n=new Float32Array(6144),o=new r.G,i=0;i<6144;i+=3){o.set(2*Math.random()-1,Math.random(),2*Math.random()-1).normalize().multiplyScalar(512),e[i]=o.x,e[i+1]=o.y,e[i+2]=o.z;var a=.2+.5*Math.random();n[i]=a-.1*Math.random(),n[i+1]=a-.1*Math.random(),n[i+2]=a-.1*Math.random()}t.geometry=new r.c,t.geometry.addAttribute("position",new r.b(e,3)),t.geometry.addAttribute("color",new r.b(n,3))}t.material||(t.material=new r.x({fog:!1,vertexColors:r.H}))}}],(o=[{key:"onBeforeRender",value:function(e){var t=e.animation.time;this.rotation.x=1*Math.sin(.01*t)/3}}])&&i(n.prototype,o),c&&i(n,c),t}();t.a=c},dCQc:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseURL="https://projects.gatunes.com/realmsvr/"}var t,n,o;return t=e,(n=[{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=e.body,n=e.endpoint,r=e.headers,o=void 0===r?{}:r,i=e.method,a=void 0===i?"GET":i,s=this.authorization,u=this.baseURL;return s&&(o.Authorization=s),!t||t instanceof FormData||(t=JSON.stringify(t),o["Content-Type"]="application/json"),fetch("".concat(u).concat(n),{body:t,headers:o,method:a}).then(function(e){var t=e.headers,n=e.status;if(n<200||n>=400)throw new Error(n);switch((t.get("Content-Type")||"").split(";")[0]){case"text/plain":return e.arrayBuffer();case"application/json":return e.json();default:return e}})})},{key:"setAuthorization",value:function(e){e?this.authorization="Bearer ".concat(e):delete this.authorization,this.token=e}}])&&r(t.prototype,n),o&&r(t,o),e}();t.a=new o},eysR:function(e,t,n){"use strict";var r=n("17x9"),o=n.n(r),i=n("q1tI"),a=n.n(i),s=n("O1PE"),u=n("vOnD"),c=u.a.div.withConfig({displayName:"popup__Overlay",componentId:"hdjax7-0"})(["position:fixed;top:0;right:0;bottom:0;left:0;background:rgba(0,0,0,.5);"]),l=u.a.div.withConfig({displayName:"popup__Wrapper",componentId:"hdjax7-1"})(["position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:512px;background:#444;box-shadow:0 0 32px rgba(0,0,0,.5);"]),f=u.a.div.withConfig({displayName:"popup__Heading",componentId:"hdjax7-2"})(["background:#111;display:flex;align-items:center;justify-content:space-between;height:56px;> span{padding:0 1.5em;}> a{padding:1rem;cursor:pointer;> svg{font-size:1.5em;}}"]),p=u.a.div.withConfig({displayName:"popup__Content",componentId:"hdjax7-3"})(["> div{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem 0;}"]),d=function(e){var t=e.children,n=e.heading,r=e.isShowing,o=e.hide;return r?a.a.createElement(c,null,a.a.createElement(l,null,a.a.createElement(f,null,n,a.a.createElement("a",{onClick:o},a.a.createElement(s.TiTimes,null))),a.a.createElement(p,null,t))):null};d.propTypes={children:o.a.node.isRequired,heading:o.a.node.isRequired,isShowing:o.a.bool.isRequired,hide:o.a.func.isRequired},t.a=d},f7Ve:function(e,t,n){e.exports=function(){return new Worker(n.p+"code/mesher.worker.360be4fe5c7a7121f34a.js")}},kC7N:function(e,t,n){"use strict";var r=n("Womt");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(e){var n,o=e.anisotropy,i=e.width,u=void 0===i?512:i,c=e.height,l=void 0===c?512:c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),t.backplate&&t.geometry||t.setup();var f=document.createElement("canvas");f.width=u,f.height=l;var p=new r.d(f);return p.anisotropy=o,(n=a(this,s(t).call(this,t.geometry,new r.q({map:p})))).add(t.backplate.clone()),n.context=f.getContext("2d"),n.pointer=new r.G,n.renderer=f,n.texture=p,n}var n,o,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["p"]),n=t,c=[{key:"setup",value:function(){if(!t.backplate){var e=new r.a(1,1,.06);e.faces.splice(8,2),e.faces.forEach(function(e,t){return e.color.setHex(4===Math.floor(t/2)?1118481:2236962)}),e.translate(0,0,-.01);var n=new r.p((new r.c).fromGeometry(e),new r.q({side:r.h,vertexColors:r.H}));t.backplate=n}t.geometry||(t.geometry=new r.u(1,1))}}],(o=[{key:"dispose",value:function(){var e=this.material,t=this.texture;e.dispose(),t.dispose()}},{key:"draw",value:function(){var e=this.context,t=this.renderer,n=this.texture;e.fillStyle="#111",e.fillRect(0,0,t.width,t.height),n.needsUpdate=!0}},{key:"onPointer",value:function(e){var t=this.pointer,n=this.renderer;this.worldToLocal(t.copy(e)),t.set((t.x+.5)*n.width,(1-(t.y+.5))*n.height,0)}}])&&i(n.prototype,o),c&&i(n,c),t}();t.a=c},ooUw:function(e,t,n){"use strict";var r=n("Womt");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=document.createElement("canvas"),o=n.getContext("2d");n.width=16,n.height=16;for(var s=o.getImageData(0,0,n.width,n.height),u=0;u<n.height;u+=1)for(var c=0;c<n.width;c+=1){var l=.9+.05*Math.random();0===c||c===n.width-1||0===u||u===n.height-1?l*=.9:1!==c&&c!==n.width-2&&1!==u&&u!==n.height-2||(l*=1.2),l=Math.floor(255*Math.min(Math.max(l,0),1));var f=4*(u*n.height+c);s.data[f]=l,s.data[f+1]=l,s.data[f+2]=l,s.data[f+3]=255}return o.putImageData(s,0,0),(e=i(this,a(t).call(this,n))).magFilter=r.r,e.minFilter=r.r,e.wrapS=r.z,e.wrapT=r.z,e.needsUpdate=!0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r["d"]),t}();t.a=new u},p2bk:function(e,t,n){},vJ50:function(e,t,n){"use strict";var r=n("vzVy"),o=n("dCQc"),i=n("f7Ve"),a=n.n(i);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.promiseId=0,this.promises={},this.worker=new a.a,this.worker.onmessage=this.onMessage.bind(this)}var t,n,r;return t=e,(n=[{key:"generate",value:function(e){var t=this,n=e.size,r=e.voxels,o=this.promiseId,i=this.promises,a=this.worker;return new Promise(function(e){i[o]=e,t.promiseId+=1,a.postMessage({promiseId:o,size:n,voxels:r})})}},{key:"onMessage",value:function(e){var t=e.data,n=t.geometry,r=t.promiseId,o=this.promises;o[r](n),delete o[r]}}])&&s(t.prototype,n),r&&s(t,r),e}());function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(){return{type:r.e,payload:o.a.fetch({endpoint:"realm",method:"PUT"})}}function p(e){var t=e.size,n=e.voxels;return{type:r.m,payload:u.generate({size:t,voxels:n})}}function d(e){return function(t){return t({type:r.g,payload:o.a.fetch({endpoint:"realm/".concat(e)}).then(function(e){return o.a.fetch({endpoint:"realm/".concat(e._id,"/voxels")}).then(function(n){return n=new Uint32Array(n),t(p({size:e.size,voxels:n})),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){l(e,t,n[t])})}return e}({},e,{voxels:n})})})})}}function h(){return{type:r.i}}function y(){return{type:r.j}}function m(){return{type:r.k}}function b(e){return function(t,n){var i=n().realm,a=i.id;return i.isCreator&&o.a.fetch({body:{fog:e},endpoint:"realm/".concat(a,"/metadata"),method:"PUT"}),t({type:r.l,payload:{fog:e}})}}function g(e){var t=e.name;return function(e,n){var i=n().realm.id;return e({type:r.o,payload:o.a.fetch({body:{name:t},endpoint:"realm/".concat(i,"/metadata"),method:"PUT"})})}}function v(e){var t=e.color,n=e.normal,i=e.point,a=e.remove;return function(e,s){var u=s().realm,l=u.id,f=u.isCreator,d=u.size,h=u.voxels,y=c(["x","y","z"].map(function(e){for(var t=Math.floor(i[e]+.5*n[e]*(a?-1:1));t<0;)t+=d;for(;t>=d;)t-=d;return t}),3),m=y[0],b=y[1],g=y[2],v=Math.min(Math.max(Math.round(255*t.r+8*Math.random()-4),0),255),w=Math.min(Math.max(Math.round(255*t.g+8*Math.random()-4),0),255),E=Math.min(Math.max(Math.round(255*t.b+8*Math.random()-4),0),255),S=a?0:1<<24|v<<16|w<<8|E,O=new Uint32Array(h);if(O[g*d*d+b*d+m]=S,e(p({size:d,voxels:O})),f){var x=new FormData;x.append("voxels",new Blob([O.buffer],{type:"text/plain"})),o.a.fetch({body:x,endpoint:"realm/".concat(l,"/voxels"),method:"PUT"})}return e({type:r.q,payload:{voxels:O}})}}n.d(t,"a",function(){return f}),n.d(t,"b",function(){return d}),n.d(t,"c",function(){return h}),n.d(t,"d",function(){return y}),n.d(t,"e",function(){return m}),n.d(t,"f",function(){return b}),n.d(t,"g",function(){return g}),n.d(t,"h",function(){return v})},vzVy:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return a}),n.d(t,"e",function(){return s}),n.d(t,"f",function(){return u}),n.d(t,"g",function(){return c}),n.d(t,"h",function(){return l}),n.d(t,"i",function(){return f}),n.d(t,"j",function(){return p}),n.d(t,"k",function(){return d}),n.d(t,"l",function(){return h}),n.d(t,"m",function(){return y}),n.d(t,"n",function(){return m}),n.d(t,"o",function(){return b}),n.d(t,"p",function(){return g}),n.d(t,"q",function(){return v}),n.d(t,"r",function(){return w}),n.d(t,"u",function(){return E}),n.d(t,"v",function(){return S}),n.d(t,"w",function(){return O}),n.d(t,"z",function(){return x}),n.d(t,"s",function(){return k}),n.d(t,"t",function(){return _}),n.d(t,"x",function(){return R}),n.d(t,"y",function(){return P}),n.d(t,"A",function(){return j});var r="LOBBY/FETCH_REALMS",o="LOBBY/FETCH_REALMS_FULFILLED",i="LOBBY/SET_FILTER",a="LOBBY/SET_PAGE",s="REALM/CREATE",u="REALM/CREATE_FULFILLED",c="REALM/FETCH",l="REALM/FETCH_FULFILLED",f="REALM/HIDE_METADATA_POPUP",p="REALM/RESET",d="REALM/SHOW_METADATA_POPUP",h="REALM/UPDATE_FOG",y="REALM/UPDATE_GEOMETRY",m="REALM/UPDATE_GEOMETRY_FULFILLED",b="REALM/UPDATE_METADATA",g="REALM/UPDATE_METADATA_FULFILLED",v="REALM/UPDATE_VOXELS",w="USER/HIDE_SESSION_POPUP",E="USER/REFRESH_SESSION",S="USER/REFRESH_SESSION_FULFILLED",O="USER/REFRESH_SESSION_REJECTED",x="USER/SHOW_SESSION_POPUP",k="USER/LOGIN",_="USER/LOGIN_FULFILLED",R="USER/REGISTER",P="USER/REGISTER_FULFILLED",j="USER/SIGNOUT"},yHfR:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.loaded={}}var t,n,o;return t=e,(n=[{key:"waitUntilLoaded",value:function(e){var t=this.loaded;return Array.isArray(e)||(e=[e]),Promise.all(e.map(function(e){return new Promise(function(n){if(t[e])n();else{!function r(){if(document.fonts.check("1rem ".concat(e)))return t[e]=!0,void n();setTimeout(r,10)}()}})}))}}])&&r(t.prototype,n),o&&r(t,o),e}();t.a=new o},"z+lE":function(e,t,n){"use strict";var r=n("Womt"),o=n("yHfR");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(e){var n,i=e.anisotropy;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=document.createElement("canvas");a.width=1024,a.height=1024;var c=new r.d(a);return c.anisotropy=i,(n=s(this,u(t).call(this,new r.u(2,2),new r.q({map:c,transparent:!0})))).lookAt(0,-.5,1),n.position.set(0,2.5,-3),n.renderer=a,n.texture=c,o.a.waitUntilLoaded("Roboto").then(function(){return n.draw()}),n}var n,i,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["p"]),n=t,(i=[{key:"dispose",value:function(){var e=this.geometry,t=this.material,n=this.texture;e.dispose(),t.dispose(),n.dispose()}},{key:"draw",value:function(){for(var e=this.renderer,t=this.texture,n=e.getContext("2d"),r=51,o=153,i=51,a=0;a<e.height;a+=8)for(var s=0;s<e.width;s+=8){var u=(1-a/(e.height-8)+.1)/3,c=.6*Math.random()+.3;n.fillStyle="rgba(".concat(Math.floor(r*c),", ").concat(Math.floor(o*c),", ").concat(Math.floor(i*c),", ").concat(u,")"),n.beginPath(),n.arc(s+4,a+4,3,0,2*Math.PI),n.fill()}n.font="700 200px Roboto",n.textAlign="center",n.textBaseline="middle",n.fillStyle="rgba(255, 255, 255, 0.5)",n.fillText("REALMS",.5*e.width,.21*e.height),n.font="70px Roboto",n.fillStyle="#999",n.fillText("A recursive VR experience",.5*e.width,.5*e.height),n.font="50px Roboto",n.fillStyle="#999",n.fillText("v".concat("0.1.83"," - dani@gatunes © 2019"),.5*e.width,.815*e.height),t.needsUpdate=!0}}])&&a(n.prototype,i),l&&a(n,l),t}();t.a=l}},[[0,1,2]]]);
//# sourceMappingURL=main.6123d781b1353a9cf3fe7d8461a5c5cb.js.map