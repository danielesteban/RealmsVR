(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{"+dvs":function(e,t,n){"use strict";(function(e){var r=n("17x9"),o=n.n(r),i=n("q1tI"),a=n("/MKj"),s=n("1339"),c=n.n(s),u=n("QBLo"),l=n("vJ50"),f=n("97A4"),p=n("NaA/"),d=n("Xtfx"),h=n("awf5"),y=n("z+lE"),m=n("4mAa");function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var x=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),w(this,E(n).apply(this,arguments))}var r,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(n,i["PureComponent"]),r=n,(o=[{key:"componentDidMount",value:function(){var e=this.props,t=e.filter,n=e.hasLoaded,r=e.history,o=e.isSigningIn,i=e.pagination,a=e.realms,s=e.user,u=e.renderer.current,l=e.createRealm,f=e.fetchRealms,m=e.setFilter,b=e.setPage,g=e.signin,v=e.signout,w=u.getMaxAnisotropy(),E=u.resetScene();E.add(new p.a),E.add(new h.a),E.add(new y.a({anisotropy:w})),this.menu=new d.a({anisotropy:w,filter:t,history:r,isSigningIn:o,pagination:i,realms:a,user:s,createRealm:l,setFilter:m,setPage:b,signin:g,signout:v}),E.add(this.menu),this.renderer=u,this.scene=E,E.onBeforeRender=this.onBeforeRender.bind(this),u.renderer.vr.enabled||(this.touches=c()(window,{filtered:!0,target:u.canvas.current}).on("start",this.onPointerDown.bind(this))),n||f()}},{key:"componentDidUpdate",value:function(t){var n=t.filter,r=t.isSigningIn,o=t.pagination,i=t.realms,a=t.user,s=this.props,c=s.filter,u=s.isSigningIn,l=s.pagination,f=s.realms,p=s.user,d=s.fetchRealms,h=s.setFilter,y=this.menu,m=this.renderer.isScreenshot,b=c!==n;(b||l.page!==o.page)&&d(),b&&y.updateFilter(c),u!==r&&y.updateSession({isSigningIn:u}),l!==o&&y.updatePagination(l),f!==i&&(y.updateRealms(f),m&&e(function(){window.__SCREENSHOT_READY__=!0})),p!==a&&(y.updateSession({user:p}),p||"user"!==c||h("popular"))}},{key:"componentWillUnmount",value:function(){var e=this.scene,t=this.touches;delete e.onBeforeRender,t&&t.disable()}},{key:"onBeforeRender",value:function(){var e=this.menu,t=this.renderer,n=t.hands,r=t.raycaster;n.children.forEach(function(t,n){var o=t.buttons,i=t.pointer;t.setupRaycaster(r);var a=r.intersectObjects(e.intersects)[0]||!1;if(!a)return i.visible=!1,void e.setHover({hand:n});var s=a.distance,c=a.object,u=a.point;i.scale.z=s-.175,i.visible=!0,c.onPointer({hand:n,isDown:o.triggerDown,point:u})})}},{key:"onPointerDown",value:function(e,t){var n=g(t,2),r=n[0],o=n[1],i=this.menu,a=this.props.isSigningIn,s=this.renderer,c=s.camera,u=s.raycaster,l=s.width,f=s.height;if(!a){u.setFromCamera({x:-2*Math.min(Math.max(.5-r/l,-.5),.5),y:2*Math.min(Math.max(.5-o/f,-.5),.5)},c);var p=u.intersectObjects(i.intersects)[0]||!1;p&&p.object.onPointer({hand:0,isDown:!0,point:p.point})}}},{key:"render",value:function(){return null}}])&&v(r.prototype,o),a&&v(r,a),n}();x.defaultProps={user:void 0},x.propTypes={filter:o.a.string.isRequired,hasLoaded:o.a.bool.isRequired,history:o.a.object.isRequired,isSigningIn:o.a.bool.isRequired,pagination:o.a.shape({page:o.a.number.isRequired,pages:o.a.number.isRequired}).isRequired,realms:o.a.arrayOf(o.a.shape({name:o.a.string.isRequired,slug:o.a.string.isRequired})).isRequired,renderer:o.a.shape({current:o.a.instanceOf(m.a)}).isRequired,user:o.a.shape({_id:o.a.string,name:o.a.string}),createRealm:o.a.func.isRequired,fetchRealms:o.a.func.isRequired,setFilter:o.a.func.isRequired,setPage:o.a.func.isRequired,signin:o.a.func.isRequired,signout:o.a.func.isRequired},t.a=Object(a.connect)(function(e){var t=e.lobby,n=t.filter,r=t.hasLoaded,o=t.pagination,i=t.realms,a=e.user,s=a.isAuth,c=a.isSigningIn,u=a.profile;return{filter:n,hasLoaded:r,isSigningIn:c,pagination:o,realms:i,user:s?u:void 0}},{createRealm:l.a,fetchRealms:u.a,setFilter:u.b,setPage:u.c,signin:f.f,signout:f.g})(x)}).call(this,n("URgk").setImmediate)},0:function(e,t,n){n("55Il"),n("p2bk"),e.exports=n("7RL8")},1:function(e,t){},2:function(e,t){},3:function(e,t){},"4mAa":function(e,t,n){"use strict";var r=n("q1tI"),o=n.n(r),i=(n("MZFn"),n("Womt")),a=n("Vb2j"),s=n.n(a),c=n("xaIH"),u=n.n(c);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(e){var n,r,o,a=e.canvas;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=p(t).call(this,70,1,.1,1024))||"object"!==l(o)&&"function"!=typeof o?d(r):o).canvas=a,n.rotation.order="YXZ",n.aux={direction:new i.G,forward:new i.G,right:new i.G,up:new i.G,worldUp:new i.G(0,1,0)},n.input={keyboard:new i.G(0,0,0),pointer:new i.F(0,0)},n.fullscreen=s()(a),n.onBlur=n.onBlur.bind(d(n)),n.onKeyboardDown=n.onKeyboardDown.bind(d(n)),n.onKeyboardUp=n.onKeyboardUp.bind(d(n)),n.reset(),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,i["t"]),n=t,(r=[{key:"onBlur",value:function(){this.input.keyboard.set(0,0,0)}},{key:"onKeyboardDown",value:function(e){var t=e.keyCode,n=e.repeat,r=this.input.keyboard;if(!n)switch(t){case 65:r.x=-1;break;case 68:r.x=1;break;case 16:r.y=-1;break;case 32:r.y=1;break;case 83:r.z=-1;break;case 87:r.z=1}}},{key:"onKeyboardUp",value:function(e){var t=e.keyCode,n=e.repeat,r=this.input.keyboard;if(!n)switch(t){case 65:r.x<0&&(r.x=0);break;case 68:r.x>0&&(r.x=0);break;case 16:r.y<0&&(r.y=0);break;case 32:r.y>0&&(r.y=0);break;case 83:r.z<0&&(r.z=0);break;case 87:r.z>0&&(r.z=0)}}},{key:"onPointerLockAttain",value:function(e){var t=this.fullscreen;this.isLocked=!0,this.rotation.z=0,window.addEventListener("blur",this.onBlur,!1),window.addEventListener("keydown",this.onKeyboardDown,!1),window.addEventListener("keyup",this.onKeyboardUp,!1),e.on("data",this.onPointerMovement.bind(this)),e.on("close",this.onPointerLockClose.bind(this)),t.request()}},{key:"onPointerLockClose",value:function(){var e=this.fullscreen,t=this.input,n=t.keyboard,r=t.pointer;window.removeEventListener("blur",this.onBlur),window.removeEventListener("keydown",this.onKeyboardDown),window.removeEventListener("keyup",this.onKeyboardUp),this.isLocked=!1,e.release(),n.set(0,0,0),r.set(0,0)}},{key:"onPointerMovement",value:function(e){var t=e.dx,n=e.dy;this.input.pointer.set(t,n)}},{key:"onAnimationTick",value:function(e){var t=e.delta,n=this.isLocked,r=this.input,o=r.keyboard,i=r.pointer,a=this.rotation,s=this.position;if(n){if(0!==i.x||0!==i.y){a.y-=.003*i.x,a.x-=.003*i.y;var c=Math.PI/2;a.x=Math.max(-c,Math.min(c,a.x)),i.set(0,0)}if(0!==o.x||0!==o.y||0!==o.z){var u=this.aux,l=u.direction,f=u.forward,p=u.right,d=u.up,h=u.worldUp;this.getWorldDirection(f),p.crossVectors(f,h).normalize(),d.crossVectors(p,f).normalize(),l.set(0,0,0).addScaledVector(p,o.x).addScaledVector(d,o.y).addScaledVector(f,o.z).normalize(),s.addScaledVector(l,6*t),this.updateMatrixWorld()}}}},{key:"reset",value:function(){var e=this.position,t=this.rotation;e.set(0,1.5,.5),t.set(0,0,0),this.lookAt(0,1.5,.5),this.canLock=!1}},{key:"canLock",get:function(){return this._canLock},set:function(e){e&&!this.pointerlock&&u.a.available()&&(this.pointerlock=u()(this.canvas),this.pointerlock.on("attain",this.onPointerLockAttain.bind(this))),!e&&this.pointerlock&&(this.pointerlock.destroy(),delete this.pointerlock),this._canLock=e}}])&&f(n.prototype,r),o&&f(n,o),t}(),m=n("ooUw");function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var S=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),t.mesh&&t.pointerMesh||t.setup(),e=v(this,w(t).call(this));for(var n=t.mesh,r=t.pointerMesh,o=function(o){var i=n.clone();i.buttons={menu:!1,menuDown:!1,menuUp:!1,grip:!1,gripDown:!1,gripUp:!1,pad:!1,padDown:!1,padUp:!1,trigger:!1,triggerDown:!1,triggerUp:!1},i.pointer=r.clone(),i.pointer.visible=!1,i.add(i.pointer),i.matrixAutoUpdate=!1,i.setupRaycaster=function(e){return t.setupRaycaster({hand:i,raycaster:e})},i.visible=!1,e.add(i)},i=0;i<2;i+=1)o();return e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,i["s"]),n=t,o=[{key:"setupRaycaster",value:function(e){var t=e.hand,n=e.raycaster;t.auxMatrix||(t.auxMatrix=new i.o);var r=t.auxMatrix,o=t.matrixWorld;r.identity().extractRotation(o),n.ray.origin.setFromMatrixPosition(o),n.ray.direction.set(0,0,-1).applyMatrix4(r),n.ray.origin.addScaledVector(n.ray.direction,-.175)}},{key:"setup",value:function(){if(!t.geometry){var e=new i.a(1,1,1);e.scale(.05,.03,.2),e.translate(0,0,.075),e.faces.forEach(function(e,t){e.color.set(7829367),t>=10&&t<=11&&e.color.offsetHSL(0,0,-.1)}),t.geometry=(new i.c).fromGeometry(e)}t.material||(t.material=new i.q({color:16769213,map:m.a})),t.mesh||(t.mesh=new i.p(t.geometry,t.material)),t.pointerGeometry||(t.pointerGeometry=(new i.c).setFromPoints([new i.G(0,0,0),new i.G(0,0,-1)])),t.pointerMaterial||(t.pointerMaterial=new i.n({color:16769213})),t.pointerMesh||(t.pointerMesh=new i.m(t.pointerGeometry,t.pointerMaterial))}}],(r=[{key:"update",value:function(){var e=this.children,t="getGamepads"in navigator?navigator.getGamepads():[];e.forEach(function(e){e.visible=!1});for(var n=0,r=0;r<t.length;r+=1){var o=t[r];if(o&&("OpenVR Gamepad"===o.id||o.id.startsWith("Oculus Touch")||o.id.startsWith("Spatial Controller"))&&(o.pose&&this.updateHand({hand:e[n],buttons:o.buttons,pose:o.pose}),(n+=1)>1))break}}},{key:"updateHand",value:function(e){var t=e.hand,n=e.buttons,r=e.pose,o=this.standingMatrix;null!==r.position&&t.position.fromArray(r.position),null!==r.orientation&&t.quaternion.fromArray(r.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(o),t.matrixWorldNeedsUpdate=!0,t.visible=!0;var i=n[3]&&n[3].pressed;t.buttons.menuDown=i&&t.buttons.menu!==i,t.buttons.menuUp=!i&&t.buttons.menu!==i,t.buttons.menu=i;var a=n[2]&&n[2].pressed;t.buttons.gripDown=a&&t.buttons.grip!==a,t.buttons.gripUp=!a&&t.buttons.grip!==a,t.buttons.grip=a;var s=n[0]&&n[0].pressed;t.buttons.padDown=s&&t.buttons.pad!==s,t.buttons.padUp=!s&&t.buttons.pad!==s,t.buttons.pad=s;var c=n[1]&&n[1].pressed;t.buttons.triggerDown=c&&t.buttons.trigger!==c,t.buttons.triggerUp=!c&&t.buttons.trigger!==c,t.buttons.trigger=c}}])&&g(n.prototype,r),o&&g(n,o),t}();function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var j=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=_(t).call(this,e))||"object"!==x(i)&&"function"!=typeof i?R(r):i).canvas=o.a.createRef(),n.onAnimationTick=n.onAnimationTick.bind(R(n)),n.onResize=n.onResize.bind(R(n)),n}var n,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=this.canvas.current;this.isScreenshot=window.__SCREENSHOT__,this.camera=new y({canvas:e}),this.clock=new i.e,this.fog=new i.i(0,.0125),this.raycaster=new i.y;var t=new i.I({antialias:!0,canvas:e,powerPreference:"high-performance",stencil:!1});t.setPixelRatio(window.devicePixelRatio||1),t.setAnimationLoop(this.onAnimationTick),window.addEventListener("resize",this.onResize,!1),this.renderer=t,this.room=new i.s,this.room.add(this.camera),this.hands=new S,this.room.add(this.hands),this.resetScene(),this.onResize(),this.setupVR()}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"onAnimationTick",value:function(){var e=this.camera,t=this.clock,n=this.hands,r=this.renderer,o=this.scene,i=this.stats;i&&i.begin(),r.animation={delta:t.getDelta(),time:t.oldTime/1e3},e.onAnimationTick(r.animation),n.update(),r.render(o,e),i&&i.end()}},{key:"onResize",value:function(){var e=this.canvas.current,t=this.camera,n=this.renderer,r=e.parentNode.getBoundingClientRect(),o=r.width,i=r.height;this.width=o,this.height=i,n.vr.isPresenting()||n.setSize(o,i),t.aspect=o/i,t.updateProjectionMatrix()}},{key:"getMaxAnisotropy",value:function(){return this.renderer.capabilities.getMaxAnisotropy()}},{key:"setFog",value:function(e){var t=this.fog,n=this.renderer;t.color.setHex(e),n.setClearColor(t.color)}},{key:"setupVR",value:function(){var e=this.hands,t=this.renderer,n="xr"in navigator,r="getVRDisplays"in navigator;if(n){var o=function(){if(!t.vr.isPresenting()){var e=t.vr.getDevice();e?e.requestSession({immersive:!0,exclusive:!0}).then(function(e){t.vr.setSession(e,{frameOfReferenceType:"stage"})}):navigator.xr.requestDevice().then(function(e){t.vr.enabled=!0,t.vr.setDevice(e)})}};window.addEventListener("mousedown",o,!1),o()}else if(r){var i=function(){if(!t.vr.isPresenting()){var e=t.vr.getDevice();e?e.requestPresent([{source:t.domElement}]):navigator.getVRDisplays().then(function(e){if(e.length){var n=O(e,1)[0];t.vr.enabled=!0,t.vr.setDevice(n)}})}};window.addEventListener("mousedown",i,!1),window.addEventListener("vrdisplayactivate",i,!1),i()}e.standingMatrix=t.vr.getStandingMatrix()}},{key:"resetScene",value:function(){return this.scene&&this.scene.children.forEach(function(e){e.dispose&&e.dispose()}),this.room.position.set(0,0,0),this.camera.reset(),this.setFog(131604),this.scene=new i.A,this.scene.add(this.room),this.scene.fog=this.fog,this.scene}},{key:"render",value:function(){var e=this.canvas;return o.a.createElement("canvas",{ref:e})}}])&&k(n.prototype,a),s&&k(n,s),t}();i.B.fog_vertex=i.B.fog_vertex.replace("fogDepth = -mvPosition.z;","fogDepth = length(mvPosition);");t.a=j},"7RL8":function(e,t,n){"use strict";n.r(t);var r=n("LhCv"),o=n("q1tI"),i=n.n(o),a=n("i8i4"),s=n("ANjH"),c=n("Igns"),u=n("/MKj"),l=n("gyEF"),f=n.n(l),p=n("Ty5D"),d=n("sINF"),h=n("97A4"),y=(n("bo1M"),n("wcCE")),m=n("N2Rb");var b={en:{Realm:{editMetadata:"Edit metadata",name:"Name",save:"Save"},User:{confirmPassword:"Confirm password",email:"Email",name:"Name",signIn:"Sign-In",signInWithGoogle:"Sign-In with Google",signOut:"Sign-Out",password:"Password",register:"Create an account"}},es:{Realm:{editMetadata:"Editar metadatos",name:"Nombre",save:"Guardar"},User:{confirmPassword:"Confirmar contraseña",email:"Email",name:"Nombre",signIn:"Iniciar sesión",signInWithGoogle:"Iniciar sesión con Google",signOut:"Cerrar sesión",password:"Contraseña",register:"Crear una cuenta"}}},g=Object.keys(b),v={};g.forEach(function(e){v[e]=Object(y.recursive)(!0,b.en,b[e])});var w=n("vzVy");function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){S(e,t,n[t])})}return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=Object(s.c)({filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"popular",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.c:return t.payload.value;default:return e}},hasLoaded:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case w.b:return!0;case w.f:return!1;default:return e}},pagination:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:0,pages:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.b:return E({},e,{pages:t.payload.pages});case w.c:return E({},e,{page:0});case w.d:return E({},e,{page:t.payload.value});default:return e}},realms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.b:return t.payload.realms;default:return e}}}),O=Object(s.c)({geometry:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.n:return t.payload;case w.j:return{};default:return e}},fog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:131604,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.h:case w.l:return t.payload.fog;case w.j:return 131604;default:return e}},id:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.h:return t.payload._id;case w.j:return"";default:return e}},isCreator:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.h:return!!t.payload.isCreator;case w.j:return!1;default:return e}},isEditingMetadata:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case w.k:return!0;case w.i:case w.j:case w.p:return!1;default:return e}},name:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.h:return t.payload.name;case w.j:return"";default:return e}},size:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.h:return t.payload.size;case w.j:return 0;default:return e}},voxels:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint32Array,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.h:case w.q:return t.payload.voxels;case w.j:return new Uint32Array;default:return e}}}),k=n("dCQc");function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=JSON.parse(localStorage.getItem("REALMSVR::SESSION")||"false");R&&k.a.setAuthorization(R.token);var P=Object(s.c)({isAuth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!!R;switch((arguments.length>1?arguments[1]:void 0).type){case w.v:case w.t:case w.y:return!0;case w.w:case w.A:return!1;default:return e}},isSigningIn:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case w.z:return!0;case w.t:case w.r:case w.y:return!1;default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R?R.profile:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.v:case w.t:case w.y:var n=t.payload.profile;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){_(e,t,n[t])})}return e}({},n,{firstName:n.name.split(" ")[0]});case w.w:case w.A:return{};default:return e}},token:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R?R.token:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.v:case w.t:case w.y:return k.a.setAuthorization(t.payload.token),localStorage.setItem("REALMSVR::SESSION",JSON.stringify(t.payload)),t.payload.token;case w.w:case w.A:return k.a.setAuthorization(!1),localStorage.removeItem("REALMSVR::SESSION"),"";default:return e}}}),j=Object(s.c)({i18n:m.i18nReducer,loadingBar:l.loadingBarReducer,lobby:x,realm:O,user:P}),M=n("vOnD"),A=M.a.a.withConfig({displayName:"discord__Link",componentId:"sc-1h0tese-0"})(["position:absolute;bottom:0;right:0;"]),C=function(){return i.a.createElement(A,{href:"https://discord.gg/9KyFbe8",rel:"noopener noreferrer",target:"_blank"},i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"80",height:"80",viewBox:"0 0 245 240",fill:"#fff"},i.a.createElement("path",{d:"M104.4 103.9c-5.7 0-10.2 5-10.2 11.1s4.6 11.1 10.2 11.1c5.7 0 10.2-5 10.2-11.1.1-6.1-4.5-11.1-10.2-11.1zM140.9 103.9c-5.7 0-10.2 5-10.2 11.1s4.6 11.1 10.2 11.1c5.7 0 10.2-5 10.2-11.1s-4.5-11.1-10.2-11.1z"}),i.a.createElement("path",{d:"M189.5 20h-134C44.2 20 35 29.2 35 40.6v135.2c0 11.4 9.2 20.6 20.5 20.6h113.4l-5.3-18.5 12.8 11.9 12.1 11.2 21.5 19V40.6c0-11.4-9.2-20.6-20.5-20.6zm-38.6 130.6s-3.6-4.3-6.6-8.1c13.1-3.7 18.1-11.9 18.1-11.9-4.1 2.7-8 4.6-11.5 5.9-5 2.1-9.8 3.5-14.5 4.3-9.6 1.8-18.4 1.3-25.9-.1-5.7-1.1-10.6-2.7-14.7-4.3-2.3-.9-4.8-2-7.3-3.4-.3-.2-.6-.3-.9-.5-.2-.1-.3-.2-.4-.3-1.8-1-2.8-1.7-2.8-1.7s4.8 8 17.5 11.8c-3 3.8-6.7 8.3-6.7 8.3-22.1-.7-30.5-15.2-30.5-15.2 0-32.2 14.4-58.3 14.4-58.3 14.4-10.8 28.1-10.5 28.1-10.5l1 1.2c-18 5.2-26.3 13.1-26.3 13.1s2.2-1.2 5.9-2.9c10.7-4.7 19.2-6 22.7-6.3.6-.1 1.1-.2 1.7-.2 6.1-.8 13-1 20.2-.2 9.5 1.1 19.7 3.9 30.1 9.6 0 0-7.9-7.5-24.9-12.7l1.4-1.6s13.7-.3 28.1 10.5c0 0 14.4 26.1 14.4 58.3 0 0-8.5 14.5-30.6 15.2z"})))},L=M.a.a.withConfig({displayName:"github__Link",componentId:"sc-10jf6yn-0"})(["position:absolute;top:0;right:0;.octo-arm{transform-origin:130px 106px;}&:hover .octo-arm{animation:octocat-wave 560ms ease-in-out;}@keyframes octocat-wave{0%{transform:rotate(0deg);}20%{transform:rotate(-25deg);}40%{transform:rotate(10deg);}60%{transform:rotate(-25deg);}80%{transform:rotate(10deg);}100%{transform:rotate(0deg);}}"]),T=function(){return i.a.createElement(L,{href:"https://github.com/danielesteban/RealmsVR#readme",rel:"noopener noreferrer",target:"_blank"},i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"80",height:"80",viewBox:"0 0 250 250",fill:"#fff"},i.a.createElement("path",{d:"M0 0l115 115h15l12 27 108 108V0z",fill:"#000"}),i.a.createElement("path",{className:"octo-arm",d:"M128 109c-15-9-9-19-9-19 3-7 2-11 2-11-1-7 3-2 3-2 4 5 2 11 2 11-3 10 5 15 9 16"}),i.a.createElement("path",{className:"octo-body",d:"M115 115s4 2 5 0l14-14c3-2 6-3 8-3-8-11-15-24 2-41 5-5 10-7 16-7 1-2 3-7 12-11 0 0 5 3 7 16 4 2 8 5 12 9s7 8 9 12c14 3 17 7 17 7-4 8-9 11-11 11 0 6-2 11-7 16-16 16-30 10-41 2 0 3-1 7-5 11l-12 11c-1 1 1 5 1 5z"})))},I=n("rCLJ");function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var G=M.a.div.withConfig({displayName:"music__Wrapper",componentId:"sc-1qpg9ee-0"})(["position:fixed;bottom:0;left:0;display:flex;align-items:flex-end;box-shadow:0 0 8px rgba(0,0,0,.4);> a > img{width:100px;height:100px;background:#000;border:0;outline:none;vertical-align:middle;}> div{box-sizing:border-box;width:220px;height:100px;background:rgba(0,0,0,.5);padding:0.5rem 1rem;border-radius:0 4px 0 0;> a{display:block;text-decoration:none;outline:none;font-size:1.25em;line-height:1.5em;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;&:hover{text-decoration:underline;}}> a:nth-child(1){color:#eee;}> a:nth-child(2){color:#aaa;}}"]),B=M.a.div.withConfig({displayName:"music__Progress",componentId:"sc-1qpg9ee-1"})(["height:3px;margin:0.5rem 0;background-color:#333;border-radius:2px;overflow:hidden;> div{height:100%;background-color:#393;}"]),H=M.a.div.withConfig({displayName:"music__Controls",componentId:"sc-1qpg9ee-2"})(["display:flex;align-items:center;> button{display:flex;align-items:center;justify-content:center;background-color:#333;border:1px solid #111;color:#fff;font-family:inherit;font-size:inherit;font-weight:inherit;padding:0.25rem 0;width:2.5rem;border-radius:2px;margin-right:0.125rem;cursor:pointer;outline:none;}> span{margin-left:auto;}"]),W=Math.pow(2,32)-1,V=new Uint32Array(1),J=function(e){return Math.floor((window.crypto&&window.crypto.getRandomValues?window.crypto.getRandomValues(V)[0]/W:Math.random())*e)},K=function(e){function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=q(t).call(this,e))||"object"!==U(o)&&"function"!=typeof o?F(r):o).next=n.next.bind(F(n)),n.toggle=n.toggle.bind(F(n));for(var i=D(t.tracks),a=i.length-1;a>=0;a-=1){var s=J(a+1),c=i[a];i[a]=i[s],i[s]=c}return n.player=document.createElement("audio"),n.player.ontimeupdate=n.onTimeUpdate.bind(F(n)),n.player.onended=n.next,n.player.volume=.5,n.state={isPlaying:!1,playhead:0,time:"0:00",track:void 0},n.track=0,n.tracks=i,n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,o["PureComponent"]),n=t,(r=[{key:"componentDidMount",value:function(){this.waitForFirstInteraction()}},{key:"onTimeUpdate",value:function(){var e=this.player,t=Math.floor(e.currentTime/60),n=Math.floor(e.currentTime%60);this.setState({playhead:e.currentTime/e.duration,time:"".concat(t,":").concat(n<10?"0":"").concat(n)})}},{key:"waitForFirstInteraction",value:function(){var e=this,t=function t(){window.removeEventListener("mousedown",t),window.removeEventListener("touchstart",t),window.removeEventListener("vrdisplayactivate",t),e.play()};window.addEventListener("mousedown",t,!1),window.addEventListener("touchstart",t,!1),window.addEventListener("vrdisplayactivate",t,!1)}},{key:"next",value:function(){var e=this.player,t=this.tracks;e.paused||e.pause(),e.src="",this.track=(this.track+1)%t.length,this.play()}},{key:"play",value:function(){var e=this,t=this.player,n=this.track,r=this.tracks,o="client_id=eb5fcff9e107aab508431b4c3c416415",i=r[n];fetch("https://api.soundcloud.com/tracks/".concat(i,"?format=json&").concat(o)).then(function(e){if(200!==e.status)throw new Error("Couldn't fetch track: ".concat(i));return e.json()}).then(function(n){var r="".concat(n.user.username," - ");0===n.title.indexOf(r)&&(n.title=n.title.substr(r.length)),t.src="".concat(n.stream_url,"?").concat(o),t.play(),e.setState({isPlaying:!0,playhead:0,time:"0:00",track:n})}).catch(function(){return e.next()})}},{key:"toggle",value:function(){var e=this.player;e.paused?e.play():e.pause(),this.setState({isPlaying:!e.paused})}},{key:"render",value:function(){var e=this.state,t=e.isPlaying,n=e.playhead,r=e.time,o=e.track;if(!o)return null;var a=o.title,s=o.artwork_url,c=o.permalink_url,u=o.user,l=u.username,f=u.permalink_url,p=o.waveform_url;return i.a.createElement(G,null,i.a.createElement("a",{href:c,rel:"noopener noreferrer",target:"_blank"},i.a.createElement("img",{alt:a,src:s||p})),i.a.createElement("div",null,i.a.createElement("a",{href:c,rel:"noopener noreferrer",target:"_blank"},a),i.a.createElement("a",{href:f,rel:"noopener noreferrer",target:"_blank"},l),i.a.createElement(B,null,i.a.createElement("div",{style:{width:"".concat(100*n,"%")}})),i.a.createElement(H,null,i.a.createElement("button",{type:"button",onClick:this.toggle},t?i.a.createElement(I.d,null):i.a.createElement(I.e,null)),i.a.createElement("button",{type:"button",onClick:this.next},i.a.createElement(I.c,null)),i.a.createElement("span",null,r))))}}])&&z(n.prototype,r),a&&z(n,a),t}();K.tracks=[334831124,3654595,3654647,62965282,55529274,40801532,28921242,58102473,44049414,584470,348172961,348172759,118227213,58103033,58102746,29062473,73664676,217254339,26016069,143994169,34751566,22899851,19645145,14604316,14604145,9747273,290203217,290202627,290203029,290203125,230280393,230280565,230280839,290202890,230280665,230280740,174033188,238809205,219872323,85441920,85442027,85442324,85442658,295429557,31232642,118720768,66345578,64979755,9747680,3654444,354826097,174209343,374346584,374346578,374346566,374346536,374346518,374346506,374346440,272272960,82537981,272272962,331110005,253646536,69972925,297108748,95089740,264157290,3654394,51204969,28460870,270165801,93513660,107137565,200476847,241036508,345846433,13728685,3193491,235796705,74366070,293115267,65027631,226460783,132730188,267647225,331743020,348075711,328602395,232135696,13385987,303726380,319470292,312179497,300022056,212600702,336206149,319100206,299965683,308768675,202903037,220992150,221433894,223843476,155626389,155626391,306589305,304501298,305600086,300328640,283863336,283863306,260674048,117308221,78683752,340317786,277352612,226847547,220656015,224154466,240254433,249957904,260419888,250754945,235013168,336784751,277029337,229288316,343272434,343194325,334599482,343032721,343661072,343552665,344563095,285122161,1687603,286269026,340681124,265119655,345756307,351035779,350060806,352308515,353896778,353896991,353896595,355550264,360321368,337715872,272189608,43751468,65190792,200959753,347608134,133531982,183519916,185401372,42227482,376984973,372830927,376671563,376317227,342538038,338288083,338266624,265353084,159115092,122088683,85356706,69351024,18159187,28667337,169274681,221402560,402032439,401604759,416088969,424864200,424881921,426294102,430158741,441378576,440982825,438854664,451627668,285022424,416942091,289481139,236661381,289727425,302903905,284737661,275642447,291943120,284052253,228088399,209533328,90164812,43727131,175757015];var Y=K,X=n("4mAa"),Q=n("17x9"),Z=n.n(Q),$=n("eysR");function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ie=M.a.div.withConfig({displayName:"session__Tabs",componentId:"sc-1avroa0-0"})(["display:flex;height:100%;> a{display:flex;align-items:center;background:#222;padding:0 1rem;border-left:1px solid #333;cursor:pointer;&:first-child{border-left:none;}&.active{background:#444;cursor:default;}}"]),ae=M.a.div.withConfig({displayName:"session__Content",componentId:"sc-1avroa0-1"})([".google{display:flex;justify-content:center;}.or{position:relative;width:100%;border-top:1px solid #222;margin:2rem 0;> span{position:absolute;display:block;left:50%;transform:translate(-50%,-50%);}}button{display:flex;align-items:center;border:1px solid #555;background:#222;padding:0.5rem 1rem;margin:0;font-family:inherit;font-weight:700;font-size:1.2rem;color:inherit;cursor:pointer;outline:0;> svg{font-size:1.5em;margin-right:0.5rem;}}"]),se=M.a.form.withConfig({displayName:"session__Form",componentId:"sc-1avroa0-2"})(["display:none;flex-direction:column;align-items:center;width:80%;&.active{display:flex;}> label{width:100%;padding:0;}> input{box-sizing:border-box;border:1px solid #333;width:100%;background:#222;color:inherit;font-family:inherit;font-weight:400;font-size:2em;padding:0.5rem;margin:0 0 1rem;}"]),ce=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=ne(t).call(this,e))||"object"!==ee(o)&&"function"!=typeof o?re(r):o).onLoginSubmit=n.onLoginSubmit.bind(re(n)),n.onRegisterSubmit=n.onRegisterSubmit.bind(re(n)),n.state={tab:"login"},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(t,o["PureComponent"]),n=t,(r=[{key:"componentWillReceiveProps",value:function(e){var t=e.isSigningIn,n=this.props.isSigningIn;t&&!n&&this.setState({tab:"login"})}},{key:"onLoginSubmit",value:function(e){e.preventDefault();var t=e.target;(0,this.props.login)({email:t.email.value,password:t.password.value})}},{key:"onRegisterSubmit",value:function(e){e.preventDefault();var t=e.target,n=this.props.register;t.password.value===t.confirmPassword.value&&n({email:t.email.value,name:t.name.value,password:t.password.value})}},{key:"render",value:function(){var e=this,t=this.props,n=t.isSigningIn,r=t.hide,o=t.loginWithGoogle,a=this.state.tab,s=i.a.createElement(ie,null,i.a.createElement("a",{className:"login"===a?"active":null,onClick:function(){return e.setState({tab:"login"})}},i.a.createElement(m.Translate,{value:"User.signIn"})),i.a.createElement("a",{className:"register"===a?"active":null,onClick:function(){return e.setState({tab:"register"})}},i.a.createElement(m.Translate,{value:"User.register"})));return i.a.createElement($.a,{heading:s,isShowing:n,hide:r},i.a.createElement(ae,null,i.a.createElement(se,{className:"login"===a?"active":null,onSubmit:this.onLoginSubmit},i.a.createElement("label",null,i.a.createElement(m.Translate,{value:"User.email"})),i.a.createElement("input",{type:"email",name:"email",required:!0}),i.a.createElement("label",null,i.a.createElement(m.Translate,{value:"User.password"})),i.a.createElement("input",{type:"password",name:"password",required:!0}),i.a.createElement("button",{type:"submit"},i.a.createElement(I.b,null),i.a.createElement(m.Translate,{value:"User.signIn"}))),i.a.createElement(se,{className:"register"===a?"active":null,onSubmit:this.onRegisterSubmit},i.a.createElement("label",null,i.a.createElement(m.Translate,{value:"User.name"})),i.a.createElement("input",{type:"text",name:"name",required:!0}),i.a.createElement("label",null,i.a.createElement(m.Translate,{value:"User.email"})),i.a.createElement("input",{type:"email",name:"email",required:!0}),i.a.createElement("label",null,i.a.createElement(m.Translate,{value:"User.password"})),i.a.createElement("input",{type:"password",name:"password",required:!0}),i.a.createElement("label",null,i.a.createElement(m.Translate,{value:"User.confirmPassword"})),i.a.createElement("input",{type:"password",name:"confirmPassword",required:!0}),i.a.createElement("button",{type:"submit"},i.a.createElement(I.b,null),i.a.createElement(m.Translate,{value:"User.register"}))),i.a.createElement("div",{className:"or"},i.a.createElement(m.Translate,{value:"User.or"})),i.a.createElement("div",{className:"google"},i.a.createElement("button",{onClick:o,type:"button"},i.a.createElement(I.f,null),i.a.createElement(m.Translate,{value:"User.signInWithGoogle"})))))}}])&&te(n.prototype,r),a&&te(n,a),t}();ce.propTypes={isSigningIn:Z.a.bool.isRequired,hide:Z.a.func.isRequired,login:Z.a.func.isRequired,loginWithGoogle:Z.a.func.isRequired,register:Z.a.func.isRequired};var ue=Object(u.connect)(function(e){return{isSigningIn:e.user.isSigningIn}},{hide:h.a,login:h.b,loginWithGoogle:h.c,register:h.e})(ce),le=n("+dvs"),fe=n("JaV3");function pe(){return(pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var de=function(e){var t=e.renderer;return i.a.createElement(p.d,null,[{path:"/",Component:le.a},{path:"/:slug",Component:fe.a}].map(function(e){var n=e.path,r=e.Component;return i.a.createElement(p.b,{exact:!0,key:n,path:n,render:function(e){return i.a.createElement(r,pe({},e,{renderer:t}))}})}),i.a.createElement(p.a,{to:"/"}))};de.propTypes={renderer:Z.a.shape({current:Z.a.instanceOf(X.a)}).isRequired};var he=de;function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e,t){return!t||"object"!==ye(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var we,Ee,Se,xe,Oe=M.a.div.withConfig({displayName:"layout__Wrapper",componentId:"d2i6t1-0"})(["width:100vw;height:100vh;"]),ke={backgroundColor:"#393",zIndex:1},_e=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=be(this,ge(t).call(this,e))).renderer=i.a.createRef(),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ve(e,t)}(t,o["PureComponent"]),n=t,(r=[{key:"render",value:function(){var e=this.renderer,t=window.__SCREENSHOT__;return i.a.createElement("div",null,i.a.createElement(f.a,{style:ke}),i.a.createElement(Oe,null,i.a.createElement(X.a,{ref:e})),i.a.createElement(he,{renderer:e}),i.a.createElement(Y,null),t?null:i.a.createElement("div",null,i.a.createElement(C,null),i.a.createElement(T,null)),i.a.createElement(ue,null))}}])&&me(n.prototype,r),a&&me(n,a),t}(),Re=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,s.d),Pe=Object(s.e)(j,{},Re(Object(s.a)(d.a,c.a,Object(l.loadingBarMiddleware)())));we=Pe,Ee=localStorage.getItem("REALMSVR::LOCALE"),Se=((window.navigator.languages?window.navigator.languages[0]:null)||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage||"en").substr(0,2).toLowerCase(),xe="en",~g.indexOf(Ee)?xe=Ee:~g.indexOf(Se)&&(xe=Se),Object(m.syncTranslationWithStore)(we),function(e){e.dispatch(Object(m.loadTranslations)(v))}(we),we.dispatch(Object(m.setLocale)(xe)),Pe.getState().user.isAuth&&Pe.dispatch(Object(h.d)());var je=Object(r.a)({basename:"/"});window.location.hash&&je.replace("/".concat(window.location.hash.substr(2))),window.GoogleAnalyticsObject="ga",window.ga=function(){window.ga.q||(window.ga.q=[]),window.ga.q.push(arguments)},window.ga.l=1*new Date,window.ga("create","UA-113342424-4","auto"),window.ga("send","pageview");var Me=document.createElement("script");Me.async=!0,Me.src="https://www.google-analytics.com/analytics.js",document.body.appendChild(Me),je.listen(function(e){var t=e.pathname;return window.ga("send","pageview",t)}),window.addEventListener("contextmenu",function(e){return e.preventDefault()},!1);var Ae=document.getElementById("mount");Object(a.render)(i.a.createElement(u.Provider,{store:Pe},i.a.createElement(p.c,{history:je},i.a.createElement(_e,null))),Ae)},"97A4":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"e",function(){return a}),n.d(t,"d",function(){return s}),n.d(t,"f",function(){return c}),n.d(t,"b",function(){return u}),n.d(t,"c",function(){return l}),n.d(t,"g",function(){return f});n("N2Rb");var r=n("vzVy"),o=n("dCQc");function i(){return{type:r.r}}function a(e){var t=e.email,n=e.name,i=e.password;return function(e){return e({type:r.x,payload:o.a.fetch({body:{email:t,name:n,password:i},endpoint:"user",method:"PUT"})}).catch(function(){})}}function s(){return function(e){return e({type:r.u,payload:o.a.fetch({endpoint:"user"})}).catch(function(){})}}function c(){return{type:r.z}}function u(e){var t=e.email,n=e.password;return function(e){return e({type:r.s,payload:o.a.fetch({body:{email:t,password:n},endpoint:"user",method:"POST"})}).catch(function(){})}}function l(){return function(e){var t=window.screen.width/2-256,n=window.screen.height/2-256,i=window.open("".concat(o.a.baseURL,"user/google"),"loginWithGoogle","width=".concat(512,",height=").concat(512,",top=").concat(n,",left=").concat(t)),a=setInterval(function(){i.window?i.postMessage(!0,o.a.baseURL):clearInterval(a)},100);window.addEventListener("message",function t(n){var i=n.origin,s=n.data.session;if(0===o.a.baseURL.indexOf(i)){if(window.removeEventListener("message",t),clearInterval(a),!s)return;e({type:r.t,payload:s})}},!1)}}function f(){return{type:r.A}}},CEu6:function(e,t,n){"use strict";var r=n("Womt"),o=n("ooUw");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(e){var n,i=e.instanced,a=void 0!==i&&i;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=s(this,c(t).call(this)),a){var u=t.shader;n.geometry=new r.l,n.material=new r.D({defines:u.defines,vertexShader:u.vertex,fragmentShader:u.fragment,uniforms:r.E.merge([u.uniforms,{map:{value:o.a}}]),fog:!0,vertexColors:r.H})}else n.geometry=new r.c,n.material=new r.q({map:o.a,vertexColors:r.H});return n.instanced=a,n.visible=!1,n.aux={frustum:new r.j,matrix:new r.o},n}var n,i,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["s"]),n=t,(i=[{key:"dispose",value:function(){var e=this.geometry,t=this.material;e.dispose(),t.dispose()}},{key:"resize",value:function(e){for(var t=this,n=this.children,o=this.geometry,i=this.instanced,a=this.material;n.length;)this.remove(n[0]);this.instances=[];for(var s=new r.G,c=new r.G,u=-8;u<=8;u+=1)for(var l=-8;l<=8;l+=1)for(var f=-8;f<=8;f+=1){var p=s.set(f,l,u).distanceTo(c);if(Math.round(p)<=8){var d=new r.p(o,a);d.chunk={x:f,y:l,z:u},d.distance=p,d.matrixAutoUpdate=!1,d.position.set(f*e,l*e,u*e),d.updateMatrix(),d.updateMatrixWorld(),this.instances.push(d)}}if(this.instances.sort(function(e,t){return e.distance-t.distance}),this.intersects=this.instances.filter(function(e){var t=e.chunk,n=t.x,r=t.y,o=t.z;return n>=-2&&n<=2&&r>=-2&&r<=2&&o>=-2&&o<=2}),i){var h=new r.p(o,a);h.frustumCulled=!1,this.add(h);var y=new Float32Array(3*this.instances.length);o.attributes.offset?o.attributes.offset.setArray(y):(o.addAttribute("offset",new r.k(y,3)),o.attributes.offset.setDynamic(!0)),o.maxInstancedCount=0}else this.instances.forEach(function(e){return t.add(e)})}},{key:"updateFrustum",value:function(e){var t=this.aux,n=t.frustum,r=t.matrix,o=this.geometry,i=this.instanced,a=this.instances;if(i&&a){r.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),n.setFromMatrix(r);var s=a.filter(function(e){var t=e.worldSphere;return t&&n.intersectsSphere(t)}).reduce(function(e,t){var n=t.position;return e.push(n.x,n.y,n.z),e},[]);o.attributes.offset.array.set(s),o.attributes.offset.needsUpdate=!0,o.maxInstancedCount=s.length/3}}},{key:"update",value:function(e){var t=e.index,n=e.position,o=e.color,i=e.normal,a=e.uv,s=this.geometry,c=this.instances;s.attributes.position?(s.attributes.position.setArray(n),s.attributes.position.needsUpdate=!0):s.addAttribute("position",new r.b(n,3)),s.attributes.color?(s.attributes.color.setArray(o),s.attributes.color.needsUpdate=!0):s.addAttribute("color",new r.b(o,3)),s.attributes.normal?(s.attributes.normal.setArray(i),s.attributes.normal.needsUpdate=!0):s.addAttribute("normal",new r.b(i,3)),s.attributes.uv?(s.attributes.uv.setArray(a),s.attributes.uv.needsUpdate=!0):s.addAttribute("uv",new r.b(a,2)),s.index?(s.index.setArray(t),s.index.needsUpdate=!0):s.setIndex(new r.b(t,1)),s.computeBoundingSphere(),c.forEach(function(e){e.worldSphere=s.boundingSphere.clone().applyMatrix4(e.matrixWorld)}),this.visible=!0}}])&&a(n.prototype,i),l&&a(n,l),t}();l.shader={vertex:r.C.basic.vertexShader.replace("#include <clipping_planes_pars_vertex>",["#include <clipping_planes_pars_vertex>","attribute vec3 offset;"].join("\n")).replace("#include <begin_vertex>",["vec3 transformed = vec3( offset + position );"].join("\n")),fragment:r.C.basic.fragmentShader,uniforms:r.E.clone(r.C.basic.uniforms),defines:{USE_MAP:!0}},t.a=l},JaV3:function(e,t,n){"use strict";(function(e){var r=n("17x9"),o=n.n(r),i=n("q1tI"),a=n.n(i),s=n("/MKj"),c=n("Womt"),u=n("vJ50"),l=n("LMr1"),f=n("SuMo"),p=n("CEu6"),d=n("4mAa");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function m(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),g(this,v(n).apply(this,arguments))}var r,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(n,i["PureComponent"]),r=n,(o=[{key:"componentDidMount",value:function(){var e=this.props,t=e.fog,n=e.history,r=e.match.params.slug,o=e.renderer.current,i=e.fetch,a=e.updateFog,s=o.resetScene();o.camera.canLock=!o.renderer.vr.enabled,this.picker=new f.a({anisotropy:o.getMaxAnisotropy(),fog:t,history:n,updateFog:a}),o.hands.children[1].add(this.picker),this.voxels=new p.a({instanced:!!o.renderer.extensions.get("ANGLE_instanced_arrays")}),s.add(this.voxels),this.head=new c.G,this.intersects=[this.picker],this.renderer=o,this.rocket={forward:new c.G,matrix:new c.o},this.scene=s,s.onBeforeRender=this.onBeforeRender.bind(this),i(r)}},{key:"componentDidUpdate",value:function(t){var n=t.geometry,r=t.fog,o=t.size,i=this.props,a=i.geometry,s=i.fog,c=i.size,u=this.picker,l=this.renderer,f=this.voxels,p=l.isScreenshot,d=l.raycaster,h=l.room,y=l.renderer.vr;if(s!==r&&l.setFog(s),c!==o&&(h.position.set(.5*c+.5,.5*c,.5*c+.5),f.resize(c),this.intersects=[u].concat(m(f.intersects))),a!==n){if(f.update(a),!n.index&&y.enabled){d.ray.origin.copy(h.position),d.ray.direction.set(0,-1,0);var b=d.intersectObjects(f.intersects)[0];b&&(h.position.y=b.point.y)}p&&e(function(){window.__SCREENSHOT_READY__=!0})}}},{key:"componentWillUnmount",value:function(){var e=this.picker,t=this.renderer,n=this.scene,r=this.props.reset;t.hands.children[1].remove(e),e.dispose(),delete n.onBeforeRender,r()}},{key:"onBeforeRender",value:function(e,t,n){var r=e.animation,o=r.delta,i=r.time,a=this.head,s=this.intersects,c=this.picker,u=this.props,l=u.size,f=u.updateVoxels,p=this.renderer,d=p.hands,h=p.isScreenshot,m=p.raycaster,b=p.room,g=this.rocket;this.voxels.updateFrustum(n);var v=!1;if(d.children.forEach(function(e){var t=e.buttons,r=e.pointer;if("levitate"===c.locomotionMode&&t.pad){g.matrix.extractRotation(e.matrixWorld),g.forward.set(0,0,-1).applyMatrix4(g.matrix).multiplyScalar(5*o);var i=y(["x","y","z"].map(function(e){for(var t=b.position[e]+g.forward[e];t<0;)t+=l;for(;t>=l;)t-=l;return t}),3),u=i[0],p=i[1],d=i[2];b.position.set(u,p,d),v=!0}if(v)r.visible=!1;else{e.setupRaycaster(m);var h=m.intersectObjects(s)[0]||!1;if(h){var w=h.distance,E=h.face.normal,S=h.object,x=h.point;if(r.scale.z=w-.175,r.visible=!0,S!==c){if(t.padDown&&0===E.x&&1===E.y&&0===E.z){a.setFromMatrixPosition(n.matrixWorld);var O={x:a.x-b.position.x,y:0,z:a.z-b.position.z},k=y(["x","y","z"].map(function(e){for(var t=x[e]-O[e];t<0;)t+=l;for(;t>=l;)t-=l;return t}),3),_=k[0],R=k[1],P=k[2];b.position.set(_,R,P)}(t.triggerDown||t.gripDown)&&f({color:c.colors.fg,point:x,normal:E,remove:t.gripDown})}else t.triggerDown&&c.onPointer(x)}else r.visible=!1}}),!h&&l&&n.canLock){if(!n.isLocked){var w=5e-4*Math.sin(.1*i);n.rotateY(w),n.rotateX(w),n.rotateZ(w),n.translateZ(.5*o),n.updateMatrixWorld()}["x","y","z"].forEach(function(e){for(;n.position[e]<0;)n.position[e]+=l;for(;n.position[e]>=l;)n.position[e]-=l})}}},{key:"render",value:function(){return this.props.isCreator?a.a.createElement(l.a,null):null}}])&&b(r.prototype,o),s&&b(r,s),n}();E.propTypes={geometry:o.a.shape({index:o.a.instanceOf(Uint32Array),position:o.a.instanceOf(Float32Array),color:o.a.instanceOf(Float32Array),normal:o.a.instanceOf(Float32Array),uv:o.a.instanceOf(Float32Array)}).isRequired,fog:o.a.number.isRequired,history:o.a.object.isRequired,isCreator:o.a.bool.isRequired,match:o.a.shape({params:o.a.shape({slug:o.a.string.isRequired}).isRequired}).isRequired,size:o.a.number.isRequired,renderer:o.a.shape({current:o.a.instanceOf(d.a)}).isRequired,fetch:o.a.func.isRequired,reset:o.a.func.isRequired,updateFog:o.a.func.isRequired,updateVoxels:o.a.func.isRequired},t.a=Object(s.connect)(function(e){var t=e.realm;return{geometry:t.geometry,fog:t.fog,isCreator:t.isCreator,size:t.size}},{fetch:u.b,reset:u.d,updateFog:u.f,updateVoxels:u.h})(E)}).call(this,n("URgk").setImmediate)},LMr1:function(e,t,n){"use strict";var r=n("17x9"),o=n.n(r),i=n("q1tI"),a=n.n(i),s=n("rCLJ"),c=n("/MKj"),u=n("N2Rb"),l=n("vOnD"),f=n("eysR"),p=n("vJ50");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=l.a.form.withConfig({displayName:"metadata__Toggle",componentId:"sc-1mr8sn1-0"})(["position:absolute;top:0;left:0;cursor:pointer;.icon{position:absolute;font-size:2.5rem;top:","%;left:","%;transform:translate(-50%,-50%);}"],100/3,100/3),v=l.a.div.withConfig({displayName:"metadata__Content",componentId:"sc-1mr8sn1-1"})(["button{display:flex;align-items:center;border:1px solid #555;background:#222;padding:0.5rem 1rem;margin:0;font-family:inherit;font-weight:700;font-size:1.2rem;color:inherit;cursor:pointer;outline:0;> svg{font-size:1.5em;margin-right:0.5rem;}}"]),w=l.a.form.withConfig({displayName:"metadata__Form",componentId:"sc-1mr8sn1-2"})(["display:flex;flex-direction:column;align-items:center;width:80%;> label{width:100%;padding:0;}> input{box-sizing:border-box;border:1px solid #333;width:100%;background:#222;color:inherit;font-family:inherit;font-weight:400;font-size:2em;padding:0.5rem;margin:0 0 1rem;}"]),E=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=y(t).call(this,e))||"object"!==d(o)&&"function"!=typeof o?m(r):o).onSubmit=n.onSubmit.bind(m(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,i["PureComponent"]),n=t,(r=[{key:"onSubmit",value:function(e){e.preventDefault();var t=e.target;(0,this.props.update)({name:t.name.value})}},{key:"render",value:function(){var e=this.props,t=e.isEditingMetadata,n=e.name,r=e.hide,o=e.show;return a.a.createElement("div",null,a.a.createElement(g,{onClick:o},a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"80",height:"80",viewBox:"0 0 250 250",fill:"#fff"},a.a.createElement("path",{d:"M0,250 L250,0 L0,0 Z",fill:"#000"})),a.a.createElement(s.a,{className:"icon"})),a.a.createElement(f.a,{heading:a.a.createElement(u.Translate,{value:"Realm.editMetadata"}),isShowing:t,hide:r},a.a.createElement(v,null,a.a.createElement(w,{onSubmit:this.onSubmit},a.a.createElement("label",null,a.a.createElement(u.Translate,{value:"Realm.name"})),a.a.createElement("input",{type:"text",name:"name",defaultValue:n,required:!0}),a.a.createElement("button",{type:"submit"},a.a.createElement(s.a,null),a.a.createElement(u.Translate,{value:"Realm.save"}))))))}}])&&h(n.prototype,r),o&&h(n,o),t}();E.propTypes={isEditingMetadata:o.a.bool.isRequired,name:o.a.string.isRequired,hide:o.a.func.isRequired,show:o.a.func.isRequired,update:o.a.func.isRequired},t.a=Object(c.connect)(function(e){var t=e.realm;return{isEditingMetadata:t.isEditingMetadata,name:t.name}},{hide:p.c,show:p.e,update:p.g})(E)},"NaA/":function(e,t,n){"use strict";var r=n("Womt"),o=n("ooUw");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),t.geometry&&t.material||t.setup(),s(this,c(t).call(this,t.geometry,t.material))}var n,i,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["p"]),n=t,l=[{key:"setup",value:function(){if(!t.geometry){var e=new r.v(256,256,256,256);e.rotateX(-.5*Math.PI);var n=new r.G;e.vertices.forEach(function(e){var t=Math.floor(e.distanceTo(n))/4,r=Math.floor(t*t/3)/6;e.y=r*(.4*Math.random()+.6)+Math.max(Math.min(-(t-1.25),0),-2)}),e.faces.forEach(function(t,n){if(n%2==1){var r=e.faces[n-1],o=[t.a,t.b,t.c,r.a,r.b,r.c].map(function(t){return e.vertices[t]}),i=o.reduce(function(e,t){return e+t.y},0)/o.length;o.forEach(function(e){e.y=i});var a=Math.min(i/40+.25,1);t.color.setRGB(.5*a,a,.75*a),t.color.offsetHSL(.03*Math.random()-.01,.2*Math.random(),-.05*Math.random()),r.color.copy(t.color)}}),t.geometry=(new r.c).fromGeometry(e);for(var i=t.geometry.attributes.uv.array,a=0;a<i.length/2;a+=6)i.set([0,1],2*a),i.set([0,0],2*(a+1)),i.set([1,1],2*(a+2)),i.set([0,0],2*(a+3)),i.set([1,0],2*(a+4)),i.set([1,1],2*(a+5))}t.material||(t.material=new r.q({map:o.a,vertexColors:r.H}))}}],(i=null)&&a(n.prototype,i),l&&a(n,l),t}();t.a=l},QBLo:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return s});var r=n("vzVy"),o=n("dCQc");function i(){return function(e,t){var n=t().lobby,i=n.filter,a=n.pagination.page;return e({type:r.a,payload:o.a.fetch({endpoint:"realms/".concat(i,"/").concat(a)})})}}function a(e){return{type:r.c,payload:{value:e}}}function s(e){return{type:r.d,payload:{value:e}}}},SuMo:function(e,t,n){"use strict";var r=n("Womt"),o=n("kC7N"),i=n("yHfR");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){var n,o,s,c=e.anisotropy,l=e.fog,p=e.history,d=e.updateFog;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,s=f(t).call(this,{anisotropy:c}),n=!s||"object"!==a(s)&&"function"!=typeof s?u(o):s;var h=u(n).renderer;return n.position.set(-.15,.15,.075),n.rotation.set(0,.5*Math.PI,.1*Math.PI,"ZYX"),n.scale.set(.3,.3,1),n.block={x:.05*h.width,y:.05*h.height,width:.75*h.width,height:.75*h.height},n.strip={x:.85*h.width,y:.05*h.height,width:.1*h.width,height:.6*h.height},n.colorModeButton={label:"MODE",x:.7*h.width,y:.85*h.height,width:.25*h.width,height:.1*h.height,onPointer:function(){n.setColorMode("fg"===n.colorMode?"bg":"fg"),n.draw()}},n.locomotionModeButton={label:"MODE",x:.375*h.width,y:.85*h.height,width:.25*h.width,height:.1*h.height,onPointer:function(){n.setLocomotionMode("teleport"===n.locomotionMode?"levitate":"teleport"),n.draw()}},n.buttons=[{label:"« REALMS",x:.05*h.width,y:.85*h.height,width:.25*h.width,height:.1*h.height,onPointer:function(){return p.push("/")}},n.colorModeButton,n.locomotionModeButton],n.colors={bg:(new r.f).setHex(l),fg:(new r.f).setHSL(Math.random(),.6,.8),block:new r.f},n.setColorMode("fg"),n.setLocomotionMode("teleport"),n.updateFog=d,i.a.waitUntilLoaded("Roboto").then(function(){return n.draw()}),n}var n,d,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,o["a"]),n=t,(d=[{key:"draw",value:function(){var e=this.block,n=this.buttons,r=this.colorMode,o=this.colors,i=this.context,a=this.renderer,s=this.strip;l(f(t.prototype),"draw",this).call(this);var c=e.x,u=e.y,p=e.width,d=e.height;i.save(),i.translate(c,u),i.fillStyle="#".concat(o.block.getHexString()),i.fillRect(0,0,p,d);var h=i.createLinearGradient(0,0,p,0);h.addColorStop(0,"rgba(255,255,255,1)"),h.addColorStop(1,"rgba(255,255,255,0)"),i.fillStyle=h,i.fillRect(0,0,p,d);var y=i.createLinearGradient(0,0,0,d);y.addColorStop(0,"rgba(0,0,0,0)"),y.addColorStop(1,"rgba(0,0,0,1)"),i.fillStyle=y,i.fillRect(0,0,p,d),i.restore();var m=s.x,b=s.y,g=s.width,v=s.height;i.save(),i.translate(m,b);var w=i.createLinearGradient(0,0,0,v);w.addColorStop(0,"rgba(255, 0, 0, 1)"),w.addColorStop(.17,"rgba(255, 255, 0, 1)"),w.addColorStop(.34,"rgba(0, 255, 0, 1)"),w.addColorStop(.51,"rgba(0, 255, 255, 1)"),w.addColorStop(.68,"rgba(0, 0, 255, 1)"),w.addColorStop(.85,"rgba(255, 0, 255, 1)"),w.addColorStop(1,"rgba(255, 0, 0, 1)"),i.fillStyle=w,i.fillRect(0,0,g,v),i.restore(),i.save();var E=.1*a.width,S=.1*a.width;i.translate(.85*a.width,.7*a.height),i.fillStyle="#".concat(o[r].getHexString()),i.strokeStyle="#333",i.beginPath(),i.rect(0,0,E,S),i.fill(),i.stroke(),i.restore(),n.forEach(function(e){var t=e.label,n=e.x,r=e.y,o=e.width,a=e.height;i.save(),i.translate(n,r),i.fillStyle="#222",i.strokeStyle="#333",i.beginPath(),i.rect(0,0,o,a),i.fill(),i.stroke(),i.fillStyle="#fff",i.font="700 24px Roboto",i.textAlign="center",i.textBaseline="middle",i.fillText(t,.5*o,.5*a),i.restore()})}},{key:"setColorMode",value:function(e){var t=this.colors,n=this.colorModeButton;t.block.copy(t[e]),n.label="fg"===e?"FG color":"BG color",this.colorMode=e}},{key:"setLocomotionMode",value:function(e){this.locomotionModeButton.label="".concat(e.substr(0,1).toUpperCase()).concat(e.substr(1)),this.locomotionMode=e}},{key:"onPointer",value:function(e){var n=this,r=this.block,o=this.buttons,i=this.colors,a=this.context,c=this.colorMode,u=this.pointer,p=this.strip,d=this.updateFog;l(f(t.prototype),"onPointer",this).call(this,e),[r,p].concat(s(o)).forEach(function(e){var t=e.x,r=e.y,o=e.width,s=e.height,l=e.onPointer;if(!(u.x<t||u.x>t+o||u.y<r||u.y>r+s))if(l)l();else{var f=a.getImageData(u.x,u.y,1,1).data;e===p&&i.block.setRGB(f[0]/255,f[1]/255,f[2]/255),i[c].setRGB(f[0]/255,f[1]/255,f[2]/255),"bg"===c&&d(i.bg.getHex()),n.draw()}})}}])&&c(n.prototype,d),h&&c(n,h),t}();t.a=d},Xtfx:function(e,t,n){"use strict";var r=n("Womt"),o=n("kC7N"),i=n("dCQc"),a=n("yHfR");function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){c(e,t,n[t])})}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function h(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){function t(){return f(this,t),t.geometry&&t.material||t.setup(),h(this,y(t).call(this,t.geometry,t.material))}return m(t,r["p"]),d(t,null,[{key:"setup",value:function(){if(!t.geometry){var e=new r.g(.025,.025,1.5,8,32);e.translate(0,-.83,0);var n=new r.f;e.faces.forEach(function(e,t){t%2==1?e.color.copy(n):(e.color.setHex(4478276),e.color.offsetHSL(0,0,-.1*Math.random()),n.copy(e.color))}),t.geometry=(new r.c).fromGeometry(e)}t.material||(t.material=new r.q({vertexColors:r.H}))}}]),t}(),v=function(e){function t(e){var n,r=e.anisotropy,o=e._id,s=e.name,c=e.creator,u=e.onPointer;f(this,t),(n=h(this,y(t).call(this,{anisotropy:r}))).name=s.length>16?"".concat(s.substr(0,16),"..."):s,n.onPointer=u,n.scale.set(.3,.3,1);var l=n.renderer,p=l.width,d=l.height,m=n.context.createRadialGradient(.5*p,.5*d,.2*p,.5*p,.5*d,.5*p);m.addColorStop(0,"rgba(0, 0, 0, 0)"),m.addColorStop(1,"rgba(0, 0, 0, .5)"),n.vignette=m;var b=!1;if(a.a.waitUntilLoaded("Roboto").then(function(){b=!0,n.draw()}),c){var g=new Image;g.crossOrigin="anonymous",g.src="".concat(i.a.baseURL,"user/").concat(c._id,"/photo"),g.onload=function(){n.creator=g,b&&n.draw()}}var v=new Image;return v.crossOrigin="anonymous",v.src="".concat(i.a.baseURL,"realm/").concat(o,"/screenshot"),v.onload=function(){n.screenshot=v,b&&n.draw()},n}return m(t,o["a"]),d(t,[{key:"draw",value:function(){var e=this.context,n=this.creator,r=this.isHover,o=this.name,i=this.renderer,a=this.screenshot,s=this.vignette;u(y(t.prototype),"draw",this).call(this),a&&e.drawImage(a,0,0),e.fillStyle=s,e.fillRect(0,0,i.width,i.height),e.fillStyle="rgba(".concat(r?"255, 255, 255":"0, 0, 0",", .5)"),e.fillRect(0,.75*i.height,i.width,.25*i.height),e.font="40px Roboto",e.textAlign="left",e.textBaseline="middle",e.fillStyle=r?"#333":"#fff",n&&e.drawImage(n,0,.75*i.height,.25*i.width,.25*i.height),e.fillText(o,.05*i.width+i.width*(n?.25:.05),.875*i.height)}}]),t}(),w=function(e){function t(e){var n,r=e.anisotropy;return f(this,t),(n=h(this,y(t).call(this,{anisotropy:r,width:256,height:256}))).scale.set(.25,.25,1),n.hasLoadedFont=!1,a.a.waitUntilLoaded("Roboto").then(function(){n.hasLoadedFont=!0,n.draw()}),n}return m(t,o["a"]),d(t,[{key:"draw",value:function(){var e=this.buttons,n=this.context;u(y(t.prototype),"draw",this).call(this),n.font="700 30px Roboto",n.textAlign="center",n.textBaseline="middle",e.forEach(function(e){var t=e.label,r=e.x,o=e.y,i=e.width,a=e.height,s=e.isActive,c=e.isDisabled;n.save(),n.translate(r,o),n.beginPath(),n.rect(0,0,i,a),n.fillStyle=c?"#555":s?"#fff":"#222",n.strokeStyle="#333",n.fill(),n.stroke(),n.fillStyle=c?"#777":s?"#222":"#fff",n.fillText(t,.5*i,.5*a),n.restore()})}},{key:"onPointer",value:function(e){var n=e.isDown,r=e.point,o=this.buttons,i=this.pointer;n&&(u(y(t.prototype),"onPointer",this).call(this,r),o.filter(function(e){return!e.isDisabled}).forEach(function(e){var t=e.x,n=e.y,r=e.width,o=e.height,a=e.onPointer;i.x<t||i.x>t+r||i.y<n||i.y>n+o||a()}))}}]),t}(),E=function(e){function t(e){var n,r=e.anisotropy,o=e.history,i=e.createRealm;f(this,t),(n=h(this,y(t).call(this,{anisotropy:r}))).scale.set(.3,.3,1);var a=n.renderer,s=a.width,c=a.height;return n.buttons=[{label:"Create Realm",x:.1*s,y:.3*c,width:.8*s,height:.4*c,onPointer:function(){return i().then(function(e){var t=e.value;return o.push("/".concat(t))})}}],n}return m(t,w),t}(),S=function(e){function t(e){var n,r=e.anisotropy,o=e.page,i=e.pages,a=e.update;f(this,t);var s=(n=h(this,y(t).call(this,{anisotropy:r}))).renderer,c=s.width,u=s.height;return n.buttons=[{label:"<",x:.1*c,y:.3*u,width:.3*c,height:.4*u,onPointer:function(){n.page>0&&a(n.page-1)}},{label:">",x:.6*c,y:.3*u,width:.3*c,height:.4*u,onPointer:function(){n.page<n.pages-1&&a(n.page+1)}}],n.page=o,n.pages=i,n}return m(t,w),d(t,[{key:"draw",value:function(){var e=this.context,n=this.page,r=this.pages,o=this.renderer;u(y(t.prototype),"draw",this).call(this),e.fillStyle="#fff",e.fillText("".concat(n+1," / ").concat(r),.5*o.width,.85*o.height)}}]),t}(),x=function(e){function t(e){var n,r=e.anisotropy,o=e.isSigningIn,i=e.user,a=e.signin,s=e.signout;return f(this,t),(n=h(this,y(t).call(this,{anisotropy:r}))).signin=a,n.signout=s,n.updateSession({isSigningIn:o,user:i}),n}return m(t,w),d(t,[{key:"updateSession",value:function(e){var t=this,n=e.isSigningIn,r=e.user,o=this.renderer,a=this.signin,s=this.signout,c=o.width,u=o.height;if(this.buttons=n?[]:r?[{label:"Sign-Out",x:.1*c,y:.7*u,width:.8*c,height:.2*u,onPointer:s}]:[{label:"Sign-In",x:.1*c,y:.4*u,width:.8*c,height:.4*u,onPointer:a}],this.isSigningIn=n,this.user=r,delete this.userPhoto,r){var l=new Image;l.crossOrigin="anonymous",l.src="".concat(i.a.baseURL,"user/").concat(r._id,"/photo"),l.onload=function(){t.userPhoto=l,t.hasLoadedFont&&t.draw()}}}},{key:"draw",value:function(){var e=this.context,n=this.isSigningIn,r=this.renderer,o=this.user,i=this.userPhoto;u(y(t.prototype),"draw",this).call(this),e.fillStyle="#fff",n?(e.fillText("Remove your",.5*r.width,.25*r.height),e.fillText("headset",.5*r.width,.4*r.height),e.fillText("And Sign-In",.5*r.width,.6*r.height),e.fillText("in your browser",.5*r.width,.75*r.height)):e.fillText(o?o.firstName:"Guest",.5*r.width,.2*r.height),o&&i&&e.drawImage(i,.5*r.width-40,.5*r.height-50,80,80)}}]),t}(),O=function(e){function t(e){var n,r=e.anisotropy,o=e.isAuth,i=e.filter,a=e.update;f(this,t);var s=(n=h(this,y(t).call(this,{anisotropy:r}))).renderer,c=s.width,u=s.height;return n.buttons=[{id:"popular",label:"Most Popular",x:.1*c,y:.1*u,width:.8*c,height:.2*u,onPointer:function(){return a("popular")}},{id:"latest",label:"Latest Realms",x:.1*c,y:.4*u,width:.8*c,height:.2*u,onPointer:function(){return a("latest")}},{id:"user",label:"Your Realms",x:.1*c,y:.7*u,width:.8*c,height:.2*u,isDisabled:!o,onPointer:function(){return a("user")}}],n.filter=i,n.update=a,n}return m(t,w),d(t,[{key:"updateSession",value:function(e){var t=e.isAuth,n=this.buttons;n[n.findIndex(function(e){return"user"===e.id})].isDisabled=!t}},{key:"draw",value:function(){var e=this.buttons,n=this.filter;e.forEach(function(e){e.isActive=e.id===n}),u(y(t.prototype),"draw",this).call(this)}}]),t}(),k=function(e){function t(e){var n,r=e.anisotropy,o=e.filter,i=e.history,a=e.isSigningIn,c=e.pagination,u=e.realms,l=e.user,p=e.createRealm,d=e.setFilter,m=e.setPage,b=e.signin,g=e.signout;return f(this,t),(n=h(this,y(t).call(this))).anisotropy=r,n.history=i,n.hover={},n.intersects=[],n.position.set(0,1.25,-1),n.pagination=n.addPanel(S,s({},c,{update:m}),0,-.3,.13),n.session=n.addPanel(x,{isSigningIn:a,user:l,signin:b,signout:g},-.3,-.3,.13),n.filter=n.addPanel(O,{filter:o,isAuth:!!l,update:d},.3,-.3,.13),n.createRealm=p,n.updateRealms(u),n}return m(t,r["s"]),d(t,[{key:"addPanel",value:function(e,t,n,r,o){var i=this.anisotropy,a=this.intersects,c=new e(s({},t,{anisotropy:i}));c.position.set(n,r,o),c.lookAt(0,.5,1),this.add(c);var u=new g;return u.position.copy(c.position),this.add(u),a.push(c),c}},{key:"dispose",value:function(){this.children.forEach(function(e){return e.dispose&&e.dispose()})}},{key:"setHover",value:function(e){var t=e.hand,n=e.realm,r=this.hover;r[t]!==n&&(r[t]&&(r[t].isHover=!1,r[t].draw()),n&&(n.isHover=!0,n.draw()),this.hover[t]=n)}},{key:"updateFilter",value:function(e){var t=this.filter;t.filter=e,t.draw()}},{key:"updatePagination",value:function(e){var t=e.page,n=e.pages,r=this.pagination;r.page=t,r.pages=n,r.draw()}},{key:"updateRealms",value:function(e){for(var t=this,n=this.anisotropy,r=this.children,o=this.createRealm,i=this.filter.filter,a=this.history,c=this.pagination;r.length>6;){var u=r[r.length-1];u.dispose&&u.dispose(),this.remove(u)}this.intersects.length=3;var l="user"===i&&0===c.page,f=.25+-.25*(e.length+(l?1:0));l&&(this.addPanel(E,{history:a,createRealm:o},f,0,0),f+=.5),e.forEach(function(e,r){var o=t.addPanel(v,s({},e,{anisotropy:n,onPointer:function(n){var r=n.hand,i=n.isDown;t.setHover({hand:r,realm:o}),i&&a.push("/".concat(e.slug))}}),f+.5*r,0,0)})}},{key:"updateSession",value:function(e){var t=e.isSigningIn,n=e.user,r=this.filter,o=this.session;r.updateSession({isAuth:!!n}),r.draw(),o.updateSession({isSigningIn:t,user:n}),o.draw()}}]),t}();t.a=k},awf5:function(e,t,n){"use strict";var r=n("Womt");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),t.geometry&&t.material||t.setup(),a(this,s(t).call(this,t.geometry,t.material))}var n,o,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["w"]),n=t,u=[{key:"setup",value:function(){if(!t.geometry){for(var e=new Float32Array(6144),n=new Float32Array(6144),o=new r.G,i=0;i<6144;i+=3){o.set(2*Math.random()-1,Math.random(),2*Math.random()-1).normalize().multiplyScalar(512),e[i]=o.x,e[i+1]=o.y,e[i+2]=o.z;var a=.2+.5*Math.random();n[i]=a-.1*Math.random(),n[i+1]=a-.1*Math.random(),n[i+2]=a-.1*Math.random()}t.geometry=new r.c,t.geometry.addAttribute("position",new r.b(e,3)),t.geometry.addAttribute("color",new r.b(n,3))}t.material||(t.material=new r.x({fog:!1,vertexColors:r.H}))}}],(o=[{key:"onBeforeRender",value:function(e){var t=e.animation.time;this.rotation.x=1*Math.sin(.01*t)/3}}])&&i(n.prototype,o),u&&i(n,u),t}();t.a=u},dCQc:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseURL="https://projects.gatunes.com/realmsvr/"}var t,n,o;return t=e,(n=[{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=e.body,n=e.endpoint,r=e.headers,o=void 0===r?{}:r,i=e.method,a=void 0===i?"GET":i,s=this.authorization,c=this.baseURL;return s&&(o.Authorization=s),!t||t instanceof FormData||(t=JSON.stringify(t),o["Content-Type"]="application/json"),fetch("".concat(c).concat(n),{body:t,headers:o,method:a}).then(function(e){var t=e.headers,n=e.status;if(n<200||n>=400)throw new Error(n);switch((t.get("Content-Type")||"").split(";")[0]){case"text/plain":return e.arrayBuffer();case"application/json":return e.json();default:return e}})})},{key:"setAuthorization",value:function(e){e?this.authorization="Bearer ".concat(e):delete this.authorization,this.token=e}}])&&r(t.prototype,n),o&&r(t,o),e}();t.a=new o},eysR:function(e,t,n){"use strict";var r=n("17x9"),o=n.n(r),i=n("q1tI"),a=n.n(i),s=n("rCLJ"),c=n("vOnD"),u=c.a.div.withConfig({displayName:"popup__Overlay",componentId:"hdjax7-0"})(["position:fixed;top:0;right:0;bottom:0;left:0;background:rgba(0,0,0,.5);"]),l=c.a.div.withConfig({displayName:"popup__Wrapper",componentId:"hdjax7-1"})(["position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:512px;background:#444;box-shadow:0 0 32px rgba(0,0,0,.5);"]),f=c.a.div.withConfig({displayName:"popup__Heading",componentId:"hdjax7-2"})(["background:#111;display:flex;align-items:center;justify-content:space-between;height:56px;> span{padding:0 1.5em;}> a{padding:1rem;cursor:pointer;> svg{font-size:1.5em;}}"]),p=c.a.div.withConfig({displayName:"popup__Content",componentId:"hdjax7-3"})(["> div{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem 0;}"]),d=function(e){var t=e.children,n=e.heading,r=e.isShowing,o=e.hide;return r?a.a.createElement(u,null,a.a.createElement(l,null,a.a.createElement(f,null,n,a.a.createElement("a",{onClick:o},a.a.createElement(s.g,null))),a.a.createElement(p,null,t))):null};d.propTypes={children:o.a.node.isRequired,heading:o.a.node.isRequired,isShowing:o.a.bool.isRequired,hide:o.a.func.isRequired},t.a=d},f7Ve:function(e,t,n){e.exports=function(){return new Worker(n.p+"code/mesher.worker.360be4fe5c7a7121f34a.js")}},kC7N:function(e,t,n){"use strict";var r=n("Womt");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(e){var n,o=e.anisotropy,i=e.width,c=void 0===i?512:i,u=e.height,l=void 0===u?512:u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),t.backplate&&t.geometry||t.setup();var f=document.createElement("canvas");f.width=c,f.height=l;var p=new r.d(f);return p.anisotropy=o,(n=a(this,s(t).call(this,t.geometry,new r.q({map:p})))).add(t.backplate.clone()),n.context=f.getContext("2d"),n.pointer=new r.G,n.renderer=f,n.texture=p,n}var n,o,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["p"]),n=t,u=[{key:"setup",value:function(){if(!t.backplate){var e=new r.a(1,1,.06);e.faces.splice(8,2),e.faces.forEach(function(e,t){return e.color.setHex(4===Math.floor(t/2)?1118481:2236962)}),e.translate(0,0,-.01);var n=new r.p((new r.c).fromGeometry(e),new r.q({side:r.h,vertexColors:r.H}));t.backplate=n}t.geometry||(t.geometry=new r.u(1,1))}}],(o=[{key:"dispose",value:function(){var e=this.material,t=this.texture;e.dispose(),t.dispose()}},{key:"draw",value:function(){var e=this.context,t=this.renderer,n=this.texture;e.fillStyle="#111",e.fillRect(0,0,t.width,t.height),n.needsUpdate=!0}},{key:"onPointer",value:function(e){var t=this.pointer,n=this.renderer;this.worldToLocal(t.copy(e)),t.set((t.x+.5)*n.width,(1-(t.y+.5))*n.height,0)}}])&&i(n.prototype,o),u&&i(n,u),t}();t.a=u},ooUw:function(e,t,n){"use strict";var r=n("Womt");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=document.createElement("canvas"),o=n.getContext("2d");n.width=16,n.height=16;for(var s=o.getImageData(0,0,n.width,n.height),c=0;c<n.height;c+=1)for(var u=0;u<n.width;u+=1){var l=.9+.05*Math.random();0===u||u===n.width-1||0===c||c===n.height-1?l*=.9:1!==u&&u!==n.width-2&&1!==c&&c!==n.height-2||(l*=1.2),l=Math.floor(255*Math.min(Math.max(l,0),1));var f=4*(c*n.height+u);s.data[f]=l,s.data[f+1]=l,s.data[f+2]=l,s.data[f+3]=255}return o.putImageData(s,0,0),(e=i(this,a(t).call(this,n))).magFilter=r.r,e.minFilter=r.r,e.wrapS=r.z,e.wrapT=r.z,e.needsUpdate=!0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r["d"]),t}();t.a=new c},p2bk:function(e,t,n){},vJ50:function(e,t,n){"use strict";var r=n("vzVy"),o=n("dCQc"),i=n("f7Ve"),a=n.n(i);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.promiseId=0,this.promises={},this.worker=new a.a,this.worker.onmessage=this.onMessage.bind(this)}var t,n,r;return t=e,(n=[{key:"generate",value:function(e){var t=this,n=e.size,r=e.voxels,o=this.promiseId,i=this.promises,a=this.worker;return new Promise(function(e){i[o]=e,t.promiseId+=1,a.postMessage({promiseId:o,size:n,voxels:r})})}},{key:"onMessage",value:function(e){var t=e.data,n=t.geometry,r=t.promiseId,o=this.promises;o[r](n),delete o[r]}}])&&s(t.prototype,n),r&&s(t,r),e}());function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(){return{type:r.e,payload:o.a.fetch({endpoint:"realm",method:"PUT"})}}function p(e){var t=e.size,n=e.voxels;return{type:r.m,payload:c.generate({size:t,voxels:n})}}function d(e){return function(t){return t({type:r.g,payload:o.a.fetch({endpoint:"realm/".concat(e)}).then(function(e){return o.a.fetch({endpoint:"realm/".concat(e._id,"/voxels")}).then(function(n){return n=new Uint32Array(n),t(p({size:e.size,voxels:n})),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){l(e,t,n[t])})}return e}({},e,{voxels:n})})})})}}function h(){return{type:r.i}}function y(){return{type:r.j}}function m(){return{type:r.k}}function b(e){return function(t,n){var i=n().realm,a=i.id;return i.isCreator&&o.a.fetch({body:{fog:e},endpoint:"realm/".concat(a,"/metadata"),method:"PUT"}),t({type:r.l,payload:{fog:e}})}}function g(e){var t=e.name;return function(e,n){var i=n().realm.id;return e({type:r.o,payload:o.a.fetch({body:{name:t},endpoint:"realm/".concat(i,"/metadata"),method:"PUT"})})}}function v(e){var t=e.color,n=e.normal,i=e.point,a=e.remove;return function(e,s){var c=s().realm,l=c.id,f=c.isCreator,d=c.size,h=c.voxels,y=u(["x","y","z"].map(function(e){for(var t=Math.floor(i[e]+.5*n[e]*(a?-1:1));t<0;)t+=d;for(;t>=d;)t-=d;return t}),3),m=y[0],b=y[1],g=y[2],v=Math.min(Math.max(Math.round(255*t.r+8*Math.random()-4),0),255),w=Math.min(Math.max(Math.round(255*t.g+8*Math.random()-4),0),255),E=Math.min(Math.max(Math.round(255*t.b+8*Math.random()-4),0),255),S=a?0:1<<24|v<<16|w<<8|E,x=new Uint32Array(h);if(x[g*d*d+b*d+m]=S,e(p({size:d,voxels:x})),f){var O=new FormData;O.append("voxels",new Blob([x.buffer],{type:"text/plain"})),o.a.fetch({body:O,endpoint:"realm/".concat(l,"/voxels"),method:"PUT"})}return e({type:r.q,payload:{voxels:x}})}}n.d(t,"a",function(){return f}),n.d(t,"b",function(){return d}),n.d(t,"c",function(){return h}),n.d(t,"d",function(){return y}),n.d(t,"e",function(){return m}),n.d(t,"f",function(){return b}),n.d(t,"g",function(){return g}),n.d(t,"h",function(){return v})},vzVy:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return a}),n.d(t,"e",function(){return s}),n.d(t,"f",function(){return c}),n.d(t,"g",function(){return u}),n.d(t,"h",function(){return l}),n.d(t,"i",function(){return f}),n.d(t,"j",function(){return p}),n.d(t,"k",function(){return d}),n.d(t,"l",function(){return h}),n.d(t,"m",function(){return y}),n.d(t,"n",function(){return m}),n.d(t,"o",function(){return b}),n.d(t,"p",function(){return g}),n.d(t,"q",function(){return v}),n.d(t,"r",function(){return w}),n.d(t,"u",function(){return E}),n.d(t,"v",function(){return S}),n.d(t,"w",function(){return x}),n.d(t,"z",function(){return O}),n.d(t,"s",function(){return k}),n.d(t,"t",function(){return _}),n.d(t,"x",function(){return R}),n.d(t,"y",function(){return P}),n.d(t,"A",function(){return j});var r="LOBBY/FETCH_REALMS",o="LOBBY/FETCH_REALMS_FULFILLED",i="LOBBY/SET_FILTER",a="LOBBY/SET_PAGE",s="REALM/CREATE",c="REALM/CREATE_FULFILLED",u="REALM/FETCH",l="REALM/FETCH_FULFILLED",f="REALM/HIDE_METADATA_POPUP",p="REALM/RESET",d="REALM/SHOW_METADATA_POPUP",h="REALM/UPDATE_FOG",y="REALM/UPDATE_GEOMETRY",m="REALM/UPDATE_GEOMETRY_FULFILLED",b="REALM/UPDATE_METADATA",g="REALM/UPDATE_METADATA_FULFILLED",v="REALM/UPDATE_VOXELS",w="USER/HIDE_SESSION_POPUP",E="USER/REFRESH_SESSION",S="USER/REFRESH_SESSION_FULFILLED",x="USER/REFRESH_SESSION_REJECTED",O="USER/SHOW_SESSION_POPUP",k="USER/LOGIN",_="USER/LOGIN_FULFILLED",R="USER/REGISTER",P="USER/REGISTER_FULFILLED",j="USER/SIGNOUT"},yHfR:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.loaded={}}var t,n,o;return t=e,(n=[{key:"waitUntilLoaded",value:function(e){var t=this.loaded;return Array.isArray(e)||(e=[e]),Promise.all(e.map(function(e){return new Promise(function(n){if(t[e])n();else{!function r(){if(document.fonts.check("1rem ".concat(e)))return t[e]=!0,void n();setTimeout(r,10)}()}})}))}}])&&r(t.prototype,n),o&&r(t,o),e}();t.a=new o},"z+lE":function(e,t,n){"use strict";var r=n("Womt"),o=n("yHfR");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(e){var n,i=e.anisotropy;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=document.createElement("canvas");a.width=1024,a.height=1024;var u=new r.d(a);return u.anisotropy=i,(n=s(this,c(t).call(this,new r.u(2,2),new r.q({map:u,transparent:!0})))).lookAt(0,-.5,1),n.position.set(0,2.5,-3),n.renderer=a,n.texture=u,o.a.waitUntilLoaded("Roboto").then(function(){return n.draw()}),n}var n,i,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["p"]),n=t,(i=[{key:"dispose",value:function(){var e=this.geometry,t=this.material,n=this.texture;e.dispose(),t.dispose(),n.dispose()}},{key:"draw",value:function(){for(var e=this.renderer,t=this.texture,n=e.getContext("2d"),r=51,o=153,i=51,a=0;a<e.height;a+=8)for(var s=0;s<e.width;s+=8){var c=(1-a/(e.height-8)+.1)/3,u=.6*Math.random()+.3;n.fillStyle="rgba(".concat(Math.floor(r*u),", ").concat(Math.floor(o*u),", ").concat(Math.floor(i*u),", ").concat(c,")"),n.beginPath(),n.arc(s+4,a+4,3,0,2*Math.PI),n.fill()}n.font="700 200px Roboto",n.textAlign="center",n.textBaseline="middle",n.fillStyle="rgba(255, 255, 255, 0.8)",n.fillText("REALMS",.5*e.width,.21*e.height),n.font="70px Roboto",n.fillStyle="#999",n.fillText("A recursive VR experience",.5*e.width,.5*e.height),n.font="50px Roboto",n.fillStyle="#696",n.fillText("v".concat("0.1.96"," - dani@gatunes © 2019"),.5*e.width,.815*e.height),t.needsUpdate=!0}}])&&a(n.prototype,i),l&&a(n,l),t}();t.a=l}},[[0,1,2]]]);
//# sourceMappingURL=main.82d19def9811c6192fc633329092bb89.js.map